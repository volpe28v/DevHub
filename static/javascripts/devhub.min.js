function getSelectionCount(a){var b=a.document.selection.createRange();if(null==b||b.parentElement()!==a)return[0/0,0/0];var c=arguments[1]||a.value,d=c.length,e=a.createTextRange();e.moveToBookmark(b.getBookmark());var f=a.createTextRange();if(f.collapse(!1),e.compareEndPoints("StartToEnd",f)>=0)return[d,d];var g=arguments[2]||c.replace(/rn|r/g,"n"),h=-e.moveStart("character",-d);if(h+=g.slice(0,h).split("n").length-1,e.compareEndPoints("EndToEnd",f)>=0)return[h,d];var i=-e.moveEnd("character",-d);return i+=g.slice(0,i).split("n").length-1,[h,i]}function FaviconNumber(a){var b=window.navigator.userAgent.toLowerCase();this.canUseFavico=!1,-1!=b.indexOf("chrome")?this.canUseFavico=!0:-1!=b.indexOf("firefox")&&(this.canUseFavico=!0),this.newest_count=0,this.focus_id=a.focus_id,this.title=document.title,this.favicon=new Favico({animation:"none"})}function DropZone(a){return window.FileReader?(a.dropTarget.bind("dragenter",this.cancel_event),a.dropTarget.bind("dragover",this.cancel_event),void 0==a.dropChildSelector?a.dropTarget.on("drop",this.drop_file_action(a.alertTarget,a.uploadedAction)):a.dropTarget.on("drop",a.dropChildSelector,this.drop_file_action(a.alertTarget,a.uploadedAction)),void(void 0!=a.fileTarget&&a.fileTarget.on("change",this.select_file_action(a.alertTarget,a.uploadedAction)))):(show_share_memo_alert(a.alertTarget,"Drop file","This browser does not support dropping files."),!1)}function ChatController(a){this.socket=a.socket,this.faviconNumber=a.faviconNumber,this.changedLoginName=a.changedLoginName,this.loginElemList=[],this.init_chat(),this.init_notification(),this.init_socket(),this.init_dropzone()}function ShareMemoController(a){this.socket=a.socket,this.writing_text=[],this.text_logs=[],this.init_sharememo(),this.init_socket(),this.init_dropzone()}function adjust_display_size_for_mobile(){var a=$(window).width();$(".viewport").css("width",a+"px").css("overflow","hidden").css("padding",0),$(".flipsnap").css("width",2*a+"px"),chatController.setWidth(a),shareMemoController.setWidth(a),Flipsnap(".flipsnap").refresh()}function init_websocket(){socket.on("connect",function(){socket.emit("name",{name:$.cookie(COOKIE_NAME)})}),socket.on("disconnect",function(){}),socket.on("set_name",function(a){chatController.setName(a),$("#login_name").val(a)});var a=function(){var a=$("#login_name").val();""!=a&&($.cookie(COOKIE_NAME,a,{expires:COOKIE_EXPIRES}),socket.emit("name",{name:a}),chatController.setName(a),chatController.focus()),$("#name_in").modal("hide")};$("#login").click(function(){a()}),$("#login_form").submit(function(){return a(),!1})}function change_style(a){if(!(a in STYLE_CONFIG))throw Error("invalid style name: "+a);var b=STYLE_CONFIG[a],c=b.css_file;$("#devhub-style").attr("href","/stylesheets/"+c),$.cookie(COOKIE_STYLE_NAME,a,{expires:COOKIE_EXPIRES});var d=$('.nav i[class^="icon-"]');b.white_icon?d.addClass("icon-white"):d.removeClass("icon-white")}!function(a){a.cookie=function(b,c,d){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(c))||null===c||void 0===c)){if(d=a.extend({},d),(null===c||void 0===c)&&(d.expires=-1),"number"==typeof d.expires){var e=d.expires,f=d.expires=new Date;f.setDate(f.getDate()+e)}return c=String(c),document.cookie=[encodeURIComponent(b),"=",d.raw?c:encodeURIComponent(c),d.expires?"; expires="+d.expires.toUTCString():"",d.path?"; path="+d.path:"",d.domain?"; domain="+d.domain:"",d.secure?"; secure":""].join("")}d=c||{};for(var g,h=d.raw?function(a){return a}:decodeURIComponent,i=document.cookie.split("; "),j=0;g=i[j]&&i[j].split("=");j++)if(h(g[0])===b)return h(g[1]||"");return null}}(jQuery),function(a,b){function c(a,b){return(p?b.originalEvent.touches[0]:b)["page"+a.toUpperCase()]}function d(b,c,d){var e=a.Event(c,w);a.event.trigger(e,{originalEvent:b},b.target),e.isDefaultPrevented()&&b.preventDefault(),d&&(a.event.remove(u,s+"."+t,f),a.event.remove(u,r+"."+t,g))}function e(b){var e=b.timeStamp||+new Date;j!=e&&(j=e,v.x=w.x=c("x",b),v.y=w.y=c("y",b),v.time=e,v.target=b.target,w.orientation=null,w.end=!1,h=!1,i=!1,k=setTimeout(function(){i=!0,d(b,"press")},a.Finger.pressDuration),a.event.add(u,s+"."+t,f),a.event.add(u,r+"."+t,g),x.preventDefault&&b.preventDefault())}function f(b){return w.x=c("x",b),w.y=c("y",b),w.dx=w.x-v.x,w.dy=w.y-v.y,w.adx=Math.abs(w.dx),w.ady=Math.abs(w.dy),(h=w.adx>x.motionThreshold||w.ady>x.motionThreshold)?(clearTimeout(k),w.orientation||(w.adx>w.ady?(w.orientation="horizontal",w.direction=w.dx>0?1:-1):(w.orientation="vertical",w.direction=w.dy>0?1:-1)),b.target!==v.target?(b.target=v.target,void g.call(this,a.Event(r+"."+t,b))):void d(b,"drag")):void 0}function g(a){var b,c=a.timeStamp||+new Date,e=c-v.time;if(clearTimeout(k),a.target===v.target){if(h||i)x.flickDuration>e&&d(a,"flick"),w.end=!0,b="drag";else{var f=l===a.target&&x.doubleTapInterval>c-m;b=f?"doubletap":"tap",l=f?null:v.target,m=c}d(a,b,!0)}}var h,i,j,k,l,m,n=/chrome/i.exec(b),o=/android/i.exec(b),p="ontouchstart"in window&&!(n&&!o),q=p?"touchstart":"mousedown",r=p?"touchend touchcancel":"mouseup mouseleave",s=p?"touchmove":"mousemove",t="finger",u=a("html")[0],v={},w={},x=a.Finger={pressDuration:300,doubleTapInterval:300,flickDuration:150,motionThreshold:5};a.event.add(u,q+"."+t,e)}(jQuery,navigator.userAgent),function(a){a.fn.autofit=function(b){var c={min_height:200},d=function(b,c){if(a(b).is(":visible")){var d=a(b).get(0);if(d.scrollHeight>d.offsetHeight)d.style.height=d.scrollHeight+"px";else if(!isNaN(parseInt(d.style.height))){for(;d.scrollHeight-50<parseInt(d.style.height);){if(parseInt(d.style.height)<c)return d.style.height=c+"px",void(d.style.height=d.scrollHeight+"px");d.style.height=parseInt(d.style.height)-50+"px"}arguments.callee(b,c)}}},b=a.extend(c,b);return this.each(function(){a(this).css("overflow","hidden"),a(this).css("height",b.min_height+"px"),d(this,b.min_height),a(this).on("keyup",function(a){(void 0==a.keyCode||13==a.keyCode)&&d(this,b.min_height)})}),this}}(jQuery),function(a,b,c){function d(c,d,e){var f=b.createElement(c);return d&&(f.id=_+d),e&&(f.style.cssText=e),a(f)}function e(){return c.innerHeight?c.innerHeight:a(c).height()}function f(b,c){c!==Object(c)&&(c={}),this.cache={},this.el=b,this.value=function(b){var d;return void 0===this.cache[b]&&(d=a(this.el).attr("data-cbox-"+b),void 0!==d?this.cache[b]=d:void 0!==c[b]?this.cache[b]=c[b]:void 0!==Z[b]&&(this.cache[b]=Z[b])),this.cache[b]},this.get=function(b){var c=this.value(b);return a.isFunction(c)?c.call(this.el,this):c}}function g(a){var b=A.length,c=(R+a)%b;return 0>c?b+c:c}function h(a,b){return Math.round((/%/.test(a)?("x"===b?B.width():e())/100:1)*parseInt(a,10))}function i(a,b){return a.get("photo")||a.get("photoRegex").test(b)}function j(a,b){return a.get("retinaUrl")&&c.devicePixelRatio>1?b.replace(a.get("photoRegex"),a.get("retinaSuffix")):b}function k(a){"contains"in t[0]&&!t[0].contains(a.target)&&(a.stopPropagation(),t.focus())}function l(a){l.str!==a&&(t.add(s).removeClass(l.str).addClass(a),l.str=a)}function m(){R=0,rel&&"nofollow"!==rel?(A=a("."+ab).filter(function(){var b=a.data(this,$),c=new f(this,b);return c.get("rel")===rel}),R=A.index(M.el),-1===R&&(A=A.add(M.el),R=A.length-1)):A=a(M.el)}function n(c){a(b).trigger(c),hb.triggerHandler(c)}function o(c){var e;V||(e=a(c).data("colorbox"),M=new f(c,e),rel=M.get("rel"),m(),T||(T=U=!0,l(M.get("className")),t.css({visibility:"hidden",display:"block"}),C=d(ib,"LoadedContent","width:0; height:0; overflow:hidden; visibility:hidden"),v.css({width:"",height:""}).append(C),N=w.height()+z.height()+v.outerHeight(!0)-v.height(),O=x.width()+y.width()+v.outerWidth(!0)-v.width(),P=C.outerHeight(!0),Q=C.outerWidth(!0),M.w=h(M.get("initialWidth"),"x"),M.h=h(M.get("initialHeight"),"y"),C.css({width:"",height:M.h}),X.position(),n(bb),M.get("onOpen"),L.add(F).hide(),t.focus(),M.get("trapFocus")&&b.addEventListener&&(b.addEventListener("focus",k,!0),hb.one(fb,function(){b.removeEventListener("focus",k,!0)})),M.get("returnFocus")&&hb.one(fb,function(){a(M.el).focus()})),s.css({opacity:parseFloat(M.get("opacity")),cursor:M.get("overlayClose")?"pointer":"auto",visibility:"visible"}).show(),M.get("closeButton")?K.html(M.get("close")).appendTo(v):K.appendTo("<div/>"),r())}function p(){!t&&b.body&&(Y=!1,B=a(c),t=d(ib).attr({id:$,"class":a.support.opacity===!1?_+"IE":"",role:"dialog",tabindex:"-1"}).hide(),s=d(ib,"Overlay").hide(),E=a([d(ib,"LoadingOverlay")[0],d(ib,"LoadingGraphic")[0]]),u=d(ib,"Wrapper"),v=d(ib,"Content").append(F=d(ib,"Title"),G=d(ib,"Current"),J=a('<button type="button"/>').attr({id:_+"Previous"}),I=a('<button type="button"/>').attr({id:_+"Next"}),H=d("button","Slideshow"),E),K=a('<button type="button"/>').attr({id:_+"Close"}),u.append(d(ib).append(d(ib,"TopLeft"),w=d(ib,"TopCenter"),d(ib,"TopRight")),d(ib,!1,"clear:left").append(x=d(ib,"MiddleLeft"),v,y=d(ib,"MiddleRight")),d(ib,!1,"clear:left").append(d(ib,"BottomLeft"),z=d(ib,"BottomCenter"),d(ib,"BottomRight"))).find("div div").css({"float":"left"}),D=d(ib,!1,"position:absolute; width:9999px; visibility:hidden; display:none; max-width:none;"),L=I.add(J).add(G).add(H),a(b.body).append(s,t.append(u,D)))}function q(){function c(a){a.which>1||a.shiftKey||a.altKey||a.metaKey||a.ctrlKey||(a.preventDefault(),o(this))}return t?(Y||(Y=!0,I.click(function(){X.next()}),J.click(function(){X.prev()}),K.click(function(){X.close()}),s.click(function(){M.get("overlayClose")&&X.close()}),a(b).bind("keydown."+_,function(a){var b=a.keyCode;T&&M.get("escKey")&&27===b&&(a.preventDefault(),X.close()),T&&M.get("arrowKey")&&A[1]&&!a.altKey&&(37===b?(a.preventDefault(),J.click()):39===b&&(a.preventDefault(),I.click()))}),a.isFunction(a.fn.on)?a(b).on("click."+_,"."+ab,c):a("."+ab).live("click."+_,c)),!0):!1}function r(){var e,f,g,k=X.prep,l=++jb;U=!0,S=!1,n(gb),n(cb),M.get("onLoad"),M.h=M.get("height")?h(M.get("height"),"y")-P-N:M.get("innerHeight")&&h(M.get("innerHeight"),"y"),M.w=M.get("width")?h(M.get("width"),"x")-Q-O:M.get("innerWidth")&&h(M.get("innerWidth"),"x"),M.mw=M.w,M.mh=M.h,M.get("maxWidth")&&(M.mw=h(M.get("maxWidth"),"x")-Q-O,M.mw=M.w&&M.w<M.mw?M.w:M.mw),M.get("maxHeight")&&(M.mh=h(M.get("maxHeight"),"y")-P-N,M.mh=M.h&&M.h<M.mh?M.h:M.mh),e=M.get("href"),W=setTimeout(function(){E.show()},100),M.get("inline")?(g=d(ib).hide().insertBefore(a(e)[0]),hb.one(gb,function(){g.replaceWith(C.children())}),k(a(e))):M.get("iframe")?k(" "):M.get("html")?k(M.get("html")):i(M,e)?(e=j(M,e),S=b.createElement("img"),a(S).addClass(_+"Photo").bind("error",function(){k(d(ib,"Error").html(M.get("imgError")))}).one("load",function(){var b;l===jb&&(a.each(["alt","longdesc","aria-describedby"],function(b,c){var d=a(M.el).attr(c)||a(M.el).attr("data-"+c);d&&S.setAttribute(c,d)}),M.get("retinaImage")&&c.devicePixelRatio>1&&(S.height=S.height/c.devicePixelRatio,S.width=S.width/c.devicePixelRatio),M.get("scalePhotos")&&(f=function(){S.height-=S.height*b,S.width-=S.width*b},M.mw&&S.width>M.mw&&(b=(S.width-M.mw)/S.width,f()),M.mh&&S.height>M.mh&&(b=(S.height-M.mh)/S.height,f())),M.h&&(S.style.marginTop=Math.max(M.mh-S.height,0)/2+"px"),A[1]&&(M.get("loop")||A[R+1])&&(S.style.cursor="pointer",S.onclick=function(){X.next()}),S.style.width=S.width+"px",S.style.height=S.height+"px",setTimeout(function(){k(S)},1))}),setTimeout(function(){S.src=e},1)):e&&D.load(e,M.get("data"),function(b,c){l===jb&&k("error"===c?d(ib,"Error").html(M.get("xhrError")):a(this).contents())})}var s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J,K,L,M,N,O,P,Q,R,S,T,U,V,W,X,Y,Z={html:!1,photo:!1,iframe:!1,inline:!1,transition:"elastic",speed:300,fadeOut:300,width:!1,initialWidth:"600",innerWidth:!1,maxWidth:!1,height:!1,initialHeight:"450",innerHeight:!1,maxHeight:!1,scalePhotos:!0,scrolling:!0,opacity:.9,preloading:!0,className:!1,overlayClose:!0,escKey:!0,arrowKey:!0,top:!1,bottom:!1,left:!1,right:!1,fixed:!1,data:void 0,closeButton:!0,fastIframe:!0,open:!1,reposition:!0,loop:!0,slideshow:!1,slideshowAuto:!0,slideshowSpeed:2500,slideshowStart:"start slideshow",slideshowStop:"stop slideshow",photoRegex:/\.(gif|png|jp(e|g|eg)|bmp|ico|webp|jxr|svg)((#|\?).*)?$/i,retinaImage:!1,retinaUrl:!1,retinaSuffix:"@2x.$1",current:"image {current} of {total}",previous:"previous",next:"next",close:"close",xhrError:"This content failed to load.",imgError:"This image failed to load.",returnFocus:!0,trapFocus:!0,onOpen:!1,onLoad:!1,onComplete:!1,onCleanup:!1,onClosed:!1,rel:function(){return this.rel},href:function(){return a(this).attr("href")},title:function(){return this.title}},$="colorbox",_="cbox",ab=_+"Element",bb=_+"_open",cb=_+"_load",db=_+"_complete",eb=_+"_cleanup",fb=_+"_closed",gb=_+"_purge",hb=a("<a/>"),ib="div",jb=0,kb={},lb=function(){function a(){clearTimeout(g)}function b(){(M.get("loop")||A[R+1])&&(a(),g=setTimeout(X.next,M.get("slideshowSpeed")))}function c(){H.html(M.get("slideshowStop")).unbind(i).one(i,d),hb.bind(db,b).bind(cb,a),t.removeClass(h+"off").addClass(h+"on")}function d(){a(),hb.unbind(db,b).unbind(cb,a),H.html(M.get("slideshowStart")).unbind(i).one(i,function(){X.next(),c()}),t.removeClass(h+"on").addClass(h+"off")}function e(){f=!1,H.hide(),a(),hb.unbind(db,b).unbind(cb,a),t.removeClass(h+"off "+h+"on")}var f,g,h=_+"Slideshow_",i="click."+_;return function(){f?M.get("slideshow")||(hb.unbind(eb,e),e()):M.get("slideshow")&&A[1]&&(f=!0,hb.one(eb,e),M.get("slideshowAuto")?c():d(),H.show())}}();a.colorbox||(a(p),X=a.fn[$]=a[$]=function(b,c){var d,e=this;if(b=b||{},a.isFunction(e))e=a("<a/>"),b.open=!0;else if(!e[0])return e;return e[0]?(p(),q()&&(c&&(b.onComplete=c),e.each(function(){var c=a.data(this,$)||{};a.data(this,$,a.extend(c,b))}).addClass(ab),d=new f(e[0],b),d.get("open")&&o(e[0])),e):e},X.position=function(b,c){function d(){w[0].style.width=z[0].style.width=v[0].style.width=parseInt(t[0].style.width,10)-O+"px",v[0].style.height=x[0].style.height=y[0].style.height=parseInt(t[0].style.height,10)-N+"px"}var f,g,i,j=0,k=0,l=t.offset();if(B.unbind("resize."+_),t.css({top:-9e4,left:-9e4}),g=B.scrollTop(),i=B.scrollLeft(),M.get("fixed")?(l.top-=g,l.left-=i,t.css({position:"fixed"})):(j=g,k=i,t.css({position:"absolute"})),k+=M.get("right")!==!1?Math.max(B.width()-M.w-Q-O-h(M.get("right"),"x"),0):M.get("left")!==!1?h(M.get("left"),"x"):Math.round(Math.max(B.width()-M.w-Q-O,0)/2),j+=M.get("bottom")!==!1?Math.max(e()-M.h-P-N-h(M.get("bottom"),"y"),0):M.get("top")!==!1?h(M.get("top"),"y"):Math.round(Math.max(e()-M.h-P-N,0)/2),t.css({top:l.top,left:l.left,visibility:"visible"}),u[0].style.width=u[0].style.height="9999px",f={width:M.w+Q+O,height:M.h+P+N,top:j,left:k},b){var m=0;a.each(f,function(a){return f[a]!==kb[a]?void(m=b):void 0}),b=m}kb=f,b||t.css(f),t.dequeue().animate(f,{duration:b||0,complete:function(){d(),U=!1,u[0].style.width=M.w+Q+O+"px",u[0].style.height=M.h+P+N+"px",M.get("reposition")&&setTimeout(function(){B.bind("resize."+_,X.position)},1),c&&c()},step:d})},X.resize=function(a){var b;T&&(a=a||{},a.width&&(M.w=h(a.width,"x")-Q-O),a.innerWidth&&(M.w=h(a.innerWidth,"x")),C.css({width:M.w}),a.height&&(M.h=h(a.height,"y")-P-N),a.innerHeight&&(M.h=h(a.innerHeight,"y")),a.innerHeight||a.height||(b=C.scrollTop(),C.css({height:"auto"}),M.h=C.height()),C.css({height:M.h}),b&&C.scrollTop(b),X.position("none"===M.get("transition")?0:M.get("speed")))},X.prep=function(c){function e(){return M.w=M.w||C.width(),M.w=M.mw&&M.mw<M.w?M.mw:M.w,M.w}function h(){return M.h=M.h||C.height(),M.h=M.mh&&M.mh<M.h?M.mh:M.h,M.h}if(T){var k,m="none"===M.get("transition")?0:M.get("speed");C.remove(),C=d(ib,"LoadedContent").append(c),C.hide().appendTo(D.show()).css({width:e(),overflow:M.get("scrolling")?"auto":"hidden"}).css({height:h()}).prependTo(v),D.hide(),a(S).css({"float":"none"}),l(M.get("className")),k=function(){function c(){a.support.opacity===!1&&t[0].style.removeAttribute("filter")}var d,e,h=A.length;T&&(e=function(){clearTimeout(W),E.hide(),n(db),M.get("onComplete")},F.html(M.get("title")).show(),C.show(),h>1?("string"==typeof M.get("current")&&G.html(M.get("current").replace("{current}",R+1).replace("{total}",h)).show(),I[M.get("loop")||h-1>R?"show":"hide"]().html(M.get("next")),J[M.get("loop")||R?"show":"hide"]().html(M.get("previous")),lb(),M.get("preloading")&&a.each([g(-1),g(1)],function(){var c,d=A[this],e=new f(d,a.data(d,$)),g=e.get("href");g&&i(e,g)&&(g=j(e,g),c=b.createElement("img"),c.src=g)})):L.hide(),M.get("iframe")?(d=b.createElement("iframe"),"frameBorder"in d&&(d.frameBorder=0),"allowTransparency"in d&&(d.allowTransparency="true"),M.get("scrolling")||(d.scrolling="no"),a(d).attr({src:M.get("href"),name:(new Date).getTime(),"class":_+"Iframe",allowFullScreen:!0}).one("load",e).appendTo(C),hb.one(gb,function(){d.src="//about:blank"}),M.get("fastIframe")&&a(d).trigger("load")):e(),"fade"===M.get("transition")?t.fadeTo(m,1,c):c())},"fade"===M.get("transition")?t.fadeTo(m,0,function(){X.position(0,k)}):X.position(m,k)}},X.next=function(){!U&&A[1]&&(M.get("loop")||A[R+1])&&(R=g(1),o(A[R]))},X.prev=function(){!U&&A[1]&&(M.get("loop")||R)&&(R=g(-1),o(A[R]))},X.close=function(){T&&!V&&(V=!0,T=!1,n(eb),M.get("onCleanup"),B.unbind("."+_),s.fadeTo(M.get("fadeOut")||0,0),t.stop().fadeTo(M.get("fadeOut")||0,0,function(){t.add(s).css({opacity:1,cursor:"auto"}).hide(),n(gb),C.remove(),setTimeout(function(){V=!1,n(fb),M.get("onClosed")},1)}))},X.remove=function(){t&&(t.stop(),a.colorbox.close(),t.stop().remove(),s.remove(),V=!1,t=null,a("."+ab).removeData($).removeClass(ab),a(b).unbind("click."+_))},X.element=function(){return a(M.el)},X.settings=Z)}(jQuery,document,window),function(a){function b(b,c){a.each(b.attributes,function(){var d=this.name;-1==a.inArray(d,c)&&a(b).removeAttr(d)})}function c(c,d){d=d||{font:["color","size"],span:["class"],b:[],br:[],h1:[],h2:[],h3:[]};var e=a("<div>"+c+"</div>");return e.find("*").each(function(){var c=d[this.nodeName.toLowerCase()];c?b(this,c):a(this).remove()}),e.html()}window.sanitize=c}(jQuery),function(a){function b(b){var c=b.replace(/</g,function(){return"&lt;"}).replace(/>/g,function(){return"&gt;"});return c=c.split("\n"),a.each(c,function(a,b){var d="code-out-pre ";0==a&&(d+="code-out-pre-top "),a==c.length-1&&(d+="code-out-pre-bottom "),c[a]='<span class="'+d+'">'+b+"</span>"}),c.join("\n")}function c(a){var b=a.replace(/((https?|ftp)(:\/\/[-_.!~*\'()a-zA-Z0-9;\/?:\@&=+\$,%#]+))/g,function(){var a=arguments[1];return a.match(/(\.jpg|\.JPG|\.gif|\.GIF|\.png|\.PNG|\.bmp|\.BMP)$/)?a:'<a href="'+a+'" target="_blank" >'+a+"</a>"});return b}function d(a){var b=a.replace(/(\/uploads\/(\S+))/g,function(){var a=arguments[1],b=arguments[2];return a.match(/(\.jpg|\.JPG|\.gif|\.GIF|\.png|\.PNG|\.bmp|\.BMP|\.xap)$/)?a:'<a href="'+a+'" class="btn btn-default btn-mini" ><i class="icon-download-alt"></i>'+b+"</a>"});return b}function e(a,b){var c=a.replace(/((\S+?(\.jpg|\.JPG|\.gif|\.GIF|\.png|\.PNG|\.bmp|\.BMP))($|\s([0-9]+)|\s))/g,function(){var a=arguments[2],c=arguments[5];return""!=c&&isFinite(c)||(c=b),c?'<a href="'+a+'" class="thumbnail"><img src="'+a+'" style="height:'+c+'px"/></a>':'<a href="'+a+'" target="_blank" class="thumbnail" style="display: inline-block;"><img src="'+a+'"/></a>'});return c}function f(a,b,c){var d=a.replace(/((\S+?(\.xap))($|\s([0-9]+)\s([0-9]+)|\s))/g,function(){var a=arguments[2],d=arguments[5],e=arguments[6];return""!=d&&isFinite(d)||(d=b),""!=e&&isFinite(e)||(e=c),'<object data="data:application/x-silverlight-2," type="application/x-silverlight-2" width="'+d+'" height="'+e+'">  <param name="source" value="'+a+'"/>  <param name="onError" value="onSilverlightError" />  <param name="background" value="white" />  <param name="minRuntimeVersion" value="5.0.61118.0" />  <param name="autoUpgrade" value="true" />  <a href="http://go.microsoft.com/fwlink/?LinkID=149156&v=5.0.61118.0" style="text-decoration:none">    <img src="http://go.microsoft.com/fwlink/?LinkId=161376" alt="Microsoft Silverlight の取得" style="border-style:none"/>  </a></object>'});return d}function g(a){var b=0,c=a.replace(k,function(){var a=arguments[0];return a.indexOf("x")>0?'<input type="checkbox" data-no="'+b++ +'" checked />':'<input type="checkbox" data-no="'+b++ +'" />'});return c}function h(a){var b=a.replace(/^(#+)[ ]*(.*)$/gm,function(){var a=arguments[1].length<4?arguments[1].length:4,b=arguments[2];return"<h"+a+">"+j(b)+"</h"+a+">"});return b}function j(a){var b=a.replace(/^(.+)[ 　]#([a-z]+)$/gm,function(){var a=arguments[1],b=arguments[2];return"r"==b&&(b="red"),"g"==b&&(b="green"),"b"==b&&(b="blue"),'<font color="'+b+'">'+a+"</font>"});return b}var k=/-[ ]?\[[ ]?\]|-[ ]?\[x\]/g,l="-[x]",m="-[ ]";a.fn.decora=function(b){function c(a,b,c){var d=0;return c.replace(k,function(){var c=arguments[0],e=d++;return a==e?b?l:m:c})}var d={checkbox_callback:function(){}},b=a.extend(d,b);return Function.prototype.method=function(a,b){return this.prototype[a]=b,this},Function.method("curry",function(){var a=Array.prototype.slice,b=a.apply(arguments),c=this;return function(){return c.apply(null,b.concat(a.apply(arguments)))}}),a(this).on("click",":checkbox",function(){var d=a(this).data("no"),e=a(this).attr("checked")?!0:!1,f=this;b.checkbox_callback(f,c.curry(d,e))}),this},a.decora={to_html:function(a){var k=a.split("```");for(i=0;i<k.length;i++)if(i%2==0){var l=sanitize(k[i]);l=c(l),l=d(l),l=e(l,200),l=f(l,200,200),l=g(l),l=h(l),l=j(l),k[i]=l}else k[i]=b(k[i]);return k.join("")},message_to_html:function(a){return a=sanitize(a),a=a.replace(/(^|\s+)+(SUCCESS|OK|YES)($|\s)+/,function(){return' <span class="label label-success">'+arguments[2]+"</span> "}),a=a.replace(/(^|\s+)+(FAILURE|NG|NO)($|\s)+/,function(){return' <span class="label label-important">'+arguments[1]+"</span> "}),a=a.replace(/[\(（](笑|爆|喜|嬉|楽|驚|泣|涙|悲|怒|厳|辛|苦|閃|汗|忙|急|輝)[\)）]/g,function(){return'<span class="emo">'+arguments[1]+"</span>"}),a=c(a),a=d(a),a=e(a,50),a=j(a)}}}(jQuery),function(a){String.prototype.getLinefromCount=function(a){var b=/\r\n|\r/g,c=this.slice(0,a),d=c.match(b);d&&(c=c.replace(b,"\n"));var e=c.split("\n");return e.length},String.prototype.getCountfromLine=function(a){var b=0;for(i=0;a>i;i++)b=this.indexOf("\n",b)+1;return b};var b=function(a){var b=this.get(0);return null==a?c(b):(d(b,a),this)},c=function(a){return a.selectionStart||"0"==a.selectionStart?start=a.selectionStart:document.selection&&(start=getSelectionCount(a)[0]),isNaN(start)?void 0:a.value.getLinefromCount(start)},d=function(a,b){var c=a.value.getCountfromLine(b);if(a.setSelectionRange)a.setSelectionRange(c,c);else if(a.createTextRange){var d=a.createTextRange();d.collapse(!0),d.moveEnd("character",c),d.moveStart("character",c),d.select()}};a.fn.extend({caretLine:b})}(jQuery),function(a,b,c){function d(a,b){return this instanceof d?this.init(a,b):new d(a,b)}function e(a,b){return a.changedTouches?a.changedTouches[0][b]:a[b]}function f(a){return j(a,function(a){return m.style[a]!==c})}function g(a,b,d){var e=o[b];e?a[e]=d:a[b]!==c?(o[b]=b,a[b]=d):j(n,function(e){var f=i(e)+i(b);return a[f]!==c?(o[b]=f,a[f]=d,!0):void 0})}function h(a){if(m.style[a]!==c)return a;var b;return j(n,function(d){var e=i(d)+i(a);return m.style[e]!==c?(b="-"+d+"-"+a,!0):void 0}),b}function i(a){return a.charAt(0).toUpperCase()+a.substr(1)}function j(a,b){for(var c=0,d=a.length;d>c;c++)if(b(a[c],c))return!0;return!1}function k(a,b,c,d){var e=Math.abs(a-c),f=Math.abs(b-d),g=Math.sqrt(Math.pow(e,2)+Math.pow(f,2));return{x:e,y:f,z:g}}function l(a){var b=a.y/a.z,c=Math.acos(b);return 180/(Math.PI/c)}var m=b.createElement("div"),n=["webkit","moz","o","ms"],o={},p=d.support={},q=!1,r=5,s=55;p.transform3d=f(["perspectiveProperty","WebkitPerspective","MozPerspective","OPerspective","msPerspective"]),p.transform=f(["transformProperty","WebkitTransform","MozTransform","OTransform","msTransform"]),p.transition=f(["transitionProperty","WebkitTransitionProperty","MozTransitionProperty","OTransitionProperty","msTransitionProperty"]),p.addEventListener="addEventListener"in a,p.mspointer=a.navigator.msPointerEnabled,p.cssAnimation=(p.transform3d||p.transform)&&p.transition;var t=["touch","mouse"],u={start:{touch:"touchstart",mouse:"mousedown"},move:{touch:"touchmove",mouse:"mousemove"},end:{touch:"touchend",mouse:"mouseup"}};p.addEventListener&&(b.addEventListener("gesturestart",function(){q=!0}),b.addEventListener("gestureend",function(){q=!1})),d.prototype.init=function(a,d){var e=this;if(e.element=a,"string"==typeof a&&(e.element=b.querySelector(a)),!e.element)throw new Error("element not found");return p.mspointer&&(e.element.style.msTouchAction="pan-y"),d=d||{},e.distance=d.distance,e.maxPoint=d.maxPoint,e.disableTouch=d.disableTouch===c?!1:d.disableTouch,e.disable3d=d.disable3d===c?!1:d.disable3d,e.transitionDuration=d.transitionDuration===c?"350ms":d.transitionDuration+"ms",e.currentPoint=0,e.currentX=0,e.animation=!1,e.use3d=p.transform3d,e.disable3d===!0&&(e.use3d=!1),e._setStyle(p.cssAnimation?{transitionProperty:h("transform"),transitionTimingFunction:"cubic-bezier(0,0,0.25,1)",transitionDuration:"0ms",transform:e._getTranslate(0)}:{position:"relative",left:"0px"}),e.refresh(),t.forEach(function(a){e.element.addEventListener(u.start[a],e,!1)}),e},d.prototype.handleEvent=function(a){var b=this;switch(a.type){case u.start.touch:b._touchStart(a,"touch");break;case u.start.mouse:b._touchStart(a,"mouse");break;case u.move.touch:b._touchMove(a,"touch");break;case u.move.mouse:b._touchMove(a,"mouse");break;case u.end.touch:b._touchEnd(a,"touch");break;case u.end.mouse:b._touchEnd(a,"mouse");break;case"click":b._click(a)}},d.prototype.refresh=function(){var a=this;a._maxPoint=a.maxPoint===c?function(){for(var b,c=a.element.childNodes,d=-1,e=0,f=c.length;f>e;e++)b=c[e],1===b.nodeType&&d++;return d}():a.maxPoint,a._distance=a.distance===c?a._maxPoint<0?0:a.element.scrollWidth/(a._maxPoint+1):a.distance,a._maxX=-a._distance*a._maxPoint,a.moveToPoint()},d.prototype.hasNext=function(){var a=this;return a.currentPoint<a._maxPoint},d.prototype.hasPrev=function(){var a=this;return a.currentPoint>0},d.prototype.toNext=function(a){var b=this;b.hasNext()&&b.moveToPoint(b.currentPoint+1,a)},d.prototype.toPrev=function(a){var b=this;b.hasPrev()&&b.moveToPoint(b.currentPoint-1,a)},d.prototype.moveToPoint=function(a,b){var d=this;b=b===c?d.transitionDuration:b+"ms";var e=d.currentPoint;a===c&&(a=d.currentPoint),d.currentPoint=0>a?0:a>d._maxPoint?d._maxPoint:parseInt(a,10),p.cssAnimation?d._setStyle({transitionDuration:b}):d.animation=!0,d._setX(-d.currentPoint*d._distance,b),e!==d.currentPoint&&(d._triggerEvent("fsmoveend",!0,!1),d._triggerEvent("fspointmove",!0,!1))},d.prototype._setX=function(a,b){var c=this;c.currentX=a,p.cssAnimation?c.element.style[o.transform]=c._getTranslate(a):c.animation?c._animate(a,b||c.transitionDuration):c.element.style.left=a+"px"},d.prototype._touchStart=function(a,c){var d=this;if(!(d.disableTouch||d.scrolling||q)){d.element.addEventListener(u.move[c],d,!1),b.addEventListener(u.end[c],d,!1);var f=a.target.tagName;"mouse"===c&&"SELECT"!==f&&"INPUT"!==f&&"TEXTAREA"!==f&&"BUTTON"!==f&&a.preventDefault(),p.cssAnimation?d._setStyle({transitionDuration:"0ms"}):d.animation=!1,d.scrolling=!0,d.moveReady=!1,d.startPageX=e(a,"pageX"),d.startPageY=e(a,"pageY"),d.basePageX=d.startPageX,d.directionX=0,d.startTime=a.timeStamp,d._triggerEvent("fstouchstart",!0,!1)}},d.prototype._touchMove=function(a){var b=this;if(b.scrolling&&!q){var c,d,f=e(a,"pageX"),g=e(a,"pageY");if(b.moveReady){a.preventDefault(),c=f-b.basePageX,d=b.currentX+c,(d>=0||d<b._maxX)&&(d=Math.round(b.currentX+c/3)),b.directionX=0===c?b.directionX:c>0?-1:1;var h=!b._triggerEvent("fstouchmove",!0,!0,{delta:c,direction:b.directionX});h?b._touchAfter({moved:!1,originalPoint:b.currentPoint,newPoint:b.currentPoint,cancelled:!0}):b._setX(d)}else{var i=k(b.startPageX,b.startPageY,f,g);i.z>r&&(l(i)>s?(a.preventDefault(),b.moveReady=!0,b.element.addEventListener("click",b,!0)):b.scrolling=!1)}b.basePageX=f}},d.prototype._touchEnd=function(a,c){var d=this;if(d.element.removeEventListener(u.move[c],d,!1),b.removeEventListener(u.end[c],d,!1),d.scrolling){var e=-d.currentX/d._distance;e=d.directionX>0?Math.ceil(e):d.directionX<0?Math.floor(e):Math.round(e),0>e?e=0:e>d._maxPoint&&(e=d._maxPoint),d._touchAfter({moved:e!==d.currentPoint,originalPoint:d.currentPoint,newPoint:e,cancelled:!1}),d.moveToPoint(e)}},d.prototype._click=function(a){a.stopPropagation(),a.preventDefault()},d.prototype._touchAfter=function(a){var b=this;b.scrolling=!1,b.moveReady=!1,setTimeout(function(){b.element.removeEventListener("click",b,!0)},200),b._triggerEvent("fstouchend",!0,!1,a)},d.prototype._setStyle=function(a){var b=this,c=b.element.style;for(var d in a)g(c,d,a[d])},d.prototype._animate=function(a,b){var c=this,d=c.element,e=+new Date,f=parseInt(d.style.left,10),g=a,h=parseInt(b,10),i=function(a,b){return-(a/=b)*(a-2)},j=setInterval(function(){var a,b,c=new Date-e;c>h?(clearInterval(j),b=g):(a=i(c,h),b=a*(g-f)+f),d.style.left=b+"px"},10)},d.prototype.destroy=function(){var a=this;t.forEach(function(b){a.element.removeEventListener(u.start[b],a,!1)})},d.prototype._getTranslate=function(a){var b=this;return b.use3d?"translate3d("+a+"px, 0, 0)":"translate("+a+"px, 0)"},d.prototype._triggerEvent=function(a,c,d,e){var f=this,g=b.createEvent("Event");if(g.initEvent(a,c,d),e)for(var h in e)e.hasOwnProperty(h)&&(g[h]=e[h]);return f.element.dispatchEvent(g)},"object"==typeof exports?module.exports=d:"function"==typeof define&&define.amd?define(function(){return d}):a.Flipsnap=d}(window,window.document),function(a){function b(a,b){return function(c){return i(a.call(this,c),b)}}function c(a,b){return function(c){return this.lang().ordinal(a.call(this,c),b)}}function d(){}function e(a){g(this,a)}function f(a){var b=a.years||a.year||a.y||0,c=a.months||a.month||a.M||0,d=a.weeks||a.week||a.w||0,e=a.days||a.day||a.d||0,f=a.hours||a.hour||a.h||0,g=a.minutes||a.minute||a.m||0,h=a.seconds||a.second||a.s||0,i=a.milliseconds||a.millisecond||a.ms||0;this._input=a,this._milliseconds=+i+1e3*h+6e4*g+36e5*f,this._days=+e+7*d,this._months=+c+12*b,this._data={},this._bubble()}function g(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function h(a){return 0>a?Math.ceil(a):Math.floor(a)}function i(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c}function j(a,b,c,d){var e,f,g=b._milliseconds,h=b._days,i=b._months;g&&a._d.setTime(+a._d+g*c),(h||i)&&(e=a.minute(),f=a.hour()),h&&a.date(a.date()+h*c),i&&a.month(a.month()+i*c),g&&!d&&L.updateOffset(a),(h||i)&&(a.minute(e),a.hour(f))}function k(a){return"[object Array]"===Object.prototype.toString.call(a)}function l(a,b){var c,d=Math.min(a.length,b.length),e=Math.abs(a.length-b.length),f=0;for(c=0;d>c;c++)~~a[c]!==~~b[c]&&f++;return f+e}function m(a){return a?ib[a]||a.toLowerCase().replace(/(.)s$/,"$1"):a}function n(a,b){return b.abbr=a,P[a]||(P[a]=new d),P[a].set(b),P[a]}function o(a){delete P[a]}function p(a){if(!a)return L.fn._lang;if(!P[a]&&Q)try{require("./lang/"+a)}catch(b){return L.fn._lang}return P[a]||L.fn._lang}function q(a){return a.match(/\[.*\]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function r(a){var b,c,d=a.match(T);for(b=0,c=d.length;c>b;b++)d[b]=mb[d[b]]?mb[d[b]]:q(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function s(a,b){return b=t(b,a.lang()),jb[b]||(jb[b]=r(b)),jb[b](a)}function t(a,b){function c(a){return b.longDateFormat(a)||a}for(var d=5;d--&&(U.lastIndex=0,U.test(a));)a=a.replace(U,c);return a}function u(a,b){switch(a){case"DDDD":return X;case"YYYY":return Y;case"YYYYY":return Z;case"S":case"SS":case"SSS":case"DDD":return W;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return $;case"a":case"A":return p(b._l)._meridiemParse;case"X":return bb;case"Z":case"ZZ":return _;case"T":return ab;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return V;default:return new RegExp(a.replace("\\",""))}}function v(a){var b=(_.exec(a)||[])[0],c=(b+"").match(fb)||["-",0,0],d=+(60*c[1])+~~c[2];return"+"===c[0]?-d:d}function w(a,b,c){var d,e=c._a;
switch(a){case"M":case"MM":null!=b&&(e[1]=~~b-1);break;case"MMM":case"MMMM":d=p(c._l).monthsParse(b),null!=d?e[1]=d:c._isValid=!1;break;case"D":case"DD":null!=b&&(e[2]=~~b);break;case"DDD":case"DDDD":null!=b&&(e[1]=0,e[2]=~~b);break;case"YY":e[0]=~~b+(~~b>68?1900:2e3);break;case"YYYY":case"YYYYY":e[0]=~~b;break;case"a":case"A":c._isPm=p(c._l).isPM(b);break;case"H":case"HH":case"h":case"hh":e[3]=~~b;break;case"m":case"mm":e[4]=~~b;break;case"s":case"ss":e[5]=~~b;break;case"S":case"SS":case"SSS":e[6]=~~(1e3*("0."+b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=v(b)}null==b&&(c._isValid=!1)}function x(a){var b,c,d,e=[];if(!a._d){for(d=z(a),b=0;3>b&&null==a._a[b];++b)a._a[b]=e[b]=d[b];for(;7>b;b++)a._a[b]=e[b]=null==a._a[b]?2===b?1:0:a._a[b];e[3]+=~~((a._tzm||0)/60),e[4]+=~~((a._tzm||0)%60),c=new Date(0),a._useUTC?(c.setUTCFullYear(e[0],e[1],e[2]),c.setUTCHours(e[3],e[4],e[5],e[6])):(c.setFullYear(e[0],e[1],e[2]),c.setHours(e[3],e[4],e[5],e[6])),a._d=c}}function y(a){var b=a._i;a._d||(a._a=[b.years||b.year||b.y,b.months||b.month||b.M,b.days||b.day||b.d,b.hours||b.hour||b.h,b.minutes||b.minute||b.m,b.seconds||b.second||b.s,b.milliseconds||b.millisecond||b.ms],x(a))}function z(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function A(a){var b,c,d,e=p(a._l),f=""+a._i;for(d=t(a._f,e).match(T),a._a=[],b=0;b<d.length;b++)c=(u(d[b],a).exec(f)||[])[0],c&&(f=f.slice(f.indexOf(c)+c.length)),mb[d[b]]&&w(d[b],c,a);f&&(a._il=f),a._isPm&&a._a[3]<12&&(a._a[3]+=12),a._isPm===!1&&12===a._a[3]&&(a._a[3]=0),x(a)}function B(a){var b,c,d,f,h,i=99;for(f=0;f<a._f.length;f++)b=g({},a),b._f=a._f[f],A(b),c=new e(b),h=l(b._a,c.toArray()),c._il&&(h+=c._il.length),i>h&&(i=h,d=c);g(a,d)}function C(a){var b,c=a._i,d=cb.exec(c);if(d){for(a._f="YYYY-MM-DD"+(d[2]||" "),b=0;4>b;b++)if(eb[b][1].exec(c)){a._f+=eb[b][0];break}_.exec(c)&&(a._f+=" Z"),A(a)}else a._d=new Date(c)}function D(b){var c=b._i,d=R.exec(c);c===a?b._d=new Date:d?b._d=new Date(+d[1]):"string"==typeof c?C(b):k(c)?(b._a=c.slice(0),x(b)):c instanceof Date?b._d=new Date(+c):"object"==typeof c?y(b):b._d=new Date(c)}function E(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function F(a,b,c){var d=O(Math.abs(a)/1e3),e=O(d/60),f=O(e/60),g=O(f/24),h=O(g/365),i=45>d&&["s",d]||1===e&&["m"]||45>e&&["mm",e]||1===f&&["h"]||22>f&&["hh",f]||1===g&&["d"]||25>=g&&["dd",g]||45>=g&&["M"]||345>g&&["MM",O(g/30)]||1===h&&["y"]||["yy",h];return i[2]=b,i[3]=a>0,i[4]=c,E.apply({},i)}function G(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=L(a).add("d",f),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function H(a){var b=a._i,c=a._f;return null===b||""===b?null:("string"==typeof b&&(a._i=b=p().preparse(b)),L.isMoment(b)?(a=g({},b),a._d=new Date(+b._d)):c?k(c)?B(a):A(a):D(a),new e(a))}function I(a,b){L.fn[a]=L.fn[a+"s"]=function(a){var c=this._isUTC?"UTC":"";return null!=a?(this._d["set"+c+b](a),L.updateOffset(this),this):this._d["get"+c+b]()}}function J(a){L.duration.fn[a]=function(){return this._data[a]}}function K(a,b){L.duration.fn["as"+a]=function(){return+this/b}}for(var L,M,N="2.2.1",O=Math.round,P={},Q="undefined"!=typeof module&&module.exports,R=/^\/?Date\((\-?\d+)/i,S=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)\:(\d+)\.?(\d{3})?/,T=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,U=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,V=/\d\d?/,W=/\d{1,3}/,X=/\d{3}/,Y=/\d{1,4}/,Z=/[+\-]?\d{1,6}/,$=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,_=/Z|[\+\-]\d\d:?\d\d/i,ab=/T/i,bb=/[\+\-]?\d+(\.\d{1,3})?/,cb=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,db="YYYY-MM-DDTHH:mm:ssZ",eb=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],fb=/([\+\-]|\d\d)/gi,gb="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),hb={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},ib={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",w:"week",W:"isoweek",M:"month",y:"year"},jb={},kb="DDD w W M D d".split(" "),lb="M D H h m s w W".split(" "),mb={M:function(){return this.month()+1},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return i(this.year()%100,2)},YYYY:function(){return i(this.year(),4)},YYYYY:function(){return i(this.year(),5)},gg:function(){return i(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return i(this.weekYear(),5)},GG:function(){return i(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return i(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return i(~~(this.milliseconds()/10),2)},SSS:function(){return i(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+i(~~(a/60),2)+":"+i(~~a%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+i(~~(10*a/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}};kb.length;)M=kb.pop(),mb[M+"o"]=c(mb[M],M);for(;lb.length;)M=lb.pop(),mb[M+M]=b(mb[M],2);for(mb.DDDD=b(mb.DDD,3),g(d.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c,d;for(this._monthsParse||(this._monthsParse=[]),b=0;12>b;b++)if(this._monthsParse[b]||(c=L.utc([2e3,b]),d="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=new RegExp(d.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=L([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"==typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return G(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6}}),L=function(a,b,c){return H({_i:a,_f:b,_l:c,_isUTC:!1})},L.utc=function(a,b,c){return H({_useUTC:!0,_isUTC:!0,_l:c,_i:a,_f:b}).utc()},L.unix=function(a){return L(1e3*a)},L.duration=function(a,b){var c,d,e=L.isDuration(a),g="number"==typeof a,h=e?a._input:g?{}:a,i=S.exec(a);return g?b?h[b]=a:h.milliseconds=a:i&&(c="-"===i[1]?-1:1,h={y:0,d:~~i[2]*c,h:~~i[3]*c,m:~~i[4]*c,s:~~i[5]*c,ms:~~i[6]*c}),d=new f(h),e&&a.hasOwnProperty("_lang")&&(d._lang=a._lang),d},L.version=N,L.defaultFormat=db,L.updateOffset=function(){},L.lang=function(a,b){return a?(a=a.toLowerCase(),a=a.replace("_","-"),b?n(a,b):null===b?(o(a),a="en"):P[a]||p(a),void(L.duration.fn._lang=L.fn._lang=p(a))):L.fn._lang._abbr},L.langData=function(a){return a&&a._lang&&a._lang._abbr&&(a=a._lang._abbr),p(a)},L.isMoment=function(a){return a instanceof e},L.isDuration=function(a){return a instanceof f},g(L.fn=e.prototype,{clone:function(){return L(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return s(L(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return null==this._isValid&&(this._isValid=this._a?!l(this._a,(this._isUTC?L.utc(this._a):L(this._a)).toArray()):!isNaN(this._d.getTime())),!!this._isValid},invalidAt:function(){var a,b=this._a,c=(this._isUTC?L.utc(this._a):L(this._a)).toArray();for(a=6;a>=0&&b[a]===c[a];--a);return a},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(a){var b=s(this,a||L.defaultFormat);return this.lang().postformat(b)},add:function(a,b){var c;return c="string"==typeof a?L.duration(+b,a):L.duration(a,b),j(this,c,1),this},subtract:function(a,b){var c;return c="string"==typeof a?L.duration(+b,a):L.duration(a,b),j(this,c,-1),this},diff:function(a,b,c){var d,e,f=this._isUTC?L(a).zone(this._offset||0):L(a).local(),g=6e4*(this.zone()-f.zone());return b=m(b),"year"===b||"month"===b?(d=432e5*(this.daysInMonth()+f.daysInMonth()),e=12*(this.year()-f.year())+(this.month()-f.month()),e+=(this-L(this).startOf("month")-(f-L(f).startOf("month")))/d,e-=6e4*(this.zone()-L(this).startOf("month").zone()-(f.zone()-L(f).startOf("month").zone()))/d,"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:h(e)},from:function(a,b){return L.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b)},fromNow:function(a){return this.from(L(),a)},calendar:function(){var a=this.diff(L().zone(this.zone()).startOf("day"),"days",!0),b=-6>a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse";return this.format(this.lang().calendar(b,this))},isLeapYear:function(){var a=this.year();return 0===a%4&&0!==a%100||0===a%400},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?"string"==typeof a&&(a=this.lang().weekdaysParse(a),"number"!=typeof a)?this:this.add({d:a-b}):b},month:function(a){var b,c=this._isUTC?"UTC":"";return null!=a?"string"==typeof a&&(a=this.lang().monthsParse(a),"number"!=typeof a)?this:(b=this.date(),this.date(1),this._d["set"+c+"Month"](a),this.date(Math.min(b,this.daysInMonth())),L.updateOffset(this),this):this._d["get"+c+"Month"]()},startOf:function(a){switch(a=m(a)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoweek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a?this.weekday(0):"isoweek"===a&&this.isoWeekday(1),this},endOf:function(a){return a=m(a),this.startOf(a).add("isoweek"===a?"week":a,1).subtract("ms",1)},isAfter:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)>+L(a).startOf(b)},isBefore:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)<+L(a).startOf(b)},isSame:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)===+L(a).startOf(b)},min:function(a){return a=L.apply(null,arguments),this>a?this:a},max:function(a){return a=L.apply(null,arguments),a>this?this:a},zone:function(a){var b=this._offset||0;return null==a?this._isUTC?b:this._d.getTimezoneOffset():("string"==typeof a&&(a=v(a)),Math.abs(a)<16&&(a=60*a),this._offset=a,this._isUTC=!0,b!==a&&j(this,L.duration(b-a,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},hasAlignedHourOffset:function(a){return a=a?L(a).zone():0,0===(this.zone()-a)%60},daysInMonth:function(){return L.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(a){var b=O((L(this).startOf("day")-L(this).startOf("year"))/864e5)+1;return null==a?b:this.add("d",a-b)},weekYear:function(a){var b=G(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==a?b:this.add("y",a-b)},isoWeekYear:function(a){var b=G(this,1,4).year;return null==a?b:this.add("y",a-b)},week:function(a){var b=this.lang().week(this);return null==a?b:this.add("d",7*(a-b))},isoWeek:function(a){var b=G(this,1,4).week;return null==a?b:this.add("d",7*(a-b))},weekday:function(a){var b=(this._d.getDay()+7-this.lang()._week.dow)%7;return null==a?b:this.add("d",a-b)},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},get:function(a){return a=m(a),this[a.toLowerCase()]()},set:function(a,b){a=m(a),this[a.toLowerCase()](b)},lang:function(b){return b===a?this._lang:(this._lang=p(b),this)}}),M=0;M<gb.length;M++)I(gb[M].toLowerCase().replace(/s$/,""),gb[M]);I("year","FullYear"),L.fn.days=L.fn.day,L.fn.months=L.fn.month,L.fn.weeks=L.fn.week,L.fn.isoWeeks=L.fn.isoWeek,L.fn.toJSON=L.fn.toISOString,g(L.duration.fn=f.prototype,{_bubble:function(){var a,b,c,d,e=this._milliseconds,f=this._days,g=this._months,i=this._data;i.milliseconds=e%1e3,a=h(e/1e3),i.seconds=a%60,b=h(a/60),i.minutes=b%60,c=h(b/60),i.hours=c%24,f+=h(c/24),i.days=f%30,g+=h(f/30),i.months=g%12,d=h(g/12),i.years=d},weeks:function(){return h(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*(this._months%12)+31536e6*~~(this._months/12)},humanize:function(a){var b=+this,c=F(b,!a,this.lang());return a&&(c=this.lang().pastFuture(b,c)),this.lang().postformat(c)},add:function(a,b){var c=L.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this},subtract:function(a,b){var c=L.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this},get:function(a){return a=m(a),this[a.toLowerCase()+"s"]()},as:function(a){return a=m(a),this["as"+a.charAt(0).toUpperCase()+a.slice(1)+"s"]()},lang:L.fn.lang});for(M in hb)hb.hasOwnProperty(M)&&(K(M,hb[M]),J(M.toLowerCase()));K("Weeks",6048e5),L.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},L.lang("en",{ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),Q&&(module.exports=L),"undefined"==typeof ender&&(this.moment=L),"function"==typeof define&&define.amd&&define("moment",[],function(){return L})}.call(this),moment.lang("ja",{months:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日".split("_"),weekdaysShort:"（日）_（月）_（火）_（水）_（木）_（金）_（土）".split("_"),weekdaysMin:"日_月_火_水_木_金_土".split("_"),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"%s後",past:"%s前",s:"<font color=red>ちょっと</font>",m:"<font color=red>約1分</font>",mm:"<font color=red>%d分</font>",h:"<font color=red>約1時間</font>",hh:"<font color=orange>%d時間</font>",d:"1日",dd:"%d日",M:"1ヶ月",MM:"%dヶ月",y:"1年",yy:"%d年"},ordinal:function(a){var b=a%10;return 1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th"}}),function(a,b){var c=1e3,d=!1,e=a([]),f=function(c,d){var f=c.data("livestampdata");"number"==typeof d&&(d*=1e3),c.removeAttr("data-livestamp").removeData("livestamp"),d=b(d),b.isMoment(d)&&!isNaN(+d)&&(f=a.extend({},{original:c.contents()},f),f.moment=b(d),c.data("livestampdata",f).empty(),e.push(c[0]))},g=function(){d||(h.update(),setTimeout(g,c))},h={update:function(){a("[data-livestamp]").each(function(){var b=a(this);f(b,b.data("livestamp"))});var c=[];e.each(function(){var d=a(this),e=d.data("livestampdata");if(void 0===e)c.push(this);else if(b.isMoment(e.moment)){var f=d.html(),e=e.moment.fromNow();if(f!=e){var g=a.Event("change.livestamp");d.trigger(g,[f,e]),g.isDefaultPrevented()||d.html(e)}}}),e=e.not(c)},pause:function(){d=!0},resume:function(){d=!1,g()},interval:function(a){return void 0===a?c:void(c=a)}},i={add:function(c,d){return"number"==typeof d&&(d*=1e3),d=b(d),b.isMoment(d)&&!isNaN(+d)&&(c.each(function(){f(a(this),d)}),h.update()),c},destroy:function(b){return e=e.not(b),b.each(function(){var c=a(this),d=c.data("livestampdata");return void 0===d?b:void c.html(d.original?d.original:"").removeData("livestampdata")}),b},isLivestamp:function(a){return void 0!==a.data("livestampdata")}};a.livestamp=h,a(function(){h.resume()}),a.fn.livestamp=function(a,b){return i[a]||(b=a,a="add"),i[a](this,b)}}(jQuery,moment),__whitespace={" ":!0,"	":!0,"\n":!0,"\f":!0,"\r":!0},difflib={defaultJunkFunction:function(a){return __whitespace.hasOwnProperty(a)},stripLinebreaks:function(a){return a.replace(/^[\n\r]*|[\n\r]*$/g,"")},stringAsLines:function(a){for(var b=a.indexOf("\n"),c=a.indexOf("\r"),d=b>-1&&c>-1||0>c?"\n":"\r",e=a.split(d),f=0;f<e.length;f++)e[f]=difflib.stripLinebreaks(e[f]);return e},__reduce:function(a,b,c){if(null!=c)var d=c,e=0;else{if(!b)return null;var d=b[0],e=1}for(;e<b.length;e++)d=a(d,b[e]);return d},__ntuplecomp:function(a,b){for(var c=Math.max(a.length,b.length),d=0;c>d;d++){if(a[d]<b[d])return-1;if(a[d]>b[d])return 1}return a.length==b.length?0:a.length<b.length?-1:1},__calculate_ratio:function(a,b){return b?2*a/b:1},__isindict:function(a){return function(b){return a.hasOwnProperty(b)}},__dictget:function(a,b,c){return a.hasOwnProperty(b)?a[b]:c},SequenceMatcher:function(a,b,c){this.set_seqs=function(a,b){this.set_seq1(a),this.set_seq2(b)},this.set_seq1=function(a){a!=this.a&&(this.a=a,this.matching_blocks=this.opcodes=null)},this.set_seq2=function(a){a!=this.b&&(this.b=a,this.matching_blocks=this.opcodes=this.fullbcount=null,this.__chain_b())},this.__chain_b=function(){for(var a=this.b,b=a.length,c=this.b2j={},d={},e=0;e<a.length;e++){var f=a[e];if(c.hasOwnProperty(f)){var g=c[f];b>=200&&100*g.length>b?(d[f]=1,delete c[f]):g.push(e)}else c[f]=[e]}for(var f in d)d.hasOwnProperty(f)&&delete c[f];var h=this.isjunk,i={};if(h){for(var f in d)d.hasOwnProperty(f)&&h(f)&&(i[f]=1,delete d[f]);for(var f in c)c.hasOwnProperty(f)&&h(f)&&(i[f]=1,delete c[f])}this.isbjunk=difflib.__isindict(i),this.isbpopular=difflib.__isindict(d)},this.find_longest_match=function(a,b,c,d){for(var e=this.a,f=this.b,g=this.b2j,h=this.isbjunk,i=a,j=c,l=0,m=null,n={},o=[],p=a;b>p;p++){var q={},r=difflib.__dictget(g,e[p],o);for(var s in r)if(r.hasOwnProperty(s)){if(m=r[s],c>m)continue;if(m>=d)break;q[m]=k=difflib.__dictget(n,m-1,0)+1,k>l&&(i=p-k+1,j=m-k+1,l=k)}n=q}for(;i>a&&j>c&&!h(f[j-1])&&e[i-1]==f[j-1];)i--,j--,l++;for(;b>i+l&&d>j+l&&!h(f[j+l])&&e[i+l]==f[j+l];)l++;for(;i>a&&j>c&&h(f[j-1])&&e[i-1]==f[j-1];)i--,j--,l++;for(;b>i+l&&d>j+l&&h(f[j+l])&&e[i+l]==f[j+l];)l++;return[i,j,l]},this.get_matching_blocks=function(){if(null!=this.matching_blocks)return this.matching_blocks;for(var a,b,c,d,e,f,g,h,i,j=this.a.length,k=this.b.length,l=[[0,j,0,k]],m=[];l.length;)e=l.pop(),a=e[0],b=e[1],c=e[2],d=e[3],i=this.find_longest_match(a,b,c,d),f=i[0],g=i[1],h=i[2],h&&(m.push(i),f>a&&g>c&&l.push([a,f,c,g]),b>f+h&&d>g+h&&l.push([f+h,b,g+h,d]));m.sort(difflib.__ntuplecomp);var n=j1=k1=block=0,o=[];for(var p in m)m.hasOwnProperty(p)&&(block=m[p],i2=block[0],j2=block[1],k2=block[2],n+k1==i2&&j1+k1==j2?k1+=k2:(k1&&o.push([n,j1,k1]),n=i2,j1=j2,k1=k2));return k1&&o.push([n,j1,k1]),o.push([j,k,0]),this.matching_blocks=o,this.matching_blocks},this.get_opcodes=function(){if(null!=this.opcodes)return this.opcodes;var a=0,b=0,c=[];this.opcodes=c;var d,e,f,g,h,i=this.get_matching_blocks();for(var j in i)i.hasOwnProperty(j)&&(d=i[j],e=d[0],f=d[1],g=d[2],h="",e>a&&f>b?h="replace":e>a?h="delete":f>b&&(h="insert"),h&&c.push([h,a,e,b,f]),a=e+g,b=f+g,g&&c.push(["equal",e,a,f,b]));return c},this.get_grouped_opcodes=function(a){a||(a=3);var b=this.get_opcodes();b||(b=[["equal",0,1,0,1]]);var c,d,e,f,g,h;"equal"==b[0][0]&&(c=b[0],d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],b[0]=[d,Math.max(e,f-a),f,Math.max(g,h-a),h]),"equal"==b[b.length-1][0]&&(c=b[b.length-1],d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],b[b.length-1]=[d,e,Math.min(f,e+a),g,Math.min(h,g+a)]);var i=a+a,j=[],k=[];for(var l in b)b.hasOwnProperty(l)&&(c=b[l],d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],"equal"==d&&f-e>i&&(j.push([d,e,Math.min(f,e+a),g,Math.min(h,g+a)]),k.push(j),j=[],e=Math.max(e,f-a),g=Math.max(g,h-a)),j.push([d,e,f,g,h]));return!j||1==j.length&&"equal"==j[0][0]||k.push(j),k},this.ratio=function(){return matches=difflib.__reduce(function(a,b){return a+b[b.length-1]},this.get_matching_blocks(),0),difflib.__calculate_ratio(matches,this.a.length+this.b.length)},this.quick_ratio=function(){var a,b;if(null==this.fullbcount){this.fullbcount=a={};for(var c=0;c<this.b.length;c++)b=this.b[c],a[b]=difflib.__dictget(a,b,0)+1}a=this.fullbcount;for(var d={},e=difflib.__isindict(d),f=numb=0,c=0;c<this.a.length;c++)b=this.a[c],numb=e(b)?d[b]:difflib.__dictget(a,b,0),d[b]=numb-1,numb>0&&f++;return difflib.__calculate_ratio(f,this.a.length+this.b.length)},this.real_quick_ratio=function(){var a=this.a.length,b=this.b.length;return _calculate_ratio(Math.min(a,b),a+b)},this.isjunk=c?c:difflib.defaultJunkFunction,this.a=this.b=null,this.set_seqs(a,b)}},diffview={buildView:function(a){function b(a,b){var c=document.createElement(a);return c.className=b,c}function c(a,b){var c=document.createElement(a);return c.appendChild(document.createTextNode(b)),c}function d(a,b,c){var d=document.createElement(a);return d.className=b,d.appendChild(document.createTextNode(c)),d}function e(a,e,f,g,h){return f>e?(a.appendChild(c("th",(e+1).toString())),a.appendChild(d("td",h,g[e].replace(/\t/g,"    "))),e+1):(a.appendChild(document.createElement("th")),a.appendChild(b("td","empty")),e)}function f(a,b,c,e,f){a.appendChild(d("td",f,e[null!=b?b:c].replace(/\t/g,"    ")))}var g=a.baseTextLines,h=a.newTextLines,i=a.opcodes,j=a.baseTextName?a.baseTextName:"Base Text",k=a.newTextName?a.newTextName:"New Text",l=a.contextSize,m=0==a.viewType||1==a.viewType?a.viewType:0;if(null==g)throw"Cannot build diff view; baseTextLines is not defined.";if(null==h)throw"Cannot build diff view; newTextLines is not defined.";if(!i)throw"Canno build diff view; opcodes is not defined.";var n=document.createElement("thead"),o=document.createElement("tr");n.appendChild(o),m?o.appendChild(d("th","texttitle",j+" vs. "+k)):(o.appendChild(document.createElement("th")),o.appendChild(d("th","texttitle",j)),o.appendChild(document.createElement("th")),o.appendChild(d("th","texttitle",k))),n=[n];for(var p,q=[],r=0;r<i.length;r++){code=i[r],change=code[0];for(var s=code[1],t=code[2],u=code[3],v=code[4],w=Math.max(t-s,v-u),x=[],y=[],z=0;w>z;z++){if(l&&i.length>1&&(r>0&&z==l||0==r&&0==z)&&"equal"==change){var A=w-(0==r?1:2)*l;if(A>1){if(x.push(o=document.createElement("tr")),s+=A,u+=A,z+=A-1,o.appendChild(c("th","...")),m||o.appendChild(d("td","skip","")),o.appendChild(c("th","...")),o.appendChild(d("td","skip","")),r+1==i.length)break;continue}}x.push(o=document.createElement("tr")),m?"insert"==change?f(o,null,u++,h,change):"replace"==change?(y.push(p=document.createElement("tr")),t>s&&f(o,s++,null,g,"delete"),v>u&&f(p,null,u++,h,"insert")):"delete"==change?f(o,s++,null,g,change):f(o,s++,u++,g,change):(s=e(o,s,t,g,change),u=e(o,u,v,h,change))}for(var z=0;z<x.length;z++)q.push(x[z]);for(var z=0;z<y.length;z++)q.push(y[z])}n.push(o=document.createElement("tbody"));for(var r in q)q.hasOwnProperty(r)&&o.appendChild(q[r]);o=b("table","diff"+(m?" inlinediff":""));for(var r in n)n.hasOwnProperty(r)&&o.appendChild(n[r]);return o}},!function(){var a=function(a){"use strict";function b(a){if(a.paused||a.ended||q)return!1;try{k.clearRect(0,0,i,h),k.drawImage(a,0,0,i,h)}catch(c){}t=setTimeout(b,F.duration,a),E.setIcon(j)}function c(a){var b=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;a=a.replace(b,function(a,b,c,d){return b+b+c+c+d+d});var c=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return c?{r:parseInt(c[1],16),g:parseInt(c[2],16),b:parseInt(c[3],16)}:!1}function d(a,b){var c,d={};for(c in a)d[c]=a[c];for(c in b)d[c]=b[c];return d}function e(){return document.hidden||document.msHidden||document.webkitHidden||document.mozHidden}a=a?a:{};var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u={bgColor:"#d00",textColor:"#fff",fontFamily:"sans-serif",fontStyle:"bold",type:"circle",position:"down",animation:"slide",elementId:!1};r={},r.ff=/firefox/i.test(navigator.userAgent.toLowerCase()),r.chrome=/chrome/i.test(navigator.userAgent.toLowerCase()),r.opera=/opera/i.test(navigator.userAgent.toLowerCase()),r.ie=/msie/i.test(navigator.userAgent.toLowerCase())||/trident/i.test(navigator.userAgent.toLowerCase()),r.supported=r.chrome||r.ff||r.opera;var v=[];p=function(){},m=q=!1;var w=function(){f=d(u,a),f.bgColor=c(f.bgColor),f.textColor=c(f.textColor),f.position=f.position.toLowerCase(),f.animation=F.types[""+f.animation]?f.animation:u.animation;var b=f.position.indexOf("up")>-1,e=f.position.indexOf("left")>-1;if(b||e)for(var m=0;m<F.types[""+f.animation].length;m++){var n=F.types[""+f.animation][m];b&&(n.y=n.y<.6?n.y-.4:n.y-2*n.y+(1-n.w)),e&&(n.x=n.x<.6?n.x-.4:n.x-2*n.x+(1-n.h)),F.types[""+f.animation][m]=n}f.type=y[""+f.type]?f.type:u.type;try{g=E.getIcon(),j=document.createElement("canvas"),l=document.createElement("img"),g.hasAttribute("href")?(l.setAttribute("src",g.getAttribute("href")),l.onload=function(){h=l.height>0?l.height:32,i=l.width>0?l.width:32,j.height=h,j.width=i,k=j.getContext("2d"),x.ready()}):(l.setAttribute("src",""),h=32,i=32,l.height=h,l.width=i,j.height=h,j.width=i,k=j.getContext("2d"),x.ready())}catch(o){throw"Error initializing favico. Message: "+o.message}},x={};x.ready=function(){m=!0,x.reset(),p()},x.reset=function(){m&&(v=[],n=!1,k.clearRect(0,0,i,h),k.drawImage(l,0,0,i,h),E.setIcon(j),window.clearTimeout(s),window.clearTimeout(t))},x.start=function(){if(m&&!o){var a=function(){n=v[0],o=!1,v.length>0&&(v.shift(),x.start())};if(v.length>0){o=!0;var b=function(){["type","animation","bgColor","textColor","fontFamily","fontStyle"].forEach(function(a){a in v[0].options&&(f[a]=v[0].options[a])}),F.run(v[0].options,function(){a()},!1)};n?F.run(n.options,function(){b()},!0):b()}}};var y={},z=function(a){return a.n="number"==typeof a.n?Math.abs(0|a.n):a.n,a.x=i*a.x,a.y=h*a.y,a.w=i*a.w,a.h=h*a.h,a.len=(""+a.n).length,a};y.circle=function(a){a=z(a);var b=!1;2===a.len?(a.x=a.x-.4*a.w,a.w=1.4*a.w,b=!0):a.len>=3&&(a.x=a.x-.65*a.w,a.w=1.65*a.w,b=!0),k.clearRect(0,0,i,h),k.drawImage(l,0,0,i,h),k.beginPath(),k.font=f.fontStyle+" "+Math.floor(a.h*(a.n>99?.85:1))+"px "+f.fontFamily,k.textAlign="center",b?(k.moveTo(a.x+a.w/2,a.y),k.lineTo(a.x+a.w-a.h/2,a.y),k.quadraticCurveTo(a.x+a.w,a.y,a.x+a.w,a.y+a.h/2),k.lineTo(a.x+a.w,a.y+a.h-a.h/2),k.quadraticCurveTo(a.x+a.w,a.y+a.h,a.x+a.w-a.h/2,a.y+a.h),k.lineTo(a.x+a.h/2,a.y+a.h),k.quadraticCurveTo(a.x,a.y+a.h,a.x,a.y+a.h-a.h/2),k.lineTo(a.x,a.y+a.h/2),k.quadraticCurveTo(a.x,a.y,a.x+a.h/2,a.y)):k.arc(a.x+a.w/2,a.y+a.h/2,a.h/2,0,2*Math.PI),k.fillStyle="rgba("+f.bgColor.r+","+f.bgColor.g+","+f.bgColor.b+","+a.o+")",k.fill(),k.closePath(),k.beginPath(),k.stroke(),k.fillStyle="rgba("+f.textColor.r+","+f.textColor.g+","+f.textColor.b+","+a.o+")","number"==typeof a.n&&a.n>999?k.fillText((a.n>9999?9:Math.floor(a.n/1e3))+"k+",Math.floor(a.x+a.w/2),Math.floor(a.y+a.h-.2*a.h)):k.fillText(a.n,Math.floor(a.x+a.w/2),Math.floor(a.y+a.h-.15*a.h)),k.closePath()},y.rectangle=function(a){a=z(a);var b=!1;2===a.len?(a.x=a.x-.4*a.w,a.w=1.4*a.w,b=!0):a.len>=3&&(a.x=a.x-.65*a.w,a.w=1.65*a.w,b=!0),k.clearRect(0,0,i,h),k.drawImage(l,0,0,i,h),k.beginPath(),k.font="bold "+Math.floor(a.h*(a.n>99?.9:1))+"px sans-serif",k.textAlign="center",k.fillStyle="rgba("+f.bgColor.r+","+f.bgColor.g+","+f.bgColor.b+","+a.o+")",k.fillRect(a.x,a.y,a.w,a.h),k.fillStyle="rgba("+f.textColor.r+","+f.textColor.g+","+f.textColor.b+","+a.o+")","number"==typeof a.n&&a.len>3?k.fillText((a.n>9999?9:Math.floor(a.n/1e3))+"k+",Math.floor(a.x+a.w/2),Math.floor(a.y+a.h-.2*a.h)):k.fillText(a.n,Math.floor(a.x+a.w/2),Math.floor(a.y+a.h-.15*a.h)),k.closePath()};var A=function(a,b){b=("string"==typeof b?{animation:b}:b)||{},p=function(){try{if("number"==typeof a?a>0:""!==a){var d={type:"badge",options:{n:a}};if("animation"in b&&F.types[""+b.animation]&&(d.options.animation=""+b.animation),"type"in b&&y[""+b.type]&&(d.options.type=""+b.type),["bgColor","textColor"].forEach(function(a){a in b&&(d.options[a]=c(b[a]))}),["fontStyle","fontFamily"].forEach(function(a){a in b&&(d.options[a]=b[a])}),v.push(d),v.length>100)throw"Too many badges requests in queue.";x.start()}else x.reset()}catch(e){throw"Error setting badge. Message: "+e.message}},m&&p()},B=function(a){p=function(){try{var b=a.width,c=a.height,d=document.createElement("img"),e=c/h>b/i?b/i:c/h;d.setAttribute("src",a.getAttribute("src")),d.height=c/e,d.width=b/e,k.clearRect(0,0,i,h),k.drawImage(d,0,0,i,h),E.setIcon(j)}catch(f){throw"Error setting image. Message: "+f.message}},m&&p()},C=function(a){p=function(){try{if("stop"===a)return q=!0,x.reset(),void(q=!1);a.addEventListener("play",function(){b(this)},!1)}catch(c){throw"Error setting video. Message: "+c.message}},m&&p()},D=function(a){if(window.URL&&window.URL.createObjectURL||(window.URL=window.URL||{},window.URL.createObjectURL=function(a){return a}),r.supported){var c=!1;navigator.getUserMedia=navigator.getUserMedia||navigator.oGetUserMedia||navigator.msGetUserMedia||navigator.mozGetUserMedia||navigator.webkitGetUserMedia,p=function(){try{if("stop"===a)return q=!0,x.reset(),void(q=!1);c=document.createElement("video"),c.width=i,c.height=h,navigator.getUserMedia({video:!0,audio:!1},function(a){c.src=URL.createObjectURL(a),c.play(),b(c)},function(){})}catch(d){throw"Error setting webcam. Message: "+d.message}},m&&p()}},E={};E.getIcon=function(){var a=!1,b="",c=function(){for(var a=document.getElementsByTagName("head")[0].getElementsByTagName("link"),b=a.length,c=b-1;c>=0;c--)if(/(^|\s)icon(\s|$)/i.test(a[c].getAttribute("rel")))return a[c];
return!1};if(f.elementId?(a=document.getElementById(f.elementId),a.setAttribute("href",a.getAttribute("src"))):(a=c(),a===!1&&(a=document.createElement("link"),a.setAttribute("rel","icon"),document.getElementsByTagName("head")[0].appendChild(a))),b=f.elementId?a.src:a.href,-1===b.indexOf(document.location.hostname))throw new Error("Error setting favicon. Favicon image is on different domain (Icon: "+b+", Domain: "+document.location.hostname+")");return a.setAttribute("type","image/png"),a},E.setIcon=function(a){var b=a.toDataURL("image/png");if(f.elementId)document.getElementById(f.elementId).setAttribute("src",b);else if(r.ff||r.opera){var c=g;g=document.createElement("link"),r.opera&&g.setAttribute("rel","icon"),g.setAttribute("rel","icon"),g.setAttribute("type","image/png"),document.getElementsByTagName("head")[0].appendChild(g),g.setAttribute("href",b),c.parentNode&&c.parentNode.removeChild(c)}else g.setAttribute("href",b)};var F={};return F.duration=40,F.types={},F.types.fade=[{x:.4,y:.4,w:.6,h:.6,o:0},{x:.4,y:.4,w:.6,h:.6,o:.1},{x:.4,y:.4,w:.6,h:.6,o:.2},{x:.4,y:.4,w:.6,h:.6,o:.3},{x:.4,y:.4,w:.6,h:.6,o:.4},{x:.4,y:.4,w:.6,h:.6,o:.5},{x:.4,y:.4,w:.6,h:.6,o:.6},{x:.4,y:.4,w:.6,h:.6,o:.7},{x:.4,y:.4,w:.6,h:.6,o:.8},{x:.4,y:.4,w:.6,h:.6,o:.9},{x:.4,y:.4,w:.6,h:.6,o:1}],F.types.none=[{x:.4,y:.4,w:.6,h:.6,o:1}],F.types.pop=[{x:1,y:1,w:0,h:0,o:1},{x:.9,y:.9,w:.1,h:.1,o:1},{x:.8,y:.8,w:.2,h:.2,o:1},{x:.7,y:.7,w:.3,h:.3,o:1},{x:.6,y:.6,w:.4,h:.4,o:1},{x:.5,y:.5,w:.5,h:.5,o:1},{x:.4,y:.4,w:.6,h:.6,o:1}],F.types.popFade=[{x:.75,y:.75,w:0,h:0,o:0},{x:.65,y:.65,w:.1,h:.1,o:.2},{x:.6,y:.6,w:.2,h:.2,o:.4},{x:.55,y:.55,w:.3,h:.3,o:.6},{x:.5,y:.5,w:.4,h:.4,o:.8},{x:.45,y:.45,w:.5,h:.5,o:.9},{x:.4,y:.4,w:.6,h:.6,o:1}],F.types.slide=[{x:.4,y:1,w:.6,h:.6,o:1},{x:.4,y:.9,w:.6,h:.6,o:1},{x:.4,y:.9,w:.6,h:.6,o:1},{x:.4,y:.8,w:.6,h:.6,o:1},{x:.4,y:.7,w:.6,h:.6,o:1},{x:.4,y:.6,w:.6,h:.6,o:1},{x:.4,y:.5,w:.6,h:.6,o:1},{x:.4,y:.4,w:.6,h:.6,o:1}],F.run=function(a,b,c,g){var h=F.types[e()?"none":f.animation];return g=c===!0?"undefined"!=typeof g?g:h.length-1:"undefined"!=typeof g?g:0,b=b?b:function(){},g<h.length&&g>=0?(y[f.type](d(a,h[g])),s=setTimeout(function(){c?g-=1:g+=1,F.run(a,b,c,g)},F.duration),void E.setIcon(j)):void b()},w(),{badge:A,video:C,image:B,webcam:D,reset:x.reset}};"undefined"!=typeof define&&define.amd?define([],function(){return a}):"undefined"!=typeof module&&module.exports?module.exports=a:this.Favico=a}(),FaviconNumber.prototype={up:function(){return this.focus_id==$(":focus").attr("id")?void this.off():(this.newest_count++,void(this.canUseFavico?this.favicon.badge(this.newest_count):document.title="("+this.newest_count+") "+this.title))},off:function(){this.newest_count=0,this.canUseFavico?this.favicon.badge(this.newest_count):document.title=this.title}},!function(a){var b=function(){function b(a){return" "===a||"	"===a||"\r"===a||"\n"===a||""===a}function c(a,b,c){var d=i.createElement("img");d.setAttribute("title",":"+c+":"),d.setAttribute("class","emoji"),d.setAttribute("src",q.img_dir+"/"+c+".png"),d.setAttribute("align","absmiddle"),a.splitText(b.index),a.nextSibling.nodeValue=a.nextSibling.nodeValue.substr(b[0].length,a.nextSibling.nodeValue.length),d.appendChild(a.splitText(b.index)),a.parentNode.insertBefore(d,a.nextSibling)}function d(a){if(a[1]&&a[2]){var b=a[2];if(l[b])return b}else for(var c=3;c<a.length-1;c++)if(a[c])return n[c-2][1]}function e(a,b){return"<img title=':"+b+":' class='emoji' src='"+q.img_dir+"/"+b+".png' align='absmiddle' />"}function f(){this.lastEmojiTerminatedAt=-1}function g(a,b){if(!a)return a;b||(b=e);var c=new f;return a.replace(p,function(){var a=Array.prototype.slice.call(arguments,0,-2),d=arguments[arguments.length-2],e=arguments[arguments.length-1],f=c.validate(a,d,e);return f?b(arguments[0],f):arguments[0]})}function h(a){"undefined"==typeof a&&(a=q.only_crawl_id?i.getElementById(q.only_crawl_id):i.body);for(var b,e=q.ignored_tags,g=i.createTreeWalker(a,NodeFilter.SHOW_TEXT|NodeFilter.SHOW_ELEMENT,function(a){return 1!==a.nodeType?NodeFilter.FILTER_ACCEPT:e[a.tagName]||a.classList.contains("no-emojify")?NodeFilter.FILTER_REJECT:NodeFilter.FILTER_SKIP},!1),h=[];null!==(b=g.nextNode());)h.push(b);h.forEach(function(a){for(var b,e=[],g=new f;null!==(b=p.exec(a.data));)g.validate(b,b.index,b.input)&&e.push(b);for(var h=e.length;h-->0;){var i=d(e[h]);c(a,e[h],i)}})}var i=a.window.document,j="+1,-1,100,109,1234,8ball,a,ab,abc,abcd,accept,aerial_tramway,airplane,alarm_clock,alien,ambulance,anchor,angel,anger,angry,anguished,ant,apple,aquarius,aries,arrow_backward,arrow_double_down,arrow_double_up,arrow_down,arrow_down_small,arrow_forward,arrow_heading_down,arrow_heading_up,arrow_left,arrow_lower_left,arrow_lower_right,arrow_right,arrow_right_hook,arrow_up,arrow_up_down,arrow_up_small,arrow_upper_left,arrow_upper_right,arrows_clockwise,arrows_counterclockwise,art,articulated_lorry,astonished,atm,b,baby,baby_bottle,baby_chick,baby_symbol,baggage_claim,balloon,ballot_box_with_check,bamboo,banana,bangbang,bank,bar_chart,barber,baseball,basketball,bath,bathtub,battery,bear,bee,beer,beers,beetle,beginner,bell,bento,bicyclist,bike,bikini,bird,birthday,black_circle,black_joker,black_nib,black_square,black_square_button,blossom,blowfish,blue_book,blue_car,blue_heart,blush,boar,boat,bomb,book,bookmark,bookmark_tabs,books,boom,boot,bouquet,bow,bowling,bowtie,boy,bread,bride_with_veil,bridge_at_night,briefcase,broken_heart,bug,bulb,bullettrain_front,bullettrain_side,bus,busstop,bust_in_silhouette,busts_in_silhouette,cactus,cake,calendar,calling,camel,camera,cancer,candy,capital_abcd,capricorn,car,card_index,carousel_horse,cat,cat2,cd,chart,chart_with_downwards_trend,chart_with_upwards_trend,checkered_flag,cherries,cherry_blossom,chestnut,chicken,children_crossing,chocolate_bar,christmas_tree,church,cinema,circus_tent,city_sunrise,city_sunset,cl,clap,clapper,clipboard,clock1,clock10,clock1030,clock11,clock1130,clock12,clock1230,clock130,clock2,clock230,clock3,clock330,clock4,clock430,clock5,clock530,clock6,clock630,clock7,clock730,clock8,clock830,clock9,clock930,closed_book,closed_lock_with_key,closed_umbrella,cloud,clubs,cn,cocktail,coffee,cold_sweat,collision,computer,confetti_ball,confounded,confused,congratulations,construction,construction_worker,convenience_store,cookie,cool,cop,copyright,corn,couple,couple_with_heart,couplekiss,cow,cow2,credit_card,crocodile,crossed_flags,crown,cry,crying_cat_face,crystal_ball,cupid,curly_loop,currency_exchange,curry,custard,customs,cyclone,dancer,dancers,dango,dart,dash,date,de,deciduous_tree,department_store,diamond_shape_with_a_dot_inside,diamonds,disappointed,disappointed_relieved,dizzy,dizzy_face,do_not_litter,dog,dog2,dollar,dolls,dolphin,donut,door,doughnut,dragon,dragon_face,dress,dromedary_camel,droplet,dvd,e-mail,ear,ear_of_rice,earth_africa,earth_americas,earth_asia,egg,eggplant,eight,eight_pointed_black_star,eight_spoked_asterisk,electric_plug,elephant,email,end,envelope,es,euro,european_castle,european_post_office,evergreen_tree,exclamation,expressionless,eyeglasses,eyes,facepunch,factory,fallen_leaf,family,fast_forward,fax,fearful,feelsgood,feet,ferris_wheel,file_folder,finnadie,fire,fire_engine,fireworks,first_quarter_moon,first_quarter_moon_with_face,fish,fish_cake,fishing_pole_and_fish,fist,five,flags,flashlight,floppy_disk,flower_playing_cards,flushed,foggy,football,fork_and_knife,fountain,four,four_leaf_clover,fr,free,fried_shrimp,fries,frog,frowning,fu,fuelpump,full_moon,full_moon_with_face,game_die,gb,gem,gemini,ghost,gift,gift_heart,girl,globe_with_meridians,goat,goberserk,godmode,golf,grapes,green_apple,green_book,green_heart,grey_exclamation,grey_question,grimacing,grin,grinning,guardsman,guitar,gun,haircut,hamburger,hammer,hamster,hand,handbag,hankey,hash,hatched_chick,hatching_chick,headphones,hear_no_evil,heart,heart_decoration,heart_eyes,heart_eyes_cat,heartbeat,heartpulse,hearts,heavy_check_mark,heavy_division_sign,heavy_dollar_sign,heavy_exclamation_mark,heavy_minus_sign,heavy_multiplication_x,heavy_plus_sign,helicopter,herb,hibiscus,high_brightness,high_heel,hocho,honey_pot,honeybee,horse,horse_racing,hospital,hotel,hotsprings,hourglass,hourglass_flowing_sand,house,house_with_garden,hurtrealbad,hushed,ice_cream,icecream,id,ideograph_advantage,imp,inbox_tray,incoming_envelope,information_desk_person,information_source,innocent,interrobang,iphone,it,izakaya_lantern,jack_o_lantern,japan,japanese_castle,japanese_goblin,japanese_ogre,jeans,joy,joy_cat,jp,key,keycap_ten,kimono,kiss,kissing,kissing_cat,kissing_closed_eyes,kissing_face,kissing_heart,kissing_smiling_eyes,koala,koko,kr,large_blue_circle,large_blue_diamond,large_orange_diamond,last_quarter_moon,last_quarter_moon_with_face,laughing,leaves,ledger,left_luggage,left_right_arrow,leftwards_arrow_with_hook,lemon,leo,leopard,libra,light_rail,link,lips,lipstick,lock,lock_with_ink_pen,lollipop,loop,loudspeaker,love_hotel,love_letter,low_brightness,m,mag,mag_right,mahjong,mailbox,mailbox_closed,mailbox_with_mail,mailbox_with_no_mail,man,man_with_gua_pi_mao,man_with_turban,mans_shoe,maple_leaf,mask,massage,meat_on_bone,mega,melon,memo,mens,metal,metro,microphone,microscope,milky_way,minibus,minidisc,mobile_phone_off,money_with_wings,moneybag,monkey,monkey_face,monorail,moon,mortar_board,mount_fuji,mountain_bicyclist,mountain_cableway,mountain_railway,mouse,mouse2,movie_camera,moyai,muscle,mushroom,musical_keyboard,musical_note,musical_score,mute,nail_care,name_badge,neckbeard,necktie,negative_squared_cross_mark,neutral_face,new,new_moon,new_moon_with_face,newspaper,ng,nine,no_bell,no_bicycles,no_entry,no_entry_sign,no_good,no_mobile_phones,no_mouth,no_pedestrians,no_smoking,non-potable_water,nose,notebook,notebook_with_decorative_cover,notes,nut_and_bolt,o,o2,ocean,octocat,octopus,oden,office,ok,ok_hand,ok_woman,older_man,older_woman,on,oncoming_automobile,oncoming_bus,oncoming_police_car,oncoming_taxi,one,open_file_folder,open_hands,open_mouth,ophiuchus,orange_book,outbox_tray,ox,page_facing_up,page_with_curl,pager,palm_tree,panda_face,paperclip,parking,part_alternation_mark,partly_sunny,passport_control,paw_prints,peach,pear,pencil,pencil2,penguin,pensive,performing_arts,persevere,person_frowning,person_with_blond_hair,person_with_pouting_face,phone,pig,pig2,pig_nose,pill,pineapple,pisces,pizza,plus1,point_down,point_left,point_right,point_up,point_up_2,police_car,poodle,poop,post_office,postal_horn,postbox,potable_water,pouch,poultry_leg,pound,pouting_cat,pray,princess,punch,purple_heart,purse,pushpin,put_litter_in_its_place,question,rabbit,rabbit2,racehorse,radio,radio_button,rage,rage1,rage2,rage3,rage4,railway_car,rainbow,raised_hand,raised_hands,raising_hand,ram,ramen,rat,recycle,red_car,red_circle,registered,relaxed,relieved,repeat,repeat_one,restroom,revolving_hearts,rewind,ribbon,rice,rice_ball,rice_cracker,rice_scene,ring,rocket,roller_coaster,rooster,rose,rotating_light,round_pushpin,rowboat,ru,rugby_football,runner,running,running_shirt_with_sash,sa,sagittarius,sailboat,sake,sandal,santa,satellite,satisfied,saxophone,school,school_satchel,scissors,scorpius,scream,scream_cat,scroll,seat,secret,see_no_evil,seedling,seven,shaved_ice,sheep,shell,ship,shipit,shirt,shit,shoe,shower,signal_strength,six,six_pointed_star,ski,skull,sleeping,sleepy,slot_machine,small_blue_diamond,small_orange_diamond,small_red_triangle,small_red_triangle_down,smile,smile_cat,smiley,smiley_cat,smiling_imp,smirk,smirk_cat,smoking,snail,snake,snowboarder,snowflake,snowman,sob,soccer,soon,sos,sound,space_invader,spades,spaghetti,sparkler,sparkles,sparkling_heart,speak_no_evil,speaker,speech_balloon,speedboat,squirrel,star,star2,stars,station,statue_of_liberty,steam_locomotive,stew,straight_ruler,strawberry,stuck_out_tongue,stuck_out_tongue_closed_eyes,stuck_out_tongue_winking_eye,sun_with_face,sunflower,sunglasses,sunny,sunrise,sunrise_over_mountains,surfer,sushi,suspect,suspension_railway,sweat,sweat_drops,sweat_smile,sweet_potato,swimmer,symbols,syringe,tada,tanabata_tree,tangerine,taurus,taxi,tea,telephone,telephone_receiver,telescope,tennis,tent,thought_balloon,three,thumbsdown,thumbsup,ticket,tiger,tiger2,tired_face,tm,toilet,tokyo_tower,tomato,tongue,top,tophat,tractor,traffic_light,train,train2,tram,triangular_flag_on_post,triangular_ruler,trident,triumph,trolleybus,trollface,trophy,tropical_drink,tropical_fish,truck,trumpet,tshirt,tulip,turtle,tv,twisted_rightwards_arrows,two,two_hearts,two_men_holding_hands,two_women_holding_hands,u5272,u5408,u55b6,u6307,u6708,u6709,u6e80,u7121,u7533,u7981,u7a7a,uk,umbrella,unamused,underage,unlock,up,us,v,vertical_traffic_light,vhs,vibration_mode,video_camera,video_game,violin,virgo,volcano,vs,walking,waning_crescent_moon,waning_gibbous_moon,warning,watch,water_buffalo,watermelon,wave,wavy_dash,waxing_crescent_moon,waxing_gibbous_moon,wc,weary,wedding,whale,whale2,wheelchair,white_check_mark,white_circle,white_flower,white_square,white_square_button,wind_chime,wine_glass,wink,wink2,wolf,woman,womans_clothes,womans_hat,womens,worried,wrench,x,yellow_heart,yen,yum,zap,zero,zzz",k=j.split(/,/),l=k.reduce(function(a,b){return a[b]=!0,a},{}),m={named:/:([a-z0-9A-Z_-]+):/,blush:/:-?\)/g,scream:/:-o/gi,smirk:/[:;]-?]/g,smiley:/[:;]-?d/gi,stuck_out_tongue_closed_eyes:/x-d/gi,stuck_out_tongue_winking_eye:/[:;]-?p/gi,rage:/:-?[\[@]/g,disappointed:/:-?\(/g,sob:/:['’]-?\(|:&#x27;\(/g,kissing_heart:/:-?\*/g,wink:/;-?\)/g,pensive:/:-?\//g,confounded:/:-?s/gi,flushed:/:-?\|/g,relaxed:/:-?\$/g,mask:/:-x/gi,heart:/<3|&lt;3/g,broken_heart:/<\/3|&lt;&#x2F;3/g,thumbsup:/:\+1:/g,thumbsdown:/:\-1:/g},n=Object.keys(m).map(function(a){return[m[a],a]}),o=n.map(function(a){var b=a[0],c=b.source||b;return c=c.replace(/(^|[^\[])\^/g,"$1"),"("+c+")"}).join("|"),p=new RegExp(o,"gi"),q={emojify_tag_type:"div",only_crawl_id:null,img_dir:"images/emoji",ignored_tags:{SCRIPT:1,TEXTAREA:1,A:1,PRE:1,CODE:1}};return f.prototype={validate:function(a,c,e){function f(){return g.lastEmojiTerminatedAt=j+c,h}var g=this,h=d(a);if(h){var i=a[0],j=i.length;return i.length>2?f():0===c?f():e.length===i.length+c?f():b(e.charAt(c-1))?f():b(e.charAt(i.length+c))?f():this.lastEmojiTerminatedAt===c?f():void 0}}},{defaultConfig:q,emojiNames:k,setConfig:function(a){Object.keys(q).forEach(function(b){b in a&&(q[b]=a[b])})},replace:g,run:h}}();return a.emojify=b,"function"==typeof define&&define.amd&&define([],function(){return b}),b}(this);var emojies=["blush","scream","smirk","smiley","stuck_out_tongue_closed_eyes","stuck_out_tongue_winking_eye","rage","disappointed","sob","kissing_heart","wink","pensive","confounded","flushed","relaxed","mask","heart","broken_heart","sunny","umbrella","cloud","snowflake","snowman","zap","cyclone","foggy","ocean","cat","dog","mouse","hamster","rabbit","wolf","frog","tiger","koala","bear","pig","pig_nose","cow","boar","monkey_face","monkey","horse","racehorse","camel","sheep","elephant","panda_face","snake","bird","baby_chick","hatched_chick","hatching_chick","chicken","penguin","turtle","bug","honeybee","ant","beetle","snail","octopus","tropical_fish","fish","whale","whale2","dolphin","cow2","ram","rat","water_buffalo","tiger2","rabbit2","dragon","goat","rooster","dog2","pig2","mouse2","ox","dragon_face","blowfish","crocodile","dromedary_camel","leopard","cat2","poodle","paw_prints","bouquet","cherry_blossom","tulip","four_leaf_clover","rose","sunflower","hibiscus","maple_leaf","leaves","fallen_leaf","herb","mushroom","cactus","palm_tree","evergreen_tree","deciduous_tree","chestnut","seedling","blossom","ear_of_rice","shell","globe_with_meridians","sun_with_face","full_moon_with_face","new_moon_with_face","new_moon","waxing_crescent_moon","first_quarter_moon","waxing_gibbous_moon","full_moon","waning_gibbous_moon","last_quarter_moon","waning_crescent_moon","last_quarter_moon_with_face","first_quarter_moon_with_face","moon","earth_africa","earth_americas","earth_asia","volcano","milky_way","partly_sunny","octocat","squirrel","bamboo","gift_heart","dolls","school_satchel","mortar_board","flags","fireworks","sparkler","wind_chime","rice_scene","jack_o_lantern","ghost","santa","christmas_tree","gift","bell","no_bell","tanabata_tree","tada","confetti_ball","balloon","crystal_ball","cd","dvd","floppy_disk","camera","video_camera","movie_camera","computer","tv","iphone","phone","telephone","telephone_receiver","pager","fax","minidisc","vhs","sound","speaker","mute","loudspeaker","mega","hourglass","hourglass_flowing_sand","alarm_clock","watch","radio","satellite","loop","mag","mag_right","unlock","lock","lock_with_ink_pen","closed_lock_with_key","key","bulb","flashlight","high_brightness","low_brightness","electric_plug","battery","calling","email","mailbox","postbox","bath","bathtub","shower","toilet","wrench","nut_and_bolt","hammer","seat","moneybag","yen","dollar","pound","euro","credit_card","money_with_wings","e-mail","inbox_tray","outbox_tray","envelope","incoming_envelope","postal_horn","mailbox_closed","mailbox_with_mail","mailbox_with_no_mail","door","smoking","bomb","gun","hocho","pill","syringe","page_facing_up","page_with_curl","bookmark_tabs","bar_chart","chart_with_upwards_trend","chart_with_downwards_trend","scroll","clipboard","calendar","date","card_index","file_folder","open_file_folder","scissors","pushpin","paperclip","black_nib","pencil2","straight_ruler","triangular_ruler","closed_book","green_book","blue_book","orange_book","notebook","notebook_with_decorative_cover","ledger","books","bookmark","name_badge","microscope","telescope","newspaper","football","basketball","soccer","baseball","tennis","8ball","rugby_football","bowling","golf","mountain_bicyclist","bicyclist","horse_racing","snowboarder","swimmer","surfer","ski","spades","hearts","clubs","diamonds","gem","ring","trophy","musical_score","musical_keyboard","violin","space_invader","video_game","black_joker","flower_playing_cards","game_die","dart","mahjong","clapper","memo","pencil","book","art","microphone","headphones","trumpet","saxophone","guitar","shoe","sandal","high_heel","lipstick","boot","shirt","tshirt","necktie","womans_clothes","dress","running_shirt_with_sash","jeans","kimono","bikini","ribbon","tophat","crown","womans_hat","mans_shoe","closed_umbrella","briefcase","handbag","pouch","purse","eyeglasses","fishing_pole_and_fish","coffee","tea","sake","baby_bottle","beer","beers","cocktail","tropical_drink","wine_glass","fork_and_knife","pizza","hamburger","fries","poultry_leg","meat_on_bone","spaghetti","curry","fried_shrimp","bento","sushi","fish_cake","rice_ball","rice_cracker","rice","ramen","stew","oden","dango","egg","bread","doughnut","custard","icecream","ice_cream","shaved_ice","birthday","cake","cookie","chocolate_bar","candy","lollipop","honey_pot","apple","green_apple","tangerine","lemon","cherries","grapes","watermelon","strawberry","peach","melon","banana","pear","pineapple","sweet_potato","eggplant","tomato","corn","alien","angel","anger","angry","anguished","astonished","baby","blue_heart","blush","boom","bow","bowtie","boy","bride_with_veil","broken_heart","bust_in_silhouette","busts_in_silhouette","clap","cold_sweat","collision","confounded","confused","construction_worker","cop","couple_with_heart","couple","couplekiss","cry","crying_cat_face","cupid","dancer","dancers","dash","disappointed","dizzy_face","dizzy","droplet","ear","exclamation","expressionless","eyes","facepunch","family","fearful","feelsgood","feet","finnadie","fire","fist","flushed","frowning","girl","goberserk","godmode","green_heart","grey_exclamation","grey_question","grimacing","grin","grinning","guardsman","haircut","hand","hankey","hear_no_evil","heart_eyes_cat","heart_eyes","heart","heartbeat","heartpulse","hurtrealbad","hushed","imp","information_desk_person","innocent","japanese_goblin","japanese_ogre","joy_cat","joy","kiss","kissing_cat","kissing_closed_eyes","kissing_heart","kissing_smiling_eyes","kissing","laughing","lips","love_letter","man_with_gua_pi_mao","man_with_turban","man","mask","massage","metal","muscle","musical_note","nail_care","neckbeard","neutral_face","no_good","no_mouth","nose","notes","ok_hand","ok_woman","older_man","older_woman","open_hands","open_mouth","pensive","persevere","person_frowning","person_with_blond_hair","person_with_pouting_face","point_down","point_left","point_right","point_up_2","point_up","poop","pouting_cat","pray","princess","punch","purple_heart","question","rage","rage1","rage2","rage3","rage4","raised_hand","raised_hands","relaxed","relieved","revolving_hearts","runner","running","satisfied","scream_cat","scream","see_no_evil","shit","skull","sleeping","sleepy","smile_cat","smile","smiley_cat","smiley","smiling_imp","smirk_cat","smirk","sob","sparkling_heart","sparkles","speak_no_evil","speech_balloon","star","star2","stuck_out_tongue_closed_eyes","stuck_out_tongue_winking_eye","stuck_out_tongue","sunglasses","suspect","sweat_drops","sweat_smile","sweat","thought_balloon","-1","thumbsdown","thumbsup","+1","tired_face","tongue","triumph","trollface","two_hearts","two_men_holding_hands","two_women_holding_hands","unamused","v","walking","wave","weary","wink2","wink","woman","worried","yellow_heart","yum","zzz","109","house","house_with_garden","school","office","post_office","hospital","bank","convenience_store","love_hotel","hotel","wedding","church","department_store","european_post_office","city_sunrise","city_sunset","japanese_castle","european_castle","tent","factory","tokyo_tower","japan","mount_fuji","sunrise_over_mountains","sunrise","stars","statue_of_liberty","bridge_at_night","carousel_horse","rainbow","ferris_wheel","fountain","roller_coaster","ship","speedboat","boat","sailboat","rowboat","anchor","rocket","airplane","helicopter","steam_locomotive","tram","mountain_railway","bike","aerial_tramway","suspension_railway","mountain_cableway","tractor","blue_car","oncoming_automobile","car","red_car","taxi","oncoming_taxi","articulated_lorry","bus","oncoming_bus","rotating_light","police_car","oncoming_police_car","fire_engine","ambulance","minibus","truck","train","station","train2","bullettrain_front","bullettrain_side","light_rail","monorail","railway_car","trolleybus","ticket","fuelpump","vertical_traffic_light","traffic_light","warning","construction","beginner","atm","slot_machine","busstop","barber","hotsprings","checkered_flag","crossed_flags","izakaya_lantern","moyai","circus_tent","performing_arts","round_pushpin","triangular_flag_on_post","jp","kr","cn","us","fr","es","it","ru","gb","uk","de","100","1234","one","two","three","four","five","six","seven","eight","nine","keycap_ten","zero","hash","symbols","arrow_backward","arrow_down","arrow_forward","arrow_left","capital_abcd","abcd","abc","arrow_lower_left","arrow_lower_right","arrow_right","arrow_up","arrow_upper_left","arrow_upper_right","arrow_double_down","arrow_double_up","arrow_down_small","arrow_heading_down","arrow_heading_up","leftwards_arrow_with_hook","arrow_right_hook","left_right_arrow","arrow_up_down","arrow_up_small","arrows_clockwise","arrows_counterclockwise","rewind","fast_forward","information_source","ok","twisted_rightwards_arrows","repeat","repeat_one","new","top","up","cool","free","ng","cinema","koko","signal_strength","u5272","u5408","u55b6","u6307","u6708","u6709","u6e80","u7121","u7533","u7a7a","u7981","sa","restroom","mens","womens","baby_symbol","no_smoking","parking","wheelchair","metro","baggage_claim","accept","wc","potable_water","put_litter_in_its_place","secret","congratulations","m","passport_control","left_luggage","customs","ideograph_advantage","cl","sos","id","no_entry_sign","underage","no_mobile_phones","do_not_litter","non-potable_water","no_bicycles","no_pedestrians","children_crossing","no_entry","eight_spoked_asterisk","eight_pointed_black_star","heart_decoration","vs","vibration_mode","mobile_phone_off","chart","currency_exchange","aries","taurus","gemini","cancer","leo","virgo","libra","scorpius","sagittarius","capricorn","aquarius","pisces","ophiuchus","six_pointed_star","negative_squared_cross_mark","a","b","ab","o2","diamond_shape_with_a_dot_inside","recycle","end","on","soon","clock1","clock130","clock10","clock1030","clock11","clock1130","clock12","clock1230","clock2","clock230","clock3","clock330","clock4","clock430","clock5","clock530","clock6","clock630","clock7","clock730","clock8","clock830","clock9","clock930","heavy_dollar_sign","copyright","registered","tm","x","heavy_exclamation_mark","bangbang","interrobang","o","heavy_multiplication_x","heavy_plus_sign","heavy_minus_sign","heavy_division_sign","white_flower","heavy_check_mark","ballot_box_with_check","radio_button","link","curly_loop","wavy_dash","part_alternation_mark","trident","black_square","white_square","white_check_mark","black_square_button","white_square_button","black_circle","white_circle","red_circle","large_blue_circle","large_blue_diamond","large_orange_diamond","small_blue_diamond","small_orange_diamond","small_red_triangle","small_red_triangle_down","shipit"];!function(a){"use strict";var b=function(a){var b,d;return b=function(){d=!1},function(){var e;d||(d=!0,e=c(arguments),e.unshift(b),a.apply(this,e))}},c=function(a){var b;return b=Array.prototype.slice.call(a)},d=function(){var b;return b=a("<div></div>").css(["color"]).color,"undefined"!=typeof b?function(a,b){return a.css(b)}:function(b,c){var d;return d={},a.each(c,function(a,c){d[c]=b.css(c)}),d}}(),e=function(a){return a},f=function(a){var b={};return function(c,d){b[c]?d(b[c]):a.call(this,c,function(a){b[c]=(b[c]||[]).concat(a),d.apply(null,arguments)})}},g=function(a,b){var c,d;if(a.indexOf)return-1!=a.indexOf(b);for(c=0,d=a.length;d>c;c++)if(a[c]===b)return!0;return!1},h=function(){function c(b){var c;this.el=b.get(0),c=this.el===document.activeElement,this.$el=k(b),this.id="textComplete"+j++,this.strategies=[],c?(this.initialize(),this.$el.focus()):this.$el.one("focus.textComplete",a.proxy(this.initialize,this))}var e,f,g,h,j;e={wrapper:'<div class="textcomplete-wrapper"></div>',list:'<ul class="dropdown-menu"></ul>'},f={wrapper:{position:"relative"},list:{position:"absolute",top:0,left:0,zIndex:"100",display:"none"}},g=a(e.wrapper).css(f.wrapper),h=a(e.list).css(f.list),j=0,a.extend(c.prototype,{initialize:function(){var b,c;b=h.clone(),this.listView=new i(b,this),this.$el.before(b).on({"keyup.textComplete":a.proxy(this.onKeyup,this),"keydown.textComplete":a.proxy(this.listView.onKeydown,this.listView)}),c={},c["click."+this.id]=a.proxy(this.onClickDocument,this),c["keyup."+this.id]=a.proxy(this.onKeyupDocument,this),a(document).on(c)},register:function(a){this.strategies=this.strategies.concat(a)},renderList:function(a){this.clearAtNext&&(this.listView.clear(),this.clearAtNext=!1),a.length&&(this.listView.shown||(this.listView.setPosition(this.getCaretPosition()).clear().activate(),this.listView.strategy=this.strategy),a=a.slice(0,this.strategy.maxCount),this.listView.render(a)),!this.listView.data.length&&this.listView.shown&&this.listView.deactivate()},searchCallbackFactory:function(a){var b=this;return function(c,d){b.renderList(c),d||(a(),b.clearAtNext=!0)}},onKeyup:function(a){var b,c;if(!this.skipSearch(a))if(b=this.extractSearchQuery(this.getTextFromHeadToCaret()),b.length){if(c=b[1],this.term===c)return;this.term=c,this.search(b)}else this.term=null,this.listView.deactivate()},skipSearch:function(a){if(this.skipNextKeyup)return this.skipNextKeyup=!1,!0;switch(a.keyCode){case 40:case 38:return!0}},onSelect:function(b){var c,d,e;c=this.getTextFromHeadToCaret(),d=this.el.value.substring(this.el.selectionEnd),e=this.strategy.replace(b),a.isArray(e)&&(d=e[1]+d,e=e[0]),c=c.replace(this.strategy.match,e),this.$el.val(c+d).trigger("change").trigger("textComplete:select",b),this.el.focus(),this.el.selectionStart=this.el.selectionEnd=c.length,this.skipNextKeyup=!0},onClickDocument:function(a){a.originalEvent&&!a.originalEvent.keepTextCompleteDropdown&&this.listView.deactivate()},onKeyupDocument:function(a){this.listView.shown&&27===a.keyCode&&(this.listView.deactivate(),this.$el.focus())},destroy:function(){var b;this.$el.off(".textComplete"),a(document).off("."+this.id),this.listView&&this.listView.destroy(),b=this.$el.parent(),b.after(this.$el).remove(),this.$el.data("textComplete",void 0),this.$el=null},getCaretPosition:function(){if(0!==this.el.selectionEnd){var b,c,e,f,g,h;return h=this.$el.attr("dir")||this.$el.css("direction"),b=["border-width","font-family","font-size","font-style","font-variant","font-weight","height","letter-spacing","word-spacing","line-height","text-decoration","text-align","width","padding-top","padding-right","padding-bottom","padding-left","margin-top","margin-right","margin-bottom","margin-left"],c=a.extend({position:"absolute",overflow:"auto","white-space":"pre-wrap",top:0,left:-9999,direction:h},d(this.$el,b)),e=a("<div></div>").css(c).text(this.getTextFromHeadToCaret()),f=a("<span></span>").text(".").appendTo(e),this.$el.before(e),g=f.position(),g.top+=f.height()-this.$el.scrollTop(),"rtl"===h&&(g.left-=this.listView.$el.width()),e.remove(),g}},getTextFromHeadToCaret:function(){var a,b,c;return b=this.el.selectionEnd,"number"==typeof b?a=this.el.value.substring(0,b):document.selection&&(c=this.el.createTextRange(),c.moveStart("character",0),c.moveEnd("textedit"),a=c.text),a},extractSearchQuery:function(a){var b,c,d,e;for(b=0,c=this.strategies.length;c>b;b++)if(d=this.strategies[b],e=a.match(d.match))return[d,e[d.index]];return[]},search:b(function(a,b){var c;this.strategy=b[0],c=b[1],this.strategy.search(c,this.searchCallbackFactory(a))})});var k=function(a){return a.wrap(g.clone().css("display",a.css("display")))};return c}(),i=function(){function b(b,c){this.data=[],this.$el=b,this.index=0,this.completer=c,this.$el.on("click.textComplete","li.textcomplete-item",a.proxy(this.onClick,this))}return a.extend(b.prototype,{shown:!1,render:function(a){var b,c,d,e,f;for(b="",c=0,d=a.length;d>c&&(f=a[c],g(this.data,f)||(e=this.data.length,this.data.push(f),b+='<li class="textcomplete-item" data-index="'+e+'"><a>',b+=this.strategy.template(f),b+="</a></li>",this.data.length!==this.strategy.maxCount));c++);this.$el.append(b),this.data.length?this.activateIndexedItem():this.deactivate()},clear:function(){return this.data=[],this.$el.html(""),this.index=0,this},activateIndexedItem:function(){this.$el.find(".active").removeClass("active"),this.getActiveItem().addClass("active")},getActiveItem:function(){return a(this.$el.children().get(this.index))},activate:function(){return this.shown||(this.$el.show(),this.completer.$el.trigger("textComplete:show"),this.shown=!0),this},deactivate:function(){return this.shown&&(this.$el.hide(),this.completer.$el.trigger("textComplete:hide"),this.shown=!1,this.data=[],this.index=null),this},setPosition:function(a){return this.$el.css(a),this},select:function(a){var b=this;this.completer.onSelect(this.data[a]),setTimeout(function(){b.deactivate()},0)},onKeydown:function(a){this.shown&&(38===a.keyCode?(a.preventDefault(),0===this.index?this.index=this.data.length-1:this.index-=1,this.activateIndexedItem()):40===a.keyCode?(a.preventDefault(),this.index===this.data.length-1?this.index=0:this.index+=1,this.activateIndexedItem()):(13===a.keyCode||9===a.keyCode)&&(a.preventDefault(),this.select(parseInt(this.getActiveItem().data("index"),10))))},onClick:function(b){var c=a(b.target);b.originalEvent.keepTextCompleteDropdown=!0,c.hasClass("textcomplete-item")||(c=c.parents("li.textcomplete-item")),this.select(parseInt(c.data("index"),10))},destroy:function(){this.deactivate(),this.$el.off("click.textComplete").remove(),this.$el=null}}),b}();a.fn.textcomplete=function(b){var c,d,g,i;if(i="textComplete","destroy"===b)return this.each(function(){var b=a(this).data(i);b&&b.destroy()});for(c=0,d=b.length;d>c;c++)g=b[c],g.template||(g.template=e),null==g.index&&(g.index=2),g.cache&&(g.search=f(g.search)),g.maxCount||(g.maxCount=10);return this.each(function(){var c,d;c=a(this),d=c.data(i),d||(d=new h(c),c.data(i,d)),d.register(b)
})}}(window.jQuery||window.Zepto),function(a){if(!a.ionSound){var b,c,d,e,f={},g={},h=!1,i=function(b){var e,h;-1!==b.indexOf(":")?(e=b.split(":")[0],h=b.split(":")[1]):e=b,g[e]=new Audio,c=g[e].canPlayType("audio/mp3"),d="probably"===c||"maybe"===c?f.path+e+".mp3":f.path+e+".ogg",a(g[e]).prop("src",d),g[e].load(),g[e].preload="auto",g[e].volume=h||f.volume},j=function(a){var b,c,d,e;if(-1!==a.indexOf(":")?(c=a.split(":")[0],d=a.split(":")[1]):c=a,b=g[c],"object"==typeof b&&null!==b)if(d&&(b.volume=d),f.multiPlay||h){if(f.multiPlay){if(!b.ended)try{b.currentTime=0}catch(i){}b.play()}}else b.play(),h=!0,e=setInterval(function(){b.ended&&(clearInterval(e),h=!1)},250)};a.ionSound=function(c){if(f=a.extend({sounds:["water_droplet"],path:"static/sounds/",multiPlay:!0,volume:"0.5"},c),b=f.sounds.length,"function"==typeof Audio||"object"==typeof Audio)for(e=0;b>e;e+=1)i(f.sounds[e]);a.ionSound.play=function(a){j(a)},a.ionSound.stop=function(a){if(a=g[a],"object"==typeof a&&null!==a){a.pause();try{a.currentTime=0}catch(b){}}},a.ionSound.kill=function(a){var b=g[a];if("object"==typeof b&&null!==b){try{g[a].src=""}catch(c){}g[a]=null}}},a.ionSound.destroy=function(){for(e=0;b>e;e+=1)g[f.sounds[e]]=null;b=0,a.ionSound.play=function(){},a.ionSound.stop=function(){},a.ionSound.kill=function(){}}}}(jQuery),DropZone.prototype={drop_file_action:function(a,b){var c=this;return function(d){var e=this,f=d.originalEvent.dataTransfer.files[0];return c.upload_file_with_ajax(e,f,a,b),!1}},select_file_action:function(a,b){var c=this;return function(){var d=this,e=$(d).prop("files")[0];return c.upload_file_with_ajax(d,e,a,b),!1}},cancel_event:function(a){return a.preventDefault(),a.stopPropagation(),!1},upload_file_with_ajax:function(a,b,c,d){var e=this,f=this.show_share_memo_uploading(c,"Uploading",'now uploading "'+b.name+'" ... '),g=new FormData;g.append("file",b),$.ajax("/upload",{type:"POST",contentType:!1,processData:!1,data:g,error:function(){e.hide_share_memo_alert(f),e.show_share_memo_alert(c,"Drop error","failed to file upload.")},success:function(b){e.hide_share_memo_alert(f),d(a,b)}})},show_share_memo_alert:function(a,b,c){$("<div>").addClass("share-memo-alert alert alert-error").css("display","none").html('<a class="close" data-dismiss="alert">x</a><strong>'+b+"</strong> "+c).prependTo(a).slideDown("normal",function(){var a=this;setTimeout(function(){$(a)&&$(a).slideUp("normal",function(){$(this).remove()})},1e4)})},show_share_memo_uploading:function(a,b,c){return $alert=$("<div>").addClass("share-memo-alert alert alert-info").css("display","none").html('<a class="close" data-dismiss="alert">x</a><strong>'+b+"</strong> "+c).prependTo(a).slideDown("normal")},hide_share_memo_alert:function(a){a.slideUp("normal",function(){$(this).remove()})}};var LOGIN_COLOR_MAX=9;ChatController.prototype={init_chat:function(){var a=this;$("#message").textcomplete([{match:/\B:([\-+\w]*)$/,search:function(a,b){b($.map(emojies,function(b){return 0===b.indexOf(a)?b:null}))},template:function(a){return'<img class="emoji-suggest" src="img/emoji/'+a+'.png"></img> '+a},replace:function(a){return":"+a+": "},index:1,maxCount:8}]),$.templates("#loginNameTmpl").link("#login_list_body",a.loginElemList),$("#list").on("click",".remove_msg",function(){var b="#"+$(this).closest("li").attr("id"),c=$(this).closest("li").data("id");$(b).fadeOut(),a.send_remove_msg(c)}),$("#chat_area").on("click",".login-elem",function(){var a=$(this).children(".name").text();$("#message").val($("#message").val()+" @"+a+"さん "),$("#message").focus()}),$("#form").submit(function(){var b=$("#name").val(),c=$("#message").val();return c&&b&&(a.socket.emit("message",{name:b,msg:c}),$("#message").attr("value",""),a.login_name!=b&&(a.login_name=b,a.changedLoginName(b))),!1}),$("#pomo").click(function(){var b=$("#name").val();return b&&($("#message").attr("value",""),a.socket.emit("pomo",{name:b,msg:""}),a.login_name!=b&&(a.login_name=b,a.changedLoginName(b))),!1}),$("#upload_chat_button").click(function(){return $("#upload_chat").click(),!1}),emojify.setConfig({img_dir:"img/emoji"})},setName:function(a){this.login_name=a,$("#name").val(a),this.changedLoginName(a)},focus:function(){$("#message").focus()},setWidth:function(a){$("#chat_area").css("width",a+"px").css("margin",0)},init_socket:function(){var a=this;this.socket.on("message_own",function(b){var c=a.prepend_own_msg(b);a.setColorbox(c.find(".thumbnail")),emojify.run(c.get(0)),a.play_sound(b.msg),a.faviconNumber.up()}),this.socket.on("message",function(b){var c=a.prepend_msg(b);a.setColorbox(c.find(".thumbnail")),emojify.run(c.get(0)),a.do_notification(b),a.play_sound(b.msg),a.faviconNumber.up()}),this.socket.on("remove_message",function(a){$("#msg_"+a.id).fadeOut()}),this.socket.on("list",function(b){$("#login_list_loader").hide();for(var c=[],d=0;d<b.length;++d){var e="";""!=b[d].place&&(e="@"+b[d].place),c.push({id:b[d].id,color_id:"login-elem login-name"+a.get_color_id_by_name_id(b[d].id),name:b[d].name,place:e,pomo_min:b[d].pomo_min})}$.observable(a.loginElemList).refresh(c)}),this.socket.on("latest_log",function(b){for(var c=0;c<b.length;c++)a.append_msg(b[c]);a.setColorbox($("#chat_body").find(".thumbnail")),emojify.run($("#chat_body").get(0))})},init_dropzone:function(){this.dropZone=new DropZone({dropTarget:$("#chat_area"),fileTarget:$("#upload_chat"),alertTarget:$("#alert_chat_area"),uploadedAction:function(a,b){$("#message").val($("#message").val()+" "+b.fileName+" ")}})},append_msg:function(a){if("System"!=a.name&&!this.exist_msg(a)){var b=this.get_msg_html(a);$("#list").append(b.li.addClass(b.css)),b.li.fadeIn()}},prepend_msg:function(a){if("System"!=a.name&&!this.exist_msg(a)){var b=this.get_msg_html(a);return $("#list").prepend(b.li),b.li.addClass("text-highlight",0),b.li.slideDown("fast",function(){b.li.switchClass("text-highlight",b.css,500)}),b.li}},prepend_own_msg:function(a){if(!this.exist_msg(a)){var b=this.get_msg_html(a);return $("#list").prepend(b.li),b.li.addClass("text-highlight",0),b.li.slideDown("fast",function(){b.li.switchClass("text-highlight",b.css,500)}),b.li}},exist_msg:function(a){void 0==a.msg&&(a.msg="");var b="#msg_"+a._id.toString();return $(b).size()>0},get_msg_html:function(a){return a.name==this.login_name?{li:this.get_msg_li_html(a).html(this.get_msg_body(a)+'<a class="remove_msg">x</a><span class="own_msg_date">'+a.date+"</span></td></tr></table>"),css:"own_msg"}:this.include_target_name(a.msg,this.login_name)?{li:this.get_msg_li_html(a).html(this.get_msg_body(a)+' <span class="target_msg_date">'+a.date+"</span></td></tr></table>"),css:"target_msg"}:{li:this.get_msg_li_html(a).html(this.get_msg_body(a)+' <span class="date">'+a.date+"</span></td></tr></table>"),css:"normal_msg"}},get_msg_li_html:function(a){return void 0!=a._id?$("<li/>").attr("style","display:none").attr("id","msg_"+a._id.toString()).attr("data-id",a._id.toString()):$("<li/>").attr("style","display:none")},get_msg_body:function(a){var b=new Date,c=(b.getTime(),"login-name"),d="msg";return a.id=this.get_id(a.name),"System"==a.name?(c="login-name-system",d="msg_ext"):1==a.ext?(c="login-name-ext",d="msg_ext"):"Pomo"==a.name?(c="login-name-pomosys",d="msg_pomo"):c="login-name"+this.get_color_id_by_name_id(a.id),'<table><tr><td nowrap valign="top"><span class="login-elem '+c+'"><span class="name">'+a.name+'</span></span></td><td width="100%"><span class="msg_text '+d+'">'+this.decorate_msg(a.msg)+"</span>"},get_color_id_by_name_id:function(a){return 0==a?0:a%LOGIN_COLOR_MAX+1},decorate_msg:function(a){var b=a;return b=this.deco_login_name(b),b=$.decora.message_to_html(b)},deco_login_name:function(a){var b=this,c=a,d=RegExp("@(.+?)さん","g");return c=c.replace(d,function(){return arguments[1]==b.login_name?'<span class="target-me">'+arguments[0]+"</span>":'<span class="target-other">'+arguments[0]+"</span>"})},include_target_name:function(a,b){var c=RegExp("@"+b+"( |　|さん|$)");return a.match(c)?!0:!1},get_id:function(a){for(var b=0;b<this.loginElemList.length;++b)if(this.loginElemList[b].name==a)return this.loginElemList[b].id;return 0},send_remove_msg:function(a){this.socket.emit("remove_message",{id:a})},setColorbox:function(a){a.colorbox({transition:"none",rel:"img",maxWidth:"100%",maxHeight:"100%",initialWidth:"200px",initialHeight:"200px"})},play_sound:function(a){a.match(/play:(.+)/)&&(console.log(RegExp.$1),$.ionSound.destroy(),$.ionSound({sounds:[RegExp.$1],path:"/uploads/",volume:"0.5"}),$.ionSound.play(RegExp.$1))},init_notification:function(){window.localStorage?("true"==window.localStorage.popupNotification&&$("#notification").attr("checked","checked"),$("#notification").on("click",function(){"checked"==$(this).attr("checked")?(window.localStorage.popupNotification="true",window.webkitNotifications?window.webkitNotifications.requestPermission():Notification&&Notification.requestPermission()):window.localStorage.popupNotification="false"}),window.localStorage.notificationSeconds?$("#notification_seconds").val(window.localStorage.notificationSeconds):($("#notification_seconds").val(5),window.localStorage.notificationSeconds=5),$("#notification_seconds").on("change",function(){window.localStorage.notificationSeconds=$(this).val()})):$("#notification").attr("disabled","disabled")},do_notification:function(a){var b=a.name+(""!=TITLE_NAME?" @"+TITLE_NAME:""),c="notification.png",d=a.msg;if("true"==window.localStorage.popupNotification)if(window.webkitNotifications){var e=window.webkitNotifications.checkPermission();if(0==e){var f=window.webkitNotifications.createNotification(c,b,d);f.onclick=function(){f.close()},f.show(),setTimeout(function(){f.cancel()},1e3*window.localStorage.notificationSeconds)}else window.webkitNotifications.requestPermission()}else Notification&&Notification.requestPermission(function(){if("granted"==Notification.permission)switch(Notification.permission){case"granted":case"default":new Notification(b,{icon:c,body:d,tag:"notification-test"});break;case"denied":}})}};var SHARE_MEMO_NUMBER=20,CODE_MIN_HEIGHT=700,CODE_OUT_ADJUST_HEIGHT=300,CODE_INDEX_ADJUST_HEIGHT=50,CODE_ADJUST_HEIGHT=200;ShareMemoController.prototype={setName:function(a){this.login_name=a},setWidth:function(a){$("#memo_area").css("width",a+"px").css("margin",0)},init_sharememo:function(){for(var a=SHARE_MEMO_NUMBER;a>1;a--)$("#share_memo_tab_top").after($("<li/>").addClass("share-memo-tab").attr("data-no",a)),$("#share_memo_1").after($("<div/>").attr("id","share_memo_"+a).attr("data-no",a).addClass("share-memo tab-pane")),$("#memo_number_option_top").after($("<option/>").attr("value",a).html(a));$("#tab_change").click(function(){$("#share_memo_tabbable").hasClass("tabs-left")?($("#share_memo_tabbable").removeClass("tabs-left"),$("#share_memo_nav").removeClass("nav-tabs"),$("#share_memo_nav").addClass("nav-pills")):($("#share_memo_tabbable").addClass("tabs-left"),$("#share_memo_nav").removeClass("nav-pills"),$("#share_memo_nav").addClass("nav-tabs"))}),$("#scroll_top").click(function(){$("#memo_area").animate({scrollTop:0},"fast")}),$(".share-memo-tab").each(function(){var a=$(this).data("no");$(this).append($("#shareMemoTabTmpl").render({no:a}))}),$(".share-memo").each(function(){$(this).append($("#shareMemoTmpl").render())})},init_socket:function(){function a(a,b){var c=a.data("no");g.writing_text[c]=g.writing_text[c]?g.writing_text[c]:{text:""};var d=a.children(".code");d.val(g.writing_text[c].text),d.fadeIn("fast",function(){d.keyup(),d.caretLine(b),$("#memo_area").scrollTop(18*b-CODE_ADJUST_HEIGHT)}),a.children("pre").hide(),a.children(".fix-text").show(),a.children(".sync-text").hide(),i=d.val(),e(c)}function b(a,b){if("none"!=a.children(".code").css("display")){var c=j.code_no,e=a.children(".code").val();i!=e&&socket.emit("text",{no:c,text:e}),d(a,g.writing_text[c].text),a.children(".code").hide(),a.children("pre").fadeIn(),a.children(".fix-text").hide(),a.children(".sync-text").show();var h=a.find("table tr").eq(b-1);h.length>0&&($("#memo_area").scrollTop(0),$("#memo_area").scrollTop(h.offset().top-CODE_OUT_ADJUST_HEIGHT)),socket.emit("add_history",{no:a.data("no")}),f()}}function c(a){var b='<table><tr class="code-out-tr"><td>';return b+=a.replace(/[\n]/g,'</td></tr class="code-out-tr"><tr class="code-out-tr"><td>'),b+="</td></tr></table>"}function d(a,b){a.find(".code-out").html(c($.decora.to_html(b))),a.find("tr:has(:header)").addClass("header-tr"),a.find("td:has(.code-out-pre)").addClass("code-out-pre-td"),a.find("td:has(.code-out-pre-top)").addClass("code-out-pre-top-td"),a.find("td:has(.code-out-pre-bottom)").addClass("code-out-pre-bottom-td"),g.setColorbox(a.find(".thumbnail")),emojify.run(a.find(".code-out").get(0));var d=a.find("input:checked").length,e=a.find("input[type=checkbox]").length;e>0?(a.find(".checkbox-count").html(d+"/"+e+" done").show(),d==e?a.find(".checkbox-count").addClass("checkbox-count-done"):a.find(".checkbox-count").removeClass("checkbox-count-done")):a.find(".checkbox-count").hide()}function e(a){$target_code=$("#share_memo_"+a).children(".code");var b=function(){var b=$target_code.val();i!=b&&(socket.emit("text",{no:a,text:b}),i=b)};-1!=j.id&&f(),j={id:setInterval(b,400),code_no:a}}function f(){clearInterval(j.id),j={id:-1,code_no:0}}var g=this;$(".code").autofit({min_height:CODE_MIN_HEIGHT}),$(".share-memo").on("click",".sync-text",function(){var b=$(this).closest(".share-memo");a(b,0)}),$(".share-memo").on("dblclick","pre tr",function(){var b=$(this).closest(".share-memo"),c=$(this).closest("table").find("tr").index(this);return a(b,c),!1}),$(".share-memo").on("dblclick","pre",function(){var b=$(this).closest(".share-memo"),c=$(this).find("table tr").length-1;a(b,c)}),$(".share-memo").on("click",".diff-button",function(){var a=$(this).closest(".share-memo");b(a,1);var c=a.find(".diff-list"),d=a.data("no"),e=g.text_logs[d];if(void 0!=e&&0!=e.length){g.writing_text[d].date!=e[0].date&&e.unshift(g.writing_text[d]),c.empty(),c.append($("<li/>").append($("<a/>").addClass("diff-li").attr("href","#").html('<i class="icon-play"></i> Current memo - '+e[0].name)));for(var f=1;f<e.length;f++)c.append($("<li/>").append($("<a/>").addClass("diff-li").attr("href","#").html(e[f].date+" - "+e[f].name)))}}),$(".share-memo").on("mouseover",".diff-li",function(){var a=$(this).closest(".diff-list").find(".diff-li"),b=a.index(this);a.each(function(a,c){b>a?$(c).addClass("in_diff_range"):a>b&&$(c).removeClass("in_diff_range")})}),$(".share-memo").on("mouseout",".diff-li",function(){var a=$(this).closest(".diff-list").find(".diff-li");a.each(function(a,b){$(b).removeClass("in_diff_range")})}),$(".share-memo").on("click",".diff-li",function(){var a=$(this).closest(".share-memo"),b=a.find("pre"),c=a.data("no"),d=$(this).closest(".diff-list").find(".diff-li").index(this),e=difflib.stringAsLines(g.text_logs[c][d].text),f=difflib.stringAsLines(g.writing_text[c].text),h=new difflib.SequenceMatcher(e,f),i=h.get_opcodes(),j=a.find(".diff-view");return j.empty(),j.append(diffview.buildView({baseTextLines:e,newTextLines:f,opcodes:i,baseTextName:"Current",newTextName:g.text_logs[c][d].date+" - "+g.text_logs[c][d].name,viewType:1})),j.fadeIn(),b.hide(),a.find(".diff-done").show(),a.find(".sync-text").hide(),a.find(".index-button").hide(),!0}),$(".share-memo").on("click",".diff-done",function(){var a=$(this).closest(".share-memo");a.find("pre").fadeIn(),a.find(".diff-view").hide(),a.find(".diff-done").hide(),a.find(".sync-text").show(),a.find(".index-button").show()}),$(".share-memo").on("click",".index-button",function(){var a=$(this).closest(".share-memo");b(a,1);var c=a.find(".index-list"),d=a.find(".code-out");c.empty(),d.find(":header").each(function(){for(var a=parseInt($(this).get()[0].localName.replace("h","")),b="",d=1;a>d;d++)b+="&emsp;";c.append($("<li/>").append($("<a/>").addClass("index-li").attr("href","#").html(b+" "+$(this).text())))})}),$(".share-memo").on("click",".index-li",function(){var a=$(this).closest(".index-list").find(".index-li").index(this),b=$(this).closest(".share-memo").find(".code-out"),c=b.find(":header").eq(a).offset().top;return $("#memo_area").animate({scrollTop:c-CODE_INDEX_ADJUST_HEIGHT},"fast"),!0}),$(".share-memo").decora({checkbox_callback:function(a,b){var c=$(a).closest(".share-memo").data("no");g.writing_text[c].text=b(g.writing_text[c].text);var d=$(a).closest(".share-memo").children(".code");d.val(g.writing_text[c].text),socket.emit("text",{no:c,text:d.val()})}}),$("#share-memo").on("click",".share-memo-tab-elem",function(){var a=j.code_no;return 0!=a&&($share_memo=$("#share_memo_"+a),b($share_memo,1)),$("#memo_area").animate({scrollTop:0},"fast"),!0}),$(".share-memo").on("dblclick",".code",function(){b($(this).parent(),$(this).caretLine())}),$(".share-memo").on("click",".fix-text",function(){b($(this).parent(),1)}),$(".share-memo").on("keydown",".code",function(a){return 1==a.ctrlKey&&83==a.keyCode||1==a.ctrlKey&&13==a.keyCode?(a.returnvalue=!1,b($(this).parent(),$(this).caretLine()),!1):void 0});var h=[];socket.on("text",function(a){var c=void 0==a.no?1:a.no;g.writing_text[c]=a;var e=$("#share_memo_"+c),f=$("#share_memo_tab_"+c);c==j.code_no?g.login_name!=a.name&&b(e,e.children(".code").caretLine()):d(e,a.text);var i=e.children(".text-date");i.html(a.date),i.removeClass("label-info"),i.addClass("label-important"),i.show();var k=$("<div/>").html($.decora.to_html(a.text.split("\n")[0])).text();k.match(/\S/g)||(k=" - No."+c+" - ");var l=f.children("span").html(k);emojify.run(l.get(0));var m=f.children(".writer");m.addClass("silent-name writing-name"),m.html(a.name);var n=f.find(".timestamp");n.attr("data-livestamp",a.date);var o=""==a.text;o?(m.hide(),n.hide()):(m.show(),n.show()),h[c]&&clearTimeout(h[c]),h[c]=setTimeout(function(){i.html(a.date),i.removeClass("label-important"),i.addClass("label-info"),m.removeClass("writing-name"),h[c]=void 0},3e3)}),socket.on("text_logs_with_no",function(a){g.text_logs[a.no]=a.logs});var i="",j={id:-1,code_no:0};$("#memo_number").bind("change",function(){var a=$(this).val();socket.emit("memo_number",{num:a})}),socket.on("memo_number",function(a){var b=a.num;$(".share-memo-tab-elem").hide();for(var c=1;b>=c;c++)$("#share_memo_tab_"+c).fadeIn("fast"),$("#share_memo_tab_"+c).css("display","block");$("#memo_number").val(b)})},init_dropzone:function(){var a=this;new DropZone({dropTarget:$(".code-out"),dropChildSelector:".code-out-tr",alertTarget:$("#alert_memo_area"),uploadedAction:function(b,c){var d=$(b).closest(".share-memo").data("no"),e=$(b).closest("table").find("tr").index(b),f=a.writing_text[d].text.split("\n");f.splice(e+1,0,c.fileName+" "),a.writing_text[d].text=f.join("\n");var g=$(b).closest(".share-memo").children(".code");g.val(a.writing_text[d].text),socket.emit("text",{no:d,text:g.val()})}}),new DropZone({dropTarget:$(".code-out"),alertTarget:$("#alert_memo_area"),uploadedAction:function(b,c){var d=$(b).closest(".share-memo").data("no");a.writing_text[d].text=c.fileName+" \n"+a.writing_text[d].text;var e=$(b).closest(".share-memo").children(".code");e.val(a.writing_text[d].text),socket.emit("text",{no:d,text:e.val()})}}),new DropZone({dropTarget:$(".code"),alertTarget:$("#alert_memo_area"),uploadedAction:function(b,c){var d=$(b).closest(".share-memo").data("no"),e=$(b).caretLine(),f=a.writing_text[d].text.split("\n");f.splice(e-1,0,c.fileName+" "),a.writing_text[d].text=f.join("\n");var g=$(b).closest(".share-memo").children(".code");g.val(a.writing_text[d].text)}})},setColorbox:function(a){a.colorbox({transition:"none",rel:"img",maxWidth:"100%",maxHeight:"100%",initialWidth:"200px",initialHeight:"200px"})}};var COOKIE_NAME="dev_hub_name",COOKIE_STYLE_NAME="dev_hub_style_name",COOKIE_EXPIRES=365,DEFAULT_STYLE_NAME="default",STYLE_CONFIG={"default":{white_icon:!0,css_file:"bootstrap.min.css"},journal:{white_icon:!1,css_file:"bootstrap.journal.css"},united:{white_icon:!0,css_file:"bootstrap.united.css"}},socket=io.connect("/"),is_mobile=!1,chatController=null,shareMemoController=null,faviconNumber=null;$(function(){init_websocket(),$(window).width()<768&&(is_mobile=!0),faviconNumber=new FaviconNumber({focus_id:"message"}),shareMemoController=new ShareMemoController({socket:socket}),chatController=new ChatController({socket:socket,faviconNumber:faviconNumber,changedLoginName:function(a){shareMemoController.setName(a),$.cookie(COOKIE_NAME,a,{expires:COOKIE_EXPIRES})}}),is_mobile?($(".hidden-phone").remove(),$(".visible-phone").show(),$(".text-date").remove(),$(".checkbox-count").remove(),adjust_display_size_for_mobile(),$(window).resize(function(){adjust_display_size_for_mobile()})):($("body").addClass("perfect-scrollbar-body-style"),$("#chat_area").addClass("perfect-scrollbar-style"),$("#chat_area").perfectScrollbar({wheelSpeed:40,useKeyboard:!1}),$("#memo_area").addClass("perfect-scrollbar-style"),$("#memo_area").perfectScrollbar({wheelSpeed:40,useKeyboard:!1}));var a=$.cookie(COOKIE_STYLE_NAME)||DEFAULT_STYLE_NAME;change_style(a),$('a[id^="style-"]').click(function(a){a.preventDefault();var b=$(a.target).attr("id").replace(/^style-/,"");change_style(b)}),null!=$.cookie(COOKIE_NAME)||is_mobile?(chatController.setName($.cookie(COOKIE_NAME)),chatController.focus()):setTimeout(function(){$("#name_in").modal("show"),setTimeout(function(){$("#login_name").focus()},500)},500),$(window).on("blur focus",function(){faviconNumber.off()}),$("#share_zen").click(function(){$("#memo_area").hasClass("memo-area")?$("#chat_area").fadeOut(function(){$("#memo_area").removeClass("memo-area span7"),$("#memo_area").addClass("memo-area-zen span11")}):($("#memo_area").removeClass("memo-area-zen span11"),$("#memo_area").addClass("memo-area span7"),$("#chat_area").fadeIn())})});