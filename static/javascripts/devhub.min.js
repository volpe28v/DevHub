function getSelectionCount(a){var b=a.document.selection.createRange();if(null==b||b.parentElement()!==a)return[0/0,0/0];var c=arguments[1]||a.value,d=c.length,e=a.createTextRange();e.moveToBookmark(b.getBookmark());var f=a.createTextRange();if(f.collapse(!1),e.compareEndPoints("StartToEnd",f)>=0)return[d,d];var g=arguments[2]||c.replace(/rn|r/g,"n"),h=-e.moveStart("character",-d);if(h+=g.slice(0,h).split("n").length-1,e.compareEndPoints("EndToEnd",f)>=0)return[h,d];var i=-e.moveEnd("character",-d);return i+=g.slice(0,i).split("n").length-1,[h,i]}function init_chat(){$("#chat_area").perfectScrollbar({wheelSpeed:40}),$("#list").on("click",".remove_msg",function(){var a="#"+$(this).closest("li").attr("id"),b=$(this).closest("li").data("id");$(a).fadeOut(),send_remove_msg(b)}),$("#list").on("click",".login-name-base",function(){var a=$(this).text();$("#message").val($("#message").val()+" @"+a+"さん "),$("#message").focus()})}function init_sharememo(){$("#memo_area").perfectScrollbar({wheelSpeed:40,useKeyboard:!1});for(var a=SHARE_MEMO_NUMBER;a>1;a--)$("#share_memo_tab_top").after($("<li/>").addClass("share-memo-tab").attr("data-no",a)),$("#share_memo_1").after($("<div/>").attr("id","share_memo_"+a).attr("data-no",a).addClass("share-memo tab-pane")),$("#memo_number_option_top").after($("<option/>").attr("value",a).html(a));$("#scroll_top").click(function(){$("#memo_area").animate({scrollTop:0},"fast")}),$("#share_zen").click(function(){$("#memo_area").hasClass("memo-area")?$("#chat_area").fadeOut(function(){$("#memo_area").removeClass("memo-area span7"),$("#memo_area").addClass("memo-area-zen span11")}):($("#memo_area").removeClass("memo-area-zen span11"),$("#memo_area").addClass("memo-area span7"),$("#chat_area").fadeIn())}),$(".share-memo-tab").each(function(){var a=$(this).data("no");$(this).append($("<a/>").html(a+" ").addClass("share-memo-tab-elem").attr("id","share_memo_tab_"+a).attr("href","#share_memo_"+a).attr("data-toggle","tab").attr("data-no",a).css("display","none").append($("<span/>")).append($("<div/>").addClass("writer")).append($("<div/>").append($("<span/>").addClass("timestamp"))))}),$(".share-memo").each(function(){$(this).append($("<button/>").addClass("sync-text btn btn-primary").css("float","left").html('<i class="icon-edit icon-white"></i> Edit')).append($("<button/>").addClass("fix-text btn btn-info").css("float","left").css("display","none").html('<i class="icon-edit icon-white"></i> Done')).append($("<button/>").addClass("diff-done btn btn-info").css("float","left").css("display","none").html('<i class="icon-resize-vertical icon-white"></i> Done')).append($("<div/>").addClass("btn-group").css("float","left").append($("<a/>").addClass("btn dropdown-toggle index-button").attr("data-toggle","dropdown").attr("href","#").html('<i class="icon-align-left"></i> Index ').append($("<span/>").addClass("caret"))).append($("<ul/>").addClass("dropdown-menu index-list"))).append($("<div/>").addClass("btn-group").css("float","left").append($("<a/>").addClass("btn dropdown-toggle diff-button").attr("data-toggle","dropdown").attr("href","#").html('<i class="icon-resize-vertical"></i> Diff ').append($("<span/>").addClass("caret"))).append($("<ul/>").addClass("dropdown-menu diff-list"))).append($("<span/>").addClass("text-writer label label-info")).append($("<span/>").addClass("checkbox-count").css("display","none")).append($("<textarea/>").addClass("code code-unselect").css("display","none").attr("placeholder","Write here")).append($("<pre/>").addClass("text-base-style").append($("<div/>").addClass("code-out"))).append($("<div/>").addClass("diff-view").css("display","none"))})}function init_websocket(){function a(a,b){var c=a.data("no");writing_text[c]=writing_text[c]?writing_text[c]:{text:""};var e=a.children(".code");e.val(writing_text[c].text),e.fadeIn("fast",function(){e.keyup(),e.caretLine(b),$("#memo_area").scrollTop(18*b-CODE_ADJUST_HEIGHT)}),a.children("pre").hide(),a.children(".fix-text").show(),a.children(".sync-text").hide(),d(c),h[c]=e.val()}function b(a,b){if("none"!=a.children(".code").css("display")){a.children(".code").hide(),a.children("pre").fadeIn(),a.children(".fix-text").hide(),a.children(".sync-text").show();var c=a.find("table tr").eq(b-1);c.length>0&&($("#memo_area").scrollTop(0),$("#memo_area").scrollTop(c.offset().top-CODE_OUT_ADJUST_HEIGHT)),socket.emit("add_history",{no:a.data("no")}),e()}}function c(a,b,c){$(".share-memo-tab:visible").each(function(){var b=$(this).data("no");a.append($("<li/>").append($("<a/>").html(b).click(function(){return function(){$("#share_memo_"+b).children(".code").val(c),$("#share_memo_tab_"+b).click(),$("html,body").animate({scrollTop:0},"slow"),socket.emit("text",{no:b,text:$("#share_memo_"+b).children(".code").val()})}()})))})}function d(a){$target_code=$("#share_memo_"+a).children(".code");var b=function(){var b=$target_code.val();h[a]!=b&&(socket.emit("text",{no:a,text:b}),h[a]=b)};-1!=i.id&&e(),i={id:setInterval(b,400),code_no:a}}function e(){clearInterval(i.id),i={id:-1,code_no:0}}socket.on("connect",function(){socket.emit("name",{name:$.cookie(COOKIE_NAME)})}),socket.on("disconnect",function(){}),socket.on("set_name",function(a){$("#name").val(a),$("#login_name").val(a)}),socket.on("message_own",function(a){prepend_own_msg(a),newest_mark()}),socket.on("message",function(a){prepend_msg(a),newest_mark()}),socket.on("remove_message",function(a){$("#msg_"+a.id).fadeOut()}),socket.on("list",function(a){$("#login_list_loader").hide();for(var b="",c=0;c<a.length;++c){var d="",e="";""!=a[c].place&&(e="@"+a[c].place),d=a[c].pomo_min>0?'<span class="login-elem login-name-pomo"><span class="name">'+a[c].name+"</span>"+e+' <span class="pomo-min">'+a[c].pomo_min+"min</span></span>":'<span class="login-elem login-name'+get_color_id_by_name_id(a[c].id)+'"><span class="name">'+a[c].name+"</span>"+e+"</span>",b+=d+"<wbr>"}b="<nobr>"+b+"</nobr>",$("#login_list").html()!=b&&($("#login_list").html(b),$("#login_list").fadeIn(),suggest_start(a),$("#login_list .login-elem").click(function(){var a=$(this).children(".name").text();$("#message").val($("#message").val()+" @"+a+"さん "),$("#message").focus()})),latest_login_list=a.sort(function(a,b){return b.name.length-a.name.length})}),socket.on("latest_log",function(a){for(var b=0;b<a.length;b++)append_msg(a[b])}),$("#form").submit(function(){var a=$("#name").val(),b=$("#message").val();return $.cookie(COOKIE_NAME,a,{expires:COOKIE_EXPIRES}),b&&a&&(login_name=a,socket.emit("message",{name:a,msg:b}),$("#message").attr("value","")),!1}),$(".code").autofit({min_height:CODE_MIN_HEIGHT}),$(".share-memo").on("click",".sync-text",function(){var b=$(this).closest(".share-memo");a(b,0)}),$(".share-memo").on("dblclick","pre tr",function(){var b=$(this).closest(".share-memo"),c=$(this).closest("table").find("tr").index(this);return a(b,c),!1}),$(".share-memo").on("dblclick","pre",function(){var b=$(this).closest(".share-memo"),c=$(this).find("table tr").length-1;a(b,c)}),$(".share-memo").on("click",".diff-button",function(){var a=$(this).closest(".share-memo");b(a,1);var c=a.find(".diff-list"),d=a.data("no"),e=text_logs[d];if(void 0!=e&&0!=e.length){writing_text[d].date!=e[0].date&&e.unshift(writing_text[d]),c.empty(),c.append($("<li/>").append($("<a/>").addClass("diff-li").attr("href","#").html('<i class="icon-play"></i> Current memo - '+e[0].name)));for(var f=1;f<e.length;f++)c.append($("<li/>").append($("<a/>").addClass("diff-li").attr("href","#").html(e[f].date+" - "+e[f].name)))}}),$(".share-memo").on("mouseover",".diff-li",function(){var a=$(this).closest(".diff-list").find(".diff-li"),b=a.index(this);a.each(function(a,c){b>a?$(c).addClass("in_diff_range"):a>b&&$(c).removeClass("in_diff_range")})}),$(".share-memo").on("mouseout",".diff-li",function(){var a=$(this).closest(".diff-list").find(".diff-li");a.each(function(a,b){$(b).removeClass("in_diff_range")})}),$(".share-memo").on("click",".diff-li",function(){var a=$(this).closest(".share-memo"),b=a.find("pre"),c=a.data("no"),d=$(this).closest(".diff-list").find(".diff-li").index(this),e=difflib.stringAsLines(text_logs[c][d].text),f=difflib.stringAsLines(writing_text[c].text),g=new difflib.SequenceMatcher(e,f),h=g.get_opcodes(),i=a.find(".diff-view");return i.empty(),i.append(diffview.buildView({baseTextLines:e,newTextLines:f,opcodes:h,baseTextName:"Current",newTextName:text_logs[c][d].date+" - "+text_logs[c][d].name,viewType:1})),i.fadeIn(),b.hide(),a.find(".diff-done").show(),a.find(".sync-text").hide(),a.find(".index-button").hide(),!0}),$(".share-memo").on("click",".diff-done",function(){var a=$(this).closest(".share-memo");a.find("pre").fadeIn(),a.find(".diff-view").hide(),a.find(".diff-done").hide(),a.find(".sync-text").show(),a.find(".index-button").show()}),$(".share-memo").on("click",".index-button",function(){var a=$(this).closest(".share-memo");b(a,1);var c=a.find(".index-list"),d=a.find(".code-out");c.empty(),d.find(":header").each(function(){for(var a=parseInt($(this).get()[0].localName.replace("h","")),b="",d=1;a>d;d++)b+="&emsp;";c.append($("<li/>").append($("<a/>").addClass("index-li").attr("href","#").html(b+" "+$(this).text())))})}),$(".share-memo").on("click",".index-li",function(){var a=$(this).closest(".index-list").find(".index-li").index(this),b=$(this).closest(".share-memo").find(".code-out"),c=b.find(":header").eq(a).offset().top;return $("#memo_area").animate({scrollTop:c-CODE_INDEX_ADJUST_HEIGHT},"fast"),!0}),$(".share-memo").decora({checkbox_callback:function(a,b){var c=$(a).closest(".share-memo").data("no");writing_text[c].text=b(writing_text[c].text);var d=$(a).closest(".share-memo").children(".code");d.val(writing_text[c].text),socket.emit("text",{no:c,text:d.val()})}}),$("#pomo").click(function(){var a=$("#name").val(),b=$("#message").val();return $.cookie(COOKIE_NAME,a,{expires:COOKIE_EXPIRES}),$("#message").attr("value",""),socket.emit("pomo",{name:a,msg:b}),!1});var f=function(){var a=$("#login_name").val();""!=a&&($.cookie(COOKIE_NAME,a,{expires:COOKIE_EXPIRES}),socket.emit("name",{name:$.cookie(COOKIE_NAME)}),$("#name").val($.cookie(COOKIE_NAME)),$("#message").focus()),$("#name_in").modal("hide")};$("#login").click(function(){f()}),$("#login_form").submit(function(){return f(),!1}),$("#share-memo").on("click",".share-memo-tab-elem",function(){var a=i.code_no;return 0!=a&&($share_memo=$("#share_memo_"+a),b($share_memo,1)),$("#memo_area").animate({scrollTop:0},"fast"),!0}),$(".share-memo").on("dblclick",".code",function(){b($(this).parent(),$(this).caretLine())}),$(".share-memo").on("click",".fix-text",function(){b($(this).parent(),1)}),$(".share-memo").on("keydown",".code",function(a){return 1==a.ctrlKey&&83==a.keyCode||1==a.ctrlKey&&13==a.keyCode?(a.returnvalue=!1,b($(this).parent(),$(this).caretLine()),!1):void 0});var g=[];socket.on("text",function(a){function c(a){var b="<table><tr><td>";return b+=a.replace(/[\n]/g,"</td></tr><tr><td>"),b+="</td></tr></table>"}var d=void 0==a.no?1:a.no;writing_text[d]=a;var e=$("#share_memo_"+d),f=$("#share_memo_tab_"+d);d==i.code_no&&login_name!=a.name&&b(e,e.children(".code").caretLine());var h=e.children(".text-writer");h.html(a.date),h.removeClass("label-info"),h.addClass("label-important"),h.show(),e.find(".code-out").html(c($.decora.to_html(a.text)));var j=e.find("input:checked").length,k=e.find("input[type=checkbox]").length;k>0?(e.find(".checkbox-count").html(j+"/"+k+" done").show(),j==k?e.find(".checkbox-count").addClass("checkbox-count-done"):e.find(".checkbox-count").removeClass("checkbox-count-done")):e.find(".checkbox-count").hide();var l=e.find(".code-out").text().split("\n")[0];f.children("span").html(l);var m=f.children(".writer");m.addClass("silent-name writing-name"),m.html(a.name);var n=f.find(".timestamp");n.attr("data-livestamp",a.date);var o=""==a.text;o?(m.hide(),n.hide()):(m.show(),n.show()),g[d]&&clearTimeout(g[d]),g[d]=setTimeout(function(){h.html(a.date),h.removeClass("label-important"),h.addClass("label-info"),m.removeClass("writing-name"),g[d]=void 0},3e3)}),socket.on("text_logs_with_no",function(a){text_logs[a.no]=a.logs}),socket.on("text_logs",function(a){for(var b=$("<dl/>"),d=0;d<a.length;++d){var e=(void 0==a[d].no?1:a[d].no,"text_log_id_"+a[d]._id.toString()),f=$.decora.to_html(a[d].text),g=$("<div/>").attr("id",e),h=$("<dt/>"),i=$("<span/>").addClass("label").text(a[d].name+" at "+a[d].date),j=($("<i/>").addClass("icon-repeat"),$("<div/>").addClass("btn-group").append($("<a/>").addClass("restore-log-button btn btn-mini dropdown-toggle").attr("data-toggle","dropdown").attr("data-no",d).html('<i class="icon-share-alt"></i> Restore to ').append($("<span/>").addClass("caret"))).append($("<ul/>").addClass("dropdown-menu"))),k=void 0;k=a[d].favo?$("<span/>").text("★").addClass("favo_star").toggle(function(){var b=a[d]._id.toString();return function(){$(this).removeClass("favo_star").addClass("no_favo_star").text("☆"),socket.emit("remove_favo_text",b)}}(),function(){var b=a[d]._id.toString();return function(){$(this).removeClass("no_favo_star").addClass("favo_star").text("★"),socket.emit("add_favo_text",b)}}()):$("<span/>").text("☆").addClass("no_favo_star").toggle(function(){var b=a[d]._id.toString();return function(){$(this).removeClass("no_favo_star").addClass("favo_star").text("★"),socket.emit("add_favo_text",b)}}(),function(){var b=a[d]._id.toString();return function(){$(this).removeClass("favo_star").addClass("no_favo_star").text("☆"),socket.emit("remove_favo_text",b)}}());var l=$('<a href="#" class="remove_text">x</a>').click(function(){var b=e,c=a[d]._id.toString();return function(){return $("#"+b).fadeOut("normal",function(){socket.emit("remove_text",c)}),!1}}()),m=$("<dd/>"),n=$("<pre/>").html(f);h.append($("<table/>").append($("<tr/>").append($("<td/>").append(k)).append($("<td/>").append(i)).append($("<td/>").append(j)))).append(l),m.append(n),g.append(h).append(m),b.append(g)}$("#auto_logs").empty(),$("#auto_logs").append(b),$(".restore-log-button").click(function(){var b=$(this).parent().children("ul"),d=$(this).data("no"),e=a[d].text;b.empty(),c(b,d,e)})}),socket.on("favo_logs",function(a){for(var b=$("<dl/>"),d=0;d<a.length;++d){var e=(void 0==a[d].no?1:a[d].no,"favo_log_id_"+a[d]._id.toString()),f=$.decora.to_html(a[d].text),g=$("<div/>").attr("id",e),h=$("<dt/>"),i=$("<span/>").addClass("label").addClass("label-warning").text(a[d].name+" at "+a[d].date),j=($("<i/>").addClass("icon-repeat"),$("<div/>").addClass("btn-group").append($("<a/>").addClass("restore-favo-button btn btn-mini dropdown-toggle").attr("data-toggle","dropdown").attr("data-no",d).html('<i class="icon-share-alt"></i> Restore to ').append($("<span/>").addClass("caret"))).append($("<ul/>").addClass("dropdown-menu"))),k=$('<a href="#" class="remove_text">x</a>').click(function(){var b=e,c=a[d]._id.toString();return function(){return $("#"+b).fadeOut("normal",function(){socket.emit("remove_favo_text",c)}),!1}}()),l=$("<dd/>"),m=$("<pre/>").html(f);h.append($("<table/>").append($("<tr/>").append($("<td/>").append(i)).append($("<td/>").append(j)))).append(k),l.append(m),g.append(h).append(l),b.append(g)}$("#favo_logs").empty(),$("#favo_logs").append(b),$(".restore-favo-button").click(function(){var b=$(this).parent().children("ul"),d=$(this).data("no"),e=a[d].text;b.empty(),c(b,d,e)})});var h=[],i={id:-1,code_no:0};$("#memo_number").bind("change",function(){var a=$(this).val();socket.emit("memo_number",{num:a})}),socket.on("memo_number",function(a){var b=a.num;$(".share-memo-tab-elem").hide();for(var c=1;b>=c;c++)$("#share_memo_tab_"+c).fadeIn("fast"),$("#share_memo_tab_"+c).css("display","block");$("#memo_number").val(b)})}function suggest_start(a){for(var b=[],c=0;c<a.length;++c)b.push("@"+a[c].name+"さん");void 0==suggest_obj?suggest_obj=new Suggest.LocalMulti("message","suggest",b,{interval:200,dispAllKey:!1,prefix:!0,highlight:!0}):suggest_obj.candidateList=b}function append_msg(a){if("System"!=a.name&&!exist_msg(a)){var b=get_msg_html(a);$("#list").append(b.li.addClass(b.css)),b.li.fadeIn()}}function prepend_own_msg(a){if(!exist_msg(a)){var b=get_msg_html(a);$("#list").prepend(b.li),b.li.addClass("text-highlight",0),b.li.slideDown("fast",function(){b.li.switchClass("text-highlight",b.css,500)})}}function send_remove_msg(a){socket.emit("remove_message",{id:a})}function prepend_msg(a){if("System"!=a.name&&!exist_msg(a)){var b=get_msg_html(a);$("#list").prepend(b.li),b.li.addClass("text-highlight",0),b.li.slideDown("fast",function(){b.li.switchClass("text-highlight",b.css,500)})}}function newest_mark(){return"message"==$(":focus").attr("id")?(newest_off(),void 0):(newest_count++,document.title="("+newest_count+") "+TITLE_ORG,void 0)}function newest_off(){newest_count=0,document.title=TITLE_ORG}function exist_msg(a){void 0==a.msg&&(a.msg="");var b="#msg_"+a._id.toString();return $(b).size()>0}function get_msg_html(a){return a.name==login_name?{li:get_msg_li_html(a).html(get_msg_body(a)+'<a class="remove_msg">x</a><span class="own_msg_date">'+a.date+"</span></td></tr></table>"),css:"own_msg"}:include_target_name(a.msg,login_name)?{li:get_msg_li_html(a).html(get_msg_body(a)+' <span class="target_msg_date">'+a.date+"</span></td></tr></table>"),css:"target_msg"}:{li:get_msg_li_html(a).html(get_msg_body(a)+' <span class="date">'+a.date+"</span></td></tr></table>"),css:null}}function get_msg_li_html(a){return void 0!=a._id?$("<li/>").attr("style","display:none").attr("id","msg_"+a._id.toString()).attr("data-id",a._id.toString()):$("<li/>").attr("style","display:none")}function get_msg_body(a){var b=new Date,c=(b.getTime(),"login-name"),d="msg";return a.id=get_id(a.name),"System"==a.name?(c="login-name-system",d="msg_ext"):1==a.ext?(c="login-name-ext",d="msg_ext"):"Pomo"==a.name?(c="login-name-pomosys",d="msg_pomo"):c="login-name"+get_color_id_by_name_id(a.id),'<table><tr><td nowrap valign="top"><span class="login-name-base '+c+'">'+a.name+'</span></td><td width="100%"><span class="msg_text '+d+'">'+decorate_msg(a.msg)+"</span>"}function get_color_id_by_name_id(a){return 0==a?0:a%LOGIN_COLOR_MAX+1}function decorate_msg(a){var b=a;return b=deco_login_name(b),b=$.decora.message_to_html(b)}function deco_login_name(a){var b=a,c=RegExp("@(.+?)さん","g");return b=b.replace(c,function(){return arguments[1]==login_name?'<span class="label label-important">'+arguments[0]+"</span>":'<span class="label label-info">'+arguments[0]+"</span>"})}function include_target_name(a,b){var c=RegExp("@"+b+"( |　|さん|$)");return a.match(c)?!0:!1}function get_id(a){for(var b=0;b<latest_login_list.length;++b)if(latest_login_list[b].name==a)return latest_login_list[b].id;return 0}function change_style(a){if(!(a in STYLE_CONFIG))throw Error("invalid style name: "+a);var b=STYLE_CONFIG[a],c=b.css_file;$("#devhub-style").attr("href","/stylesheets/"+c),$.cookie(COOKIE_STYLE_NAME,a,{expires:COOKIE_EXPIRES});var d=$('.nav i[class^="icon-"]');b.white_icon?d.addClass("icon-white"):d.removeClass("icon-white")}function show_share_memo_alert(a,b){$(".share-memo-alert").remove();$("<div>").addClass("share-memo-alert alert alert-error").css("display","none").html('<a class="close" data-dismiss="alert">x</a><strong>'+a+"</strong> "+b).prependTo($("#share-memo")).slideDown("normal",function(){var a=this;setTimeout(function(){$(a)&&$(a).slideUp("normal",function(){$(this).remove()})},5e3)})}function show_share_memo_uploading(a,b){$(".share-memo-alert").remove();$("<div>").addClass("share-memo-alert alert alert-info").css("display","none").html('<a class="close" data-dismiss="alert">x</a><strong>'+a+"</strong> "+b).prependTo($("#share-memo")).slideDown("normal")}function hide_share_memo_alert(){$(".share-memo-alert").slideUp("normal",function(){$(this).remove()})}function init_dropzone(){if(!window.FileReader)return show_share_memo_alert("Drop image","This browser does not support dropping image files."),!1;var a=function(a){return a.preventDefault(),a.stopPropagation(),!1},b=function(a){return function(b){var c=this,d=b.originalEvent.dataTransfer.files[0];show_share_memo_uploading("Uploading",'now uploading "'+d.name+'" ... ');var e=new FormData;return e.append("file",d),$.ajax("/upload",{type:"POST",contentType:!1,processData:!1,data:e,error:function(){show_share_memo_alert("Drop error","failed to file upload.")},success:function(b){hide_share_memo_alert(),a(c,b)}}),!1}},c=$(".code-out");c.bind("dradenter",a),c.bind("dragover",a),c.on("drop",b(function(a,b){var c=$(a).closest(".share-memo").data("no");writing_text[c].text=b.fileName+" \n"+writing_text[c].text;var d=$(a).closest(".share-memo").children(".code");d.val(writing_text[c].text),socket.emit("text",{no:c,text:d.val()})}));var d=$("#chat_area");d.bind("dradenter",a),d.bind("dragover",a),d.on("drop",b(function(a,b){$("#message").val($("#message").val()+" "+b.fileName+" ")}))}if(function(a){a.cookie=function(b,c,d){if(arguments.length>1&&(!/Object/.test(Object.prototype.toString.call(c))||null===c||void 0===c)){if(d=a.extend({},d),(null===c||void 0===c)&&(d.expires=-1),"number"==typeof d.expires){var e=d.expires,f=d.expires=new Date;f.setDate(f.getDate()+e)}return c=String(c),document.cookie=[encodeURIComponent(b),"=",d.raw?c:encodeURIComponent(c),d.expires?"; expires="+d.expires.toUTCString():"",d.path?"; path="+d.path:"",d.domain?"; domain="+d.domain:"",d.secure?"; secure":""].join("")}d=c||{};for(var g,h=d.raw?function(a){return a}:decodeURIComponent,i=document.cookie.split("; "),j=0;g=i[j]&&i[j].split("=");j++)if(h(g[0])===b)return h(g[1]||"");return null}}(jQuery),function(a){a.fn.autofit=function(b){var c={min_height:200},d=function(b,c){if(a(b).is(":visible")){var d=a(b).get(0);if(d.scrollHeight>d.offsetHeight)d.style.height=d.scrollHeight+"px";else if(!isNaN(parseInt(d.style.height))){for(;d.scrollHeight-50<parseInt(d.style.height);){if(parseInt(d.style.height)<c)return d.style.height=c+"px",d.style.height=d.scrollHeight+"px",void 0;d.style.height=parseInt(d.style.height)-50+"px"}arguments.callee(b,c)}}},b=a.extend(c,b);return this.each(function(){a(this).css("overflow","hidden"),a(this).css("height",b.min_height+"px"),d(this,b.min_height),a(this).on("keyup",function(a){(void 0==a.keyCode||13==a.keyCode)&&d(this,b.min_height)})}),this}}(jQuery),function(a){function b(a,b){return function(c){return i(a.call(this,c),b)}}function c(a,b){return function(c){return this.lang().ordinal(a.call(this,c),b)}}function d(){}function e(a){g(this,a)}function f(a){var b=a.years||a.year||a.y||0,c=a.months||a.month||a.M||0,d=a.weeks||a.week||a.w||0,e=a.days||a.day||a.d||0,f=a.hours||a.hour||a.h||0,g=a.minutes||a.minute||a.m||0,h=a.seconds||a.second||a.s||0,i=a.milliseconds||a.millisecond||a.ms||0;this._input=a,this._milliseconds=+i+1e3*h+6e4*g+36e5*f,this._days=+e+7*d,this._months=+c+12*b,this._data={},this._bubble()}function g(a,b){for(var c in b)b.hasOwnProperty(c)&&(a[c]=b[c]);return a}function h(a){return 0>a?Math.ceil(a):Math.floor(a)}function i(a,b){for(var c=a+"";c.length<b;)c="0"+c;return c}function j(a,b,c,d){var e,f,g=b._milliseconds,h=b._days,i=b._months;g&&a._d.setTime(+a._d+g*c),(h||i)&&(e=a.minute(),f=a.hour()),h&&a.date(a.date()+h*c),i&&a.month(a.month()+i*c),g&&!d&&L.updateOffset(a),(h||i)&&(a.minute(e),a.hour(f))}function k(a){return"[object Array]"===Object.prototype.toString.call(a)}function l(a,b){var c,d=Math.min(a.length,b.length),e=Math.abs(a.length-b.length),f=0;for(c=0;d>c;c++)~~a[c]!==~~b[c]&&f++;return f+e}function m(a){return a?ib[a]||a.toLowerCase().replace(/(.)s$/,"$1"):a}function n(a,b){return b.abbr=a,P[a]||(P[a]=new d),P[a].set(b),P[a]}function o(a){delete P[a]}function p(a){if(!a)return L.fn._lang;if(!P[a]&&Q)try{require("./lang/"+a)}catch(b){return L.fn._lang}return P[a]||L.fn._lang}function q(a){return a.match(/\[.*\]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function r(a){var b,c,d=a.match(T);for(b=0,c=d.length;c>b;b++)d[b]=mb[d[b]]?mb[d[b]]:q(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function s(a,b){return b=t(b,a.lang()),jb[b]||(jb[b]=r(b)),jb[b](a)}function t(a,b){function c(a){return b.longDateFormat(a)||a}for(var d=5;d--&&(U.lastIndex=0,U.test(a));)a=a.replace(U,c);return a}function u(a,b){switch(a){case"DDDD":return X;case"YYYY":return Y;case"YYYYY":return Z;case"S":case"SS":case"SSS":case"DDD":return W;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return $;case"a":case"A":return p(b._l)._meridiemParse;case"X":return bb;case"Z":case"ZZ":return _;case"T":return ab;case"MM":case"DD":case"YY":case"HH":case"hh":case"mm":case"ss":case"M":case"D":case"d":case"H":case"h":case"m":case"s":return V;default:return new RegExp(a.replace("\\",""))}}function v(a){var b=(_.exec(a)||[])[0],c=(b+"").match(fb)||["-",0,0],d=+(60*c[1])+~~c[2];return"+"===c[0]?-d:d}function w(a,b,c){var d,e=c._a;switch(a){case"M":case"MM":null!=b&&(e[1]=~~b-1);break;case"MMM":case"MMMM":d=p(c._l).monthsParse(b),null!=d?e[1]=d:c._isValid=!1;break;case"D":case"DD":null!=b&&(e[2]=~~b);break;case"DDD":case"DDDD":null!=b&&(e[1]=0,e[2]=~~b);break;case"YY":e[0]=~~b+(~~b>68?1900:2e3);break;case"YYYY":case"YYYYY":e[0]=~~b;break;case"a":case"A":c._isPm=p(c._l).isPM(b);break;case"H":case"HH":case"h":case"hh":e[3]=~~b;break;case"m":case"mm":e[4]=~~b;break;case"s":case"ss":e[5]=~~b;break;case"S":case"SS":case"SSS":e[6]=~~(1e3*("0."+b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=v(b)}null==b&&(c._isValid=!1)}function x(a){var b,c,d,e=[];if(!a._d){for(d=z(a),b=0;3>b&&null==a._a[b];++b)a._a[b]=e[b]=d[b];for(;7>b;b++)a._a[b]=e[b]=null==a._a[b]?2===b?1:0:a._a[b];e[3]+=~~((a._tzm||0)/60),e[4]+=~~((a._tzm||0)%60),c=new Date(0),a._useUTC?(c.setUTCFullYear(e[0],e[1],e[2]),c.setUTCHours(e[3],e[4],e[5],e[6])):(c.setFullYear(e[0],e[1],e[2]),c.setHours(e[3],e[4],e[5],e[6])),a._d=c}}function y(a){var b=a._i;a._d||(a._a=[b.years||b.year||b.y,b.months||b.month||b.M,b.days||b.day||b.d,b.hours||b.hour||b.h,b.minutes||b.minute||b.m,b.seconds||b.second||b.s,b.milliseconds||b.millisecond||b.ms],x(a))}function z(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function A(a){var b,c,d,e=p(a._l),f=""+a._i;for(d=t(a._f,e).match(T),a._a=[],b=0;b<d.length;b++)c=(u(d[b],a).exec(f)||[])[0],c&&(f=f.slice(f.indexOf(c)+c.length)),mb[d[b]]&&w(d[b],c,a);f&&(a._il=f),a._isPm&&a._a[3]<12&&(a._a[3]+=12),a._isPm===!1&&12===a._a[3]&&(a._a[3]=0),x(a)}function B(a){var b,c,d,f,h,i=99;for(f=0;f<a._f.length;f++)b=g({},a),b._f=a._f[f],A(b),c=new e(b),h=l(b._a,c.toArray()),c._il&&(h+=c._il.length),i>h&&(i=h,d=c);g(a,d)}function C(a){var b,c=a._i,d=cb.exec(c);if(d){for(a._f="YYYY-MM-DD"+(d[2]||" "),b=0;4>b;b++)if(eb[b][1].exec(c)){a._f+=eb[b][0];break}_.exec(c)&&(a._f+=" Z"),A(a)}else a._d=new Date(c)}function D(b){var c=b._i,d=R.exec(c);c===a?b._d=new Date:d?b._d=new Date(+d[1]):"string"==typeof c?C(b):k(c)?(b._a=c.slice(0),x(b)):c instanceof Date?b._d=new Date(+c):"object"==typeof c?y(b):b._d=new Date(c)}function E(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function F(a,b,c){var d=O(Math.abs(a)/1e3),e=O(d/60),f=O(e/60),g=O(f/24),h=O(g/365),i=45>d&&["s",d]||1===e&&["m"]||45>e&&["mm",e]||1===f&&["h"]||22>f&&["hh",f]||1===g&&["d"]||25>=g&&["dd",g]||45>=g&&["M"]||345>g&&["MM",O(g/30)]||1===h&&["y"]||["yy",h];return i[2]=b,i[3]=a>0,i[4]=c,E.apply({},i)}function G(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=L(a).add("d",f),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function H(a){var b=a._i,c=a._f;return null===b||""===b?null:("string"==typeof b&&(a._i=b=p().preparse(b)),L.isMoment(b)?(a=g({},b),a._d=new Date(+b._d)):c?k(c)?B(a):A(a):D(a),new e(a))}function I(a,b){L.fn[a]=L.fn[a+"s"]=function(a){var c=this._isUTC?"UTC":"";return null!=a?(this._d["set"+c+b](a),L.updateOffset(this),this):this._d["get"+c+b]()}}function J(a){L.duration.fn[a]=function(){return this._data[a]}}function K(a,b){L.duration.fn["as"+a]=function(){return+this/b}}for(var L,M,N="2.2.1",O=Math.round,P={},Q="undefined"!=typeof module&&module.exports,R=/^\/?Date\((\-?\d+)/i,S=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)\:(\d+)\.?(\d{3})?/,T=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|SS?S?|X|zz?|ZZ?|.)/g,U=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,V=/\d\d?/,W=/\d{1,3}/,X=/\d{3}/,Y=/\d{1,4}/,Z=/[+\-]?\d{1,6}/,$=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,_=/Z|[\+\-]\d\d:?\d\d/i,ab=/T/i,bb=/[\+\-]?\d+(\.\d{1,3})?/,cb=/^\s*\d{4}-\d\d-\d\d((T| )(\d\d(:\d\d(:\d\d(\.\d\d?\d?)?)?)?)?([\+\-]\d\d:?\d\d)?)?/,db="YYYY-MM-DDTHH:mm:ssZ",eb=[["HH:mm:ss.S",/(T| )\d\d:\d\d:\d\d\.\d{1,3}/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],fb=/([\+\-]|\d\d)/gi,gb="Date|Hours|Minutes|Seconds|Milliseconds".split("|"),hb={Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6},ib={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",w:"week",W:"isoweek",M:"month",y:"year"},jb={},kb="DDD w W M D d".split(" "),lb="M D H h m s w W".split(" "),mb={M:function(){return this.month()+1},MMM:function(a){return this.lang().monthsShort(this,a)},MMMM:function(a){return this.lang().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.lang().weekdaysMin(this,a)},ddd:function(a){return this.lang().weekdaysShort(this,a)},dddd:function(a){return this.lang().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return i(this.year()%100,2)},YYYY:function(){return i(this.year(),4)},YYYYY:function(){return i(this.year(),5)},gg:function(){return i(this.weekYear()%100,2)},gggg:function(){return this.weekYear()},ggggg:function(){return i(this.weekYear(),5)},GG:function(){return i(this.isoWeekYear()%100,2)},GGGG:function(){return this.isoWeekYear()},GGGGG:function(){return i(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.lang().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.lang().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return~~(this.milliseconds()/100)},SS:function(){return i(~~(this.milliseconds()/10),2)},SSS:function(){return i(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+i(~~(a/60),2)+":"+i(~~a%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+i(~~(10*a/6),4)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()}};kb.length;)M=kb.pop(),mb[M+"o"]=c(mb[M],M);for(;lb.length;)M=lb.pop(),mb[M+M]=b(mb[M],2);for(mb.DDDD=b(mb.DDD,3),g(d.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c,d;for(this._monthsParse||(this._monthsParse=[]),b=0;12>b;b++)if(this._monthsParse[b]||(c=L.utc([2e3,b]),d="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=new RegExp(d.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,d;
for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=L([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"==typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return G(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6}}),L=function(a,b,c){return H({_i:a,_f:b,_l:c,_isUTC:!1})},L.utc=function(a,b,c){return H({_useUTC:!0,_isUTC:!0,_l:c,_i:a,_f:b}).utc()},L.unix=function(a){return L(1e3*a)},L.duration=function(a,b){var c,d,e=L.isDuration(a),g="number"==typeof a,h=e?a._input:g?{}:a,i=S.exec(a);return g?b?h[b]=a:h.milliseconds=a:i&&(c="-"===i[1]?-1:1,h={y:0,d:~~i[2]*c,h:~~i[3]*c,m:~~i[4]*c,s:~~i[5]*c,ms:~~i[6]*c}),d=new f(h),e&&a.hasOwnProperty("_lang")&&(d._lang=a._lang),d},L.version=N,L.defaultFormat=db,L.updateOffset=function(){},L.lang=function(a,b){return a?(a=a.toLowerCase(),a=a.replace("_","-"),b?n(a,b):null===b?(o(a),a="en"):P[a]||p(a),L.duration.fn._lang=L.fn._lang=p(a),void 0):L.fn._lang._abbr},L.langData=function(a){return a&&a._lang&&a._lang._abbr&&(a=a._lang._abbr),p(a)},L.isMoment=function(a){return a instanceof e},L.isDuration=function(a){return a instanceof f},g(L.fn=e.prototype,{clone:function(){return L(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){return s(L(this).utc(),"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return null==this._isValid&&(this._isValid=this._a?!l(this._a,(this._isUTC?L.utc(this._a):L(this._a)).toArray()):!isNaN(this._d.getTime())),!!this._isValid},invalidAt:function(){var a,b=this._a,c=(this._isUTC?L.utc(this._a):L(this._a)).toArray();for(a=6;a>=0&&b[a]===c[a];--a);return a},utc:function(){return this.zone(0)},local:function(){return this.zone(0),this._isUTC=!1,this},format:function(a){var b=s(this,a||L.defaultFormat);return this.lang().postformat(b)},add:function(a,b){var c;return c="string"==typeof a?L.duration(+b,a):L.duration(a,b),j(this,c,1),this},subtract:function(a,b){var c;return c="string"==typeof a?L.duration(+b,a):L.duration(a,b),j(this,c,-1),this},diff:function(a,b,c){var d,e,f=this._isUTC?L(a).zone(this._offset||0):L(a).local(),g=6e4*(this.zone()-f.zone());return b=m(b),"year"===b||"month"===b?(d=432e5*(this.daysInMonth()+f.daysInMonth()),e=12*(this.year()-f.year())+(this.month()-f.month()),e+=(this-L(this).startOf("month")-(f-L(f).startOf("month")))/d,e-=6e4*(this.zone()-L(this).startOf("month").zone()-(f.zone()-L(f).startOf("month").zone()))/d,"year"===b&&(e/=12)):(d=this-f,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-g)/864e5:"week"===b?(d-g)/6048e5:d),c?e:h(e)},from:function(a,b){return L.duration(this.diff(a)).lang(this.lang()._abbr).humanize(!b)},fromNow:function(a){return this.from(L(),a)},calendar:function(){var a=this.diff(L().zone(this.zone()).startOf("day"),"days",!0),b=-6>a?"sameElse":-1>a?"lastWeek":0>a?"lastDay":1>a?"sameDay":2>a?"nextDay":7>a?"nextWeek":"sameElse";return this.format(this.lang().calendar(b,this))},isLeapYear:function(){var a=this.year();return 0===a%4&&0!==a%100||0===a%400},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?"string"==typeof a&&(a=this.lang().weekdaysParse(a),"number"!=typeof a)?this:this.add({d:a-b}):b},month:function(a){var b,c=this._isUTC?"UTC":"";return null!=a?"string"==typeof a&&(a=this.lang().monthsParse(a),"number"!=typeof a)?this:(b=this.date(),this.date(1),this._d["set"+c+"Month"](a),this.date(Math.min(b,this.daysInMonth())),L.updateOffset(this),this):this._d["get"+c+"Month"]()},startOf:function(a){switch(a=m(a)){case"year":this.month(0);case"month":this.date(1);case"week":case"isoweek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a?this.weekday(0):"isoweek"===a&&this.isoWeekday(1),this},endOf:function(a){return a=m(a),this.startOf(a).add("isoweek"===a?"week":a,1).subtract("ms",1)},isAfter:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)>+L(a).startOf(b)},isBefore:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)<+L(a).startOf(b)},isSame:function(a,b){return b="undefined"!=typeof b?b:"millisecond",+this.clone().startOf(b)===+L(a).startOf(b)},min:function(a){return a=L.apply(null,arguments),this>a?this:a},max:function(a){return a=L.apply(null,arguments),a>this?this:a},zone:function(a){var b=this._offset||0;return null==a?this._isUTC?b:this._d.getTimezoneOffset():("string"==typeof a&&(a=v(a)),Math.abs(a)<16&&(a=60*a),this._offset=a,this._isUTC=!0,b!==a&&j(this,L.duration(b-a,"m"),1,!0),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},hasAlignedHourOffset:function(a){return a=a?L(a).zone():0,0===(this.zone()-a)%60},daysInMonth:function(){return L.utc([this.year(),this.month()+1,0]).date()},dayOfYear:function(a){var b=O((L(this).startOf("day")-L(this).startOf("year"))/864e5)+1;return null==a?b:this.add("d",a-b)},weekYear:function(a){var b=G(this,this.lang()._week.dow,this.lang()._week.doy).year;return null==a?b:this.add("y",a-b)},isoWeekYear:function(a){var b=G(this,1,4).year;return null==a?b:this.add("y",a-b)},week:function(a){var b=this.lang().week(this);return null==a?b:this.add("d",7*(a-b))},isoWeek:function(a){var b=G(this,1,4).week;return null==a?b:this.add("d",7*(a-b))},weekday:function(a){var b=(this._d.getDay()+7-this.lang()._week.dow)%7;return null==a?b:this.add("d",a-b)},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},get:function(a){return a=m(a),this[a.toLowerCase()]()},set:function(a,b){a=m(a),this[a.toLowerCase()](b)},lang:function(b){return b===a?this._lang:(this._lang=p(b),this)}}),M=0;M<gb.length;M++)I(gb[M].toLowerCase().replace(/s$/,""),gb[M]);I("year","FullYear"),L.fn.days=L.fn.day,L.fn.months=L.fn.month,L.fn.weeks=L.fn.week,L.fn.isoWeeks=L.fn.isoWeek,L.fn.toJSON=L.fn.toISOString,g(L.duration.fn=f.prototype,{_bubble:function(){var a,b,c,d,e=this._milliseconds,f=this._days,g=this._months,i=this._data;i.milliseconds=e%1e3,a=h(e/1e3),i.seconds=a%60,b=h(a/60),i.minutes=b%60,c=h(b/60),i.hours=c%24,f+=h(c/24),i.days=f%30,g+=h(f/30),i.months=g%12,d=h(g/12),i.years=d},weeks:function(){return h(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+2592e6*(this._months%12)+31536e6*~~(this._months/12)},humanize:function(a){var b=+this,c=F(b,!a,this.lang());return a&&(c=this.lang().pastFuture(b,c)),this.lang().postformat(c)},add:function(a,b){var c=L.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this},subtract:function(a,b){var c=L.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this},get:function(a){return a=m(a),this[a.toLowerCase()+"s"]()},as:function(a){return a=m(a),this["as"+a.charAt(0).toUpperCase()+a.slice(1)+"s"]()},lang:L.fn.lang});for(M in hb)hb.hasOwnProperty(M)&&(K(M,hb[M]),J(M.toLowerCase()));K("Weeks",6048e5),L.duration.fn.asMonths=function(){return(+this-31536e6*this.years())/2592e6+12*this.years()},L.lang("en",{ordinal:function(a){var b=a%10,c=1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),Q&&(module.exports=L),"undefined"==typeof ender&&(this.moment=L),"function"==typeof define&&define.amd&&define("moment",[],function(){return L})}.call(this),moment.lang("ja",{months:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日".split("_"),weekdaysShort:"（日）_（月）_（火）_（水）_（木）_（金）_（土）".split("_"),weekdaysMin:"日_月_火_水_木_金_土".split("_"),longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D YYYY",LLL:"MMMM D YYYY LT",LLLL:"dddd, MMMM D YYYY LT"},meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"%s後",past:"%s前",s:"<font color=red>ちょっと</font>",m:"<font color=red>約1分</font>",mm:"<font color=red>%d分</font>",h:"<font color=red>約1時間</font>",hh:"<font color=orange>%d時間</font>",d:"1日",dd:"%d日",M:"1ヶ月",MM:"%dヶ月",y:"1年",yy:"%d年"},ordinal:function(a){var b=a%10;return 1===~~(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th"}}),!Suggest)var Suggest={};Suggest.Key={TAB:9,RETURN:13,ESC:27,UP:38,DOWN:40},Suggest.copyProperties=function(a,b){for(var c in b)a[c]=b[c];return a},Suggest.Local=function(){this.initialize.apply(this,arguments)},Suggest.Local.prototype={initialize:function(a,b,c){this.input=this._getElement(a),this.suggestArea=this._getElement(b),this.candidateList=c,this.oldText=this.getInputText(),arguments[3]&&this.setOptions(arguments[3]),this._addEvent(this.input,"focus",this._bind(this.checkLoop)),this._addEvent(this.input,"blur",this._bind(this.inputBlur));var d="keydown";(window.opera||navigator.userAgent.indexOf("Gecko")>=0&&-1==navigator.userAgent.indexOf("KHTML"))&&(d="keypress"),this._addEvent(this.input,d,this._bindEvent(this.keyEvent)),this.clearSuggestArea()},interval:500,dispMax:20,listTagName:"div",prefix:!1,ignoreCase:!0,highlight:!1,dispAllKey:!1,classMouseOver:"over",classSelect:"select",hookBeforeSearch:function(){},setOptions:function(a){Suggest.copyProperties(this,a)},inputBlur:function(){this.changeUnactive(),this.oldText=this.getInputText(),this.timerId&&clearTimeout(this.timerId),this.timerId=null,setTimeout(this._bind(this.clearSuggestArea),500)},checkLoop:function(){var a=this.getInputText();a!=this.oldText&&(this.oldText=a,this.search()),this.timerId&&clearTimeout(this.timerId),this.timerId=setTimeout(this._bind(this.checkLoop),this.interval)},search:function(){this.clearSuggestArea();var a=this.getInputText();if(""!=a&&null!=a){this.hookBeforeSearch(a);var b=this._search(a);0!=b.length&&this.createSuggestArea(b)}},_search:function(a){var b,c=[];this.suggestIndexList=[];for(var d=0,e=this.candidateList.length;e>d&&!(null!=(b=this.isMatch(this.candidateList[d],a))&&(c.push(b),this.suggestIndexList.push(d),0!=this.dispMax&&c.length>=this.dispMax));d++);return c},isMatch:function(a,b){if(null==a)return null;var c=this.ignoreCase?a.toLowerCase().indexOf(b.toLowerCase()):a.indexOf(b);return-1==c||this.prefix&&0!=c?null:this.highlight?this._escapeHTML(a.substr(0,c))+"<strong>"+this._escapeHTML(a.substr(c,b.length))+"</strong>"+this._escapeHTML(a.substr(c+b.length)):this._escapeHTML(a)},clearSuggestArea:function(){this.suggestArea.innerHTML="",this.suggestArea.style.display="none",this.suggestList=null,this.suggestIndexList=null,this.activePosition=null},createSuggestArea:function(a){this.suggestList=[],this.inputValueBackup=this.input.value;for(var b=0,c=a.length;c>b;b++){var d=document.createElement(this.listTagName);d.innerHTML=a[b],this.suggestArea.appendChild(d),this._addEvent(d,"click",this._bindEvent(this.listClick,b)),this._addEvent(d,"mouseover",this._bindEvent(this.listMouseOver,b)),this._addEvent(d,"mouseout",this._bindEvent(this.listMouseOut,b)),this.suggestList.push(d)}this.suggestArea.style.display="",this.suggestArea.scrollTop=0},getInputText:function(){return this.input.value},setInputText:function(a){this.input.value=a},keyEvent:function(a){this.timerId||(this.timerId=setTimeout(this._bind(this.checkLoop),this.interval)),this.dispAllKey&&a.ctrlKey&&""==this.getInputText()&&!this.suggestList&&a.keyCode==Suggest.Key.DOWN?(this._stopEvent(a),this.keyEventDispAll()):a.keyCode==Suggest.Key.UP||a.keyCode==Suggest.Key.DOWN?this.suggestList&&0!=this.suggestList.length&&(this._stopEvent(a),this.keyEventMove(a.keyCode)):a.keyCode==Suggest.Key.RETURN?this.suggestList&&0!=this.suggestList.length&&(this._stopEvent(a),this.keyEventReturn()):a.keyCode==Suggest.Key.ESC?this.suggestList&&0!=this.suggestList.length&&(this._stopEvent(a),this.keyEventEsc()):this.keyEventOther(a)},keyEventDispAll:function(){this.clearSuggestArea(),this.oldText=this.getInputText(),this.suggestIndexList=[];for(var a=0,b=this.candidateList.length;b>a;a++)this.suggestIndexList.push(a);this.createSuggestArea(this.candidateList)},keyEventMove:function(a){if(this.changeUnactive(),a==Suggest.Key.UP){if(null==this.activePosition)this.activePosition=this.suggestList.length-1;else if(this.activePosition--,this.activePosition<0)return this.activePosition=null,this.input.value=this.inputValueBackup,this.suggestArea.scrollTop=0,void 0}else if(null==this.activePosition?this.activePosition=0:this.activePosition++,this.activePosition>=this.suggestList.length)return this.activePosition=null,this.input.value=this.inputValueBackup,this.suggestArea.scrollTop=0,void 0;this.changeActive(this.activePosition)},keyEventReturn:function(){this.clearSuggestArea(),this.moveEnd()},keyEventEsc:function(){this.clearSuggestArea(),this.input.value=this.inputValueBackup,this.oldText=this.getInputText(),window.opera&&setTimeout(this._bind(this.moveEnd),5)},keyEventOther:function(){},changeActive:function(a){this.setStyleActive(this.suggestList[a]),this.setInputText(this.candidateList[this.suggestIndexList[a]]),this.oldText=this.getInputText(),this.input.focus()},changeUnactive:function(){null!=this.suggestList&&this.suggestList.length>0&&null!=this.activePosition&&this.setStyleUnactive(this.suggestList[this.activePosition])},listClick:function(a,b){this.changeUnactive(),this.activePosition=b,this.changeActive(b),this.moveEnd()},listMouseOver:function(a){this.setStyleMouseOver(this._getEventElement(a))},listMouseOut:function(a,b){if(this.suggestList){var c=this._getEventElement(a);b==this.activePosition?this.setStyleActive(c):this.setStyleUnactive(c)}},setStyleActive:function(a){a.className=this.classSelect;var b=a.offsetTop,c=b+a.clientHeight;this.suggestArea.scrollTop>b?this.suggestArea.scrollTop=b:this.suggestArea.scrollTop+this.suggestArea.clientHeight<c&&(this.suggestArea.scrollTop=c-this.suggestArea.clientHeight)},setStyleUnactive:function(a){a.className=""},setStyleMouseOver:function(a){a.className=this.classMouseOver},moveEnd:function(){if(this.input.createTextRange){this.input.focus();var a=this.input.createTextRange();a.move("character",this.input.value.length),a.select()}else this.input.setSelectionRange&&this.input.setSelectionRange(this.input.value.length,this.input.value.length)},_getElement:function(a){return"string"==typeof a?document.getElementById(a):a},_addEvent:window.addEventListener?function(a,b,c){a.addEventListener(b,c,!1)}:function(a,b,c){a.attachEvent("on"+b,c)},_stopEvent:function(a){a.preventDefault?(a.preventDefault(),a.stopPropagation()):(a.returnValue=!1,a.cancelBubble=!0)},_getEventElement:function(a){return a.target||a.srcElement},_bind:function(a){var b=this,c=Array.prototype.slice.call(arguments,1);return function(){a.apply(b,c)}},_bindEvent:function(a){var b=this,c=Array.prototype.slice.call(arguments,1);return function(d){d=d||window.event,a.apply(b,[d].concat(c))}},_escapeHTML:function(a){return a.replace(/\&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\"/g,"&quot;").replace(/\'/g,"&#39;")}},Suggest.LocalMulti=function(){this.initialize.apply(this,arguments)},Suggest.copyProperties(Suggest.LocalMulti.prototype,Suggest.Local.prototype),Suggest.LocalMulti.prototype.delim=" ",Suggest.LocalMulti.prototype.keyEventReturn=function(){this.clearSuggestArea(),this.input.value+=this.delim,this.moveEnd()},Suggest.LocalMulti.prototype.keyEventOther=function(a){a.keyCode==Suggest.Key.TAB&&this.suggestList&&0!=this.suggestList.length&&(this._stopEvent(a),this.activePosition||(this.activePosition=0,this.changeActive(this.activePosition)),this.clearSuggestArea(),this.input.value+=this.delim,window.opera?setTimeout(this._bind(this.moveEnd),5):this.moveEnd())},Suggest.LocalMulti.prototype.listClick=function(a,b){this.changeUnactive(),this.activePosition=b,this.changeActive(b),this.input.value+=this.delim,this.moveEnd()},Suggest.LocalMulti.prototype.getInputText=function(){var a=this.getLastTokenPos();return-1==a?this.input.value:this.input.value.substr(a+1)},Suggest.LocalMulti.prototype.setInputText=function(a){var b=this.getLastTokenPos();this.input.value=-1==b?a:this.input.value.substr(0,b+1)+a},Suggest.LocalMulti.prototype.getLastTokenPos=function(){return this.input.value.lastIndexOf(this.delim)},function(a,b){var c=1e3,d=!1,e=a([]),f=function(c,d){var f=c.data("livestampdata");"number"==typeof d&&(d*=1e3),c.removeAttr("data-livestamp").removeData("livestamp"),d=b(d),b.isMoment(d)&&!isNaN(+d)&&(f=a.extend({},{original:c.contents()},f),f.moment=b(d),c.data("livestampdata",f).empty(),e.push(c[0]))},g=function(){d||(h.update(),setTimeout(g,c))},h={update:function(){a("[data-livestamp]").each(function(){var b=a(this);f(b,b.data("livestamp"))});var c=[];e.each(function(){var d=a(this),e=d.data("livestampdata");if(void 0===e)c.push(this);else if(b.isMoment(e.moment)){var f=d.html(),e=e.moment.fromNow();if(f!=e){var g=a.Event("change.livestamp");d.trigger(g,[f,e]),g.isDefaultPrevented()||d.html(e)}}}),e=e.not(c)},pause:function(){d=!0},resume:function(){d=!1,g()},interval:function(a){return void 0===a?c:(c=a,void 0)}},i={add:function(c,d){return"number"==typeof d&&(d*=1e3),d=b(d),b.isMoment(d)&&!isNaN(+d)&&(c.each(function(){f(a(this),d)}),h.update()),c},destroy:function(b){return e=e.not(b),b.each(function(){var c=a(this),d=c.data("livestampdata");return void 0===d?b:(c.html(d.original?d.original:"").removeData("livestampdata"),void 0)}),b},isLivestamp:function(a){return void 0!==a.data("livestampdata")}};a.livestamp=h,a(function(){h.resume()}),a.fn.livestamp=function(a,b){return i[a]||(b=a,a="add"),i[a](this,b)}}(jQuery,moment),function(a){function b(a){var b=a.replace(/((https?|ftp)(:\/\/[-_.!~*\'()a-zA-Z0-9;\/?:\@&=+\$,%#]+))/g,function(){var a=arguments[1];return a.match(/(\.jpg|\.JPG|\.gif|\.GIF|\.png|\.PNG|\.bmp|\.BMP)$/)?a:'<a href="'+a+'" target="_blank" >'+a+"</a>"});return b}function c(a){var b=a.replace(/(\/uploads\/(\S+))/g,function(){var a=arguments[1],b=arguments[2];return a.match(/(\.jpg|\.JPG|\.gif|\.GIF|\.png|\.PNG|\.bmp|\.BMP)$/)?a:'<a href="'+a+'"><i class="icon-download-alt"></i>'+b+"</a>"});return b}function d(a,b){var c=a.replace(/((\S+?(\.jpg|\.JPG|\.gif|\.GIF|\.png|\.PNG|\.bmp|\.BMP))($|\s([0-9]+)|\s))/g,function(){var a=arguments[2],c=void 0!=arguments[5]?arguments[5]:b;return c?'<a href="'+a+'" target="_blank" class="thumbnail"><img src="'+a+'" style="height:'+c+'px"/></a>':'<a href="'+a+'" target="_blank" class="thumbnail" style="display: inline-block;"><img src="'+a+'"/></a>'});return c}function e(a){var b=0,c=a.replace(h,function(){var a=arguments[0];return a.indexOf("x")>0?'<input type="checkbox" data-no="'+b++ +'" checked />':'<input type="checkbox" data-no="'+b++ +'" />'});return c}function f(a){var b=a.replace(/^(#+)[ ]*(.*)$/gm,function(){var a=arguments[1].length<4?arguments[1].length:4,b=arguments[2];return"<h"+a+">"+g(b)+"</h"+a+">"});return b}function g(a){var b=a.replace(/^(.+)[ 　]#([a-z]+)$/gm,function(){var a=arguments[1],b=arguments[2];return"r"==b&&(b="red"),"g"==b&&(b="green"),"b"==b&&(b="blue"),'<font color="'+b+'">'+a+"</font>"});return b}var h=/-[ ]?\[[ ]?\]|-[ ]?\[x\]/g,i="-[x]",j="-[ ]";a.fn.decora=function(b){function c(a,b,c){var d=0;return c.replace(h,function(){var c=arguments[0],e=d++;return a==e?b?i:j:c})}var d={checkbox_callback:function(){}},b=a.extend(d,b);return Function.prototype.method=function(a,b){return this.prototype[a]=b,this},Function.method("curry",function(){var a=Array.prototype.slice,b=a.apply(arguments),c=this;return function(){return c.apply(null,b.concat(a.apply(arguments)))}}),a(this).on("click",":checkbox",function(){var d=a(this).data("no"),e=a(this).attr("checked")?!0:!1,f=this;b.checkbox_callback(f,c.curry(d,e))}),this},a.decora={to_html:function(a){return a=b(a),a=c(a),a=d(a,200),a=e(a),a=f(a),a=g(a)},message_to_html:function(a){return a=a.replace(/(^|\s+)+(SUCCESS|OK|YES)($|\s)+/,function(){return' <span class="label label-success">'+arguments[2]+"</span> "}),a=a.replace(/(^|\s+)+(FAILURE|NG|NO)($|\s)+/,function(){return' <span class="label label-important">'+arguments[1]+"</span> "}),a=a.replace(/[\(（](笑|爆|喜|嬉|楽|驚|泣|涙|悲|怒|厳|辛|苦|閃|汗|忙|急|輝)[\)）]/g,function(){return'<span class="emo">'+arguments[1]+"</span>"}),a=b(a),a=c(a),a=d(a,50),a=g(a)}}}(jQuery),function(a){String.prototype.getLinefromCount=function(a){var b=/\r\n|\r/g,c=this.slice(0,a),d=c.match(b);d&&(c=c.replace(b,"\n"));var e=c.split("\n");return e.length},String.prototype.getCountfromLine=function(a){var b=0;for(i=0;a>i;i++)b=this.indexOf("\n",b)+1;return b};var b=function(a){var b=this.get(0);return null==a?c(b):(d(b,a),this)},c=function(a){return a.selectionStart||"0"==a.selectionStart?start=a.selectionStart:document.selection&&(start=getSelectionCount(a)[0]),isNaN(start)?void 0:a.value.getLinefromCount(start)},d=function(a,b){var c=a.value.getCountfromLine(b);if(a.setSelectionRange)a.setSelectionRange(c,c);else if(a.createTextRange){var d=a.createTextRange();d.collapse(!0),d.moveEnd("character",c),d.moveStart("character",c),d.select()}};a.fn.extend({caretLine:b})}(jQuery),__whitespace={" ":!0,"	":!0,"\n":!0,"\f":!0,"\r":!0},difflib={defaultJunkFunction:function(a){return __whitespace.hasOwnProperty(a)},stripLinebreaks:function(a){return a.replace(/^[\n\r]*|[\n\r]*$/g,"")},stringAsLines:function(a){for(var b=a.indexOf("\n"),c=a.indexOf("\r"),d=b>-1&&c>-1||0>c?"\n":"\r",e=a.split(d),f=0;f<e.length;f++)e[f]=difflib.stripLinebreaks(e[f]);return e},__reduce:function(a,b,c){if(null!=c)var d=c,e=0;else{if(!b)return null;var d=b[0],e=1}for(;e<b.length;e++)d=a(d,b[e]);return d},__ntuplecomp:function(a,b){for(var c=Math.max(a.length,b.length),d=0;c>d;d++){if(a[d]<b[d])return-1;if(a[d]>b[d])return 1}return a.length==b.length?0:a.length<b.length?-1:1},__calculate_ratio:function(a,b){return b?2*a/b:1},__isindict:function(a){return function(b){return a.hasOwnProperty(b)}},__dictget:function(a,b,c){return a.hasOwnProperty(b)?a[b]:c},SequenceMatcher:function(a,b,c){this.set_seqs=function(a,b){this.set_seq1(a),this.set_seq2(b)},this.set_seq1=function(a){a!=this.a&&(this.a=a,this.matching_blocks=this.opcodes=null)},this.set_seq2=function(a){a!=this.b&&(this.b=a,this.matching_blocks=this.opcodes=this.fullbcount=null,this.__chain_b())},this.__chain_b=function(){for(var a=this.b,b=a.length,c=this.b2j={},d={},e=0;e<a.length;e++){var f=a[e];if(c.hasOwnProperty(f)){var g=c[f];b>=200&&100*g.length>b?(d[f]=1,delete c[f]):g.push(e)}else c[f]=[e]}for(var f in d)d.hasOwnProperty(f)&&delete c[f];var h=this.isjunk,i={};if(h){for(var f in d)d.hasOwnProperty(f)&&h(f)&&(i[f]=1,delete d[f]);for(var f in c)c.hasOwnProperty(f)&&h(f)&&(i[f]=1,delete c[f])}this.isbjunk=difflib.__isindict(i),this.isbpopular=difflib.__isindict(d)},this.find_longest_match=function(a,b,c,d){for(var e=this.a,f=this.b,g=this.b2j,h=this.isbjunk,i=a,j=c,l=0,m=null,n={},o=[],p=a;b>p;p++){var q={},r=difflib.__dictget(g,e[p],o);for(var s in r)if(r.hasOwnProperty(s)){if(m=r[s],c>m)continue;if(m>=d)break;q[m]=k=difflib.__dictget(n,m-1,0)+1,k>l&&(i=p-k+1,j=m-k+1,l=k)}n=q}for(;i>a&&j>c&&!h(f[j-1])&&e[i-1]==f[j-1];)i--,j--,l++;for(;b>i+l&&d>j+l&&!h(f[j+l])&&e[i+l]==f[j+l];)l++;for(;i>a&&j>c&&h(f[j-1])&&e[i-1]==f[j-1];)i--,j--,l++;for(;b>i+l&&d>j+l&&h(f[j+l])&&e[i+l]==f[j+l];)l++;return[i,j,l]},this.get_matching_blocks=function(){if(null!=this.matching_blocks)return this.matching_blocks;for(var a,b,c,d,e,f,g,h,i,j=this.a.length,k=this.b.length,l=[[0,j,0,k]],m=[];l.length;)e=l.pop(),a=e[0],b=e[1],c=e[2],d=e[3],i=this.find_longest_match(a,b,c,d),f=i[0],g=i[1],h=i[2],h&&(m.push(i),f>a&&g>c&&l.push([a,f,c,g]),b>f+h&&d>g+h&&l.push([f+h,b,g+h,d]));m.sort(difflib.__ntuplecomp);var n=j1=k1=block=0,o=[];for(var p in m)m.hasOwnProperty(p)&&(block=m[p],i2=block[0],j2=block[1],k2=block[2],n+k1==i2&&j1+k1==j2?k1+=k2:(k1&&o.push([n,j1,k1]),n=i2,j1=j2,k1=k2));return k1&&o.push([n,j1,k1]),o.push([j,k,0]),this.matching_blocks=o,this.matching_blocks},this.get_opcodes=function(){if(null!=this.opcodes)return this.opcodes;var a=0,b=0,c=[];this.opcodes=c;var d,e,f,g,h,i=this.get_matching_blocks();for(var j in i)i.hasOwnProperty(j)&&(d=i[j],e=d[0],f=d[1],g=d[2],h="",e>a&&f>b?h="replace":e>a?h="delete":f>b&&(h="insert"),h&&c.push([h,a,e,b,f]),a=e+g,b=f+g,g&&c.push(["equal",e,a,f,b]));return c},this.get_grouped_opcodes=function(a){a||(a=3);var b=this.get_opcodes();b||(b=[["equal",0,1,0,1]]);var c,d,e,f,g,h;"equal"==b[0][0]&&(c=b[0],d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],b[0]=[d,Math.max(e,f-a),f,Math.max(g,h-a),h]),"equal"==b[b.length-1][0]&&(c=b[b.length-1],d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],b[b.length-1]=[d,e,Math.min(f,e+a),g,Math.min(h,g+a)]);var i=a+a,j=[],k=[];for(var l in b)b.hasOwnProperty(l)&&(c=b[l],d=c[0],e=c[1],f=c[2],g=c[3],h=c[4],"equal"==d&&f-e>i&&(j.push([d,e,Math.min(f,e+a),g,Math.min(h,g+a)]),k.push(j),j=[],e=Math.max(e,f-a),g=Math.max(g,h-a)),j.push([d,e,f,g,h]));return!j||1==j.length&&"equal"==j[0][0]||k.push(j),k},this.ratio=function(){return matches=difflib.__reduce(function(a,b){return a+b[b.length-1]},this.get_matching_blocks(),0),difflib.__calculate_ratio(matches,this.a.length+this.b.length)},this.quick_ratio=function(){var a,b;if(null==this.fullbcount){this.fullbcount=a={};for(var c=0;c<this.b.length;c++)b=this.b[c],a[b]=difflib.__dictget(a,b,0)+1}a=this.fullbcount;for(var d={},e=difflib.__isindict(d),f=numb=0,c=0;c<this.a.length;c++)b=this.a[c],numb=e(b)?d[b]:difflib.__dictget(a,b,0),d[b]=numb-1,numb>0&&f++;return difflib.__calculate_ratio(f,this.a.length+this.b.length)},this.real_quick_ratio=function(){var a=this.a.length,b=this.b.length;return _calculate_ratio(Math.min(a,b),a+b)},this.isjunk=c?c:difflib.defaultJunkFunction,this.a=this.b=null,this.set_seqs(a,b)}},diffview={buildView:function(a){function b(a,b){var c=document.createElement(a);return c.className=b,c}function c(a,b){var c=document.createElement(a);return c.appendChild(document.createTextNode(b)),c}function d(a,b,c){var d=document.createElement(a);return d.className=b,d.appendChild(document.createTextNode(c)),d}function e(a,e,f,g,h){return f>e?(a.appendChild(c("th",(e+1).toString())),a.appendChild(d("td",h,g[e].replace(/\t/g,"    "))),e+1):(a.appendChild(document.createElement("th")),a.appendChild(b("td","empty")),e)}function f(a,b,c,e,f){a.appendChild(d("td",f,e[null!=b?b:c].replace(/\t/g,"    ")))}var g=a.baseTextLines,h=a.newTextLines,i=a.opcodes,j=a.baseTextName?a.baseTextName:"Base Text",k=a.newTextName?a.newTextName:"New Text",l=a.contextSize,m=0==a.viewType||1==a.viewType?a.viewType:0;if(null==g)throw"Cannot build diff view; baseTextLines is not defined.";if(null==h)throw"Cannot build diff view; newTextLines is not defined.";if(!i)throw"Canno build diff view; opcodes is not defined.";var n=document.createElement("thead"),o=document.createElement("tr");n.appendChild(o),m?o.appendChild(d("th","texttitle",j+" vs. "+k)):(o.appendChild(document.createElement("th")),o.appendChild(d("th","texttitle",j)),o.appendChild(document.createElement("th")),o.appendChild(d("th","texttitle",k))),n=[n];for(var p,q=[],r=0;r<i.length;r++){code=i[r],change=code[0];for(var s=code[1],t=code[2],u=code[3],v=code[4],w=Math.max(t-s,v-u),x=[],y=[],z=0;w>z;z++){if(l&&i.length>1&&(r>0&&z==l||0==r&&0==z)&&"equal"==change){var A=w-(0==r?1:2)*l;if(A>1){if(x.push(o=document.createElement("tr")),s+=A,u+=A,z+=A-1,o.appendChild(c("th","...")),m||o.appendChild(d("td","skip","")),o.appendChild(c("th","...")),o.appendChild(d("td","skip","")),r+1==i.length)break;continue}}x.push(o=document.createElement("tr")),m?"insert"==change?f(o,null,u++,h,change):"replace"==change?(y.push(p=document.createElement("tr")),t>s&&f(o,s++,null,g,"delete"),v>u&&f(p,null,u++,h,"insert")):"delete"==change?f(o,s++,null,g,change):f(o,s++,u++,g,change):(s=e(o,s,t,g,change),u=e(o,u,v,h,change))}for(var z=0;z<x.length;z++)q.push(x[z]);for(var z=0;z<y.length;z++)q.push(y[z])}n.push(o=document.createElement("tbody"));for(var r in q)q.hasOwnProperty(r)&&o.appendChild(q[r]);o=b("table","diff"+(m?" inlinediff":""));for(var r in n)n.hasOwnProperty(r)&&o.appendChild(n[r]);return o}};var latest_login_list=[],login_name="",suggest_obj=void 0,LOGIN_COLOR_MAX=9,COOKIE_NAME="dev_hub_name",COOKIE_STYLE_NAME="dev_hub_style_name",COOKIE_EXPIRES=365,TITLE_ORG=document.title,CODE_MIN_HEIGHT=700,CODE_OUT_ADJUST_HEIGHT=200,CODE_INDEX_ADJUST_HEIGHT=50,CODE_ADJUST_HEIGHT=100,SHARE_MEMO_NUMBER=20,DEFAULT_STYLE_NAME="default",STYLE_CONFIG={"default":{white_icon:!0,css_file:"bootstrap.min.css"},journal:{white_icon:!1,css_file:"bootstrap.journal.css"},united:{white_icon:!0,css_file:"bootstrap.united.css"}},socket=io.connect("/"),writing_text=[],text_logs=[],newest_count=0;$(function(){init_chat(),init_sharememo(),init_websocket(),init_dropzone();var a=$.cookie(COOKIE_STYLE_NAME)||DEFAULT_STYLE_NAME;change_style(a),$('a[id^="style-"]').click(function(a){a.preventDefault();var b=$(a.target).attr("id").replace(/^style-/,"");change_style(b)}),null==$.cookie(COOKIE_NAME)?setTimeout(function(){$("#name_in").modal("show"),setTimeout(function(){$("#login_name").focus()},500)},500):(login_name=$.cookie(COOKIE_NAME),$("#name").val(login_name),$("#message").focus()),$(window).on("blur focus",function(){newest_off()})});